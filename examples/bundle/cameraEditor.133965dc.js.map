{"mappings":"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","sources":["<anon>","examples/cameraEditor.js","node_modules/.pnpm/three@0.160.1/node_modules/three/examples/jsm/controls/TransformControls.js"],"sourcesContent":["import \"./buildingAnimation.5423aa82.js\";\nimport \"./buildingAnimation.bd798f01.js\";\nimport \"./buildingAnimation.4b8d4fc8.js\";\n\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire1149\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire1149\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\n\nvar $cPutt = parcelRequire(\"cPutt\");\n\nvar $ihXk0 = parcelRequire(\"ihXk0\");\n\nvar $2sw9m = parcelRequire(\"2sw9m\");\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\nconst $fa0b52e175c5eff4$var$_raycaster = new (0, $jw0R5.Raycaster)();\nconst $fa0b52e175c5eff4$var$_tempVector = new (0, $jw0R5.Vector3)();\nconst $fa0b52e175c5eff4$var$_tempVector2 = new (0, $jw0R5.Vector3)();\nconst $fa0b52e175c5eff4$var$_tempQuaternion = new (0, $jw0R5.Quaternion)();\nconst $fa0b52e175c5eff4$var$_unit = {\n    X: new (0, $jw0R5.Vector3)(1, 0, 0),\n    Y: new (0, $jw0R5.Vector3)(0, 1, 0),\n    Z: new (0, $jw0R5.Vector3)(0, 0, 1)\n};\nconst $fa0b52e175c5eff4$var$_changeEvent = {\n    type: 'change'\n};\nconst $fa0b52e175c5eff4$var$_mouseDownEvent = {\n    type: 'mouseDown'\n};\nconst $fa0b52e175c5eff4$var$_mouseUpEvent = {\n    type: 'mouseUp',\n    mode: null\n};\nconst $fa0b52e175c5eff4$var$_objectChangeEvent = {\n    type: 'objectChange'\n};\nclass $fa0b52e175c5eff4$export$198e80c116632110 extends (0, $jw0R5.Object3D) {\n    constructor(camera, domElement){\n        super();\n        if (domElement === undefined) {\n            console.warn('THREE.TransformControls: The second parameter \"domElement\" is now mandatory.');\n            domElement = document;\n        }\n        this.isTransformControls = true;\n        this.visible = false;\n        this.domElement = domElement;\n        this.domElement.style.touchAction = 'none'; // disable touch scroll\n        const _gizmo = new $fa0b52e175c5eff4$export$c2ae06a69fb9d31f();\n        this._gizmo = _gizmo;\n        this.add(_gizmo);\n        const _plane = new $fa0b52e175c5eff4$export$c0ab73045548e2ca();\n        this._plane = _plane;\n        this.add(_plane);\n        const scope = this;\n        // Defined getter, setter and store for a property\n        function defineProperty(propName, defaultValue) {\n            let propValue = defaultValue;\n            Object.defineProperty(scope, propName, {\n                get: function() {\n                    return propValue !== undefined ? propValue : defaultValue;\n                },\n                set: function(value) {\n                    if (propValue !== value) {\n                        propValue = value;\n                        _plane[propName] = value;\n                        _gizmo[propName] = value;\n                        scope.dispatchEvent({\n                            type: propName + '-changed',\n                            value: value\n                        });\n                        scope.dispatchEvent($fa0b52e175c5eff4$var$_changeEvent);\n                    }\n                }\n            });\n            scope[propName] = defaultValue;\n            _plane[propName] = defaultValue;\n            _gizmo[propName] = defaultValue;\n        }\n        // Define properties with getters/setter\n        // Setting the defined property will automatically trigger change event\n        // Defined properties are passed down to gizmo and plane\n        defineProperty('camera', camera);\n        defineProperty('object', undefined);\n        defineProperty('enabled', true);\n        defineProperty('axis', null);\n        defineProperty('mode', 'translate');\n        defineProperty('translationSnap', null);\n        defineProperty('rotationSnap', null);\n        defineProperty('scaleSnap', null);\n        defineProperty('space', 'world');\n        defineProperty('size', 1);\n        defineProperty('dragging', false);\n        defineProperty('showX', true);\n        defineProperty('showY', true);\n        defineProperty('showZ', true);\n        // Reusable utility variables\n        const worldPosition = new (0, $jw0R5.Vector3)();\n        const worldPositionStart = new (0, $jw0R5.Vector3)();\n        const worldQuaternion = new (0, $jw0R5.Quaternion)();\n        const worldQuaternionStart = new (0, $jw0R5.Quaternion)();\n        const cameraPosition = new (0, $jw0R5.Vector3)();\n        const cameraQuaternion = new (0, $jw0R5.Quaternion)();\n        const pointStart = new (0, $jw0R5.Vector3)();\n        const pointEnd = new (0, $jw0R5.Vector3)();\n        const rotationAxis = new (0, $jw0R5.Vector3)();\n        const rotationAngle = 0;\n        const eye = new (0, $jw0R5.Vector3)();\n        // TODO: remove properties unused in plane and gizmo\n        defineProperty('worldPosition', worldPosition);\n        defineProperty('worldPositionStart', worldPositionStart);\n        defineProperty('worldQuaternion', worldQuaternion);\n        defineProperty('worldQuaternionStart', worldQuaternionStart);\n        defineProperty('cameraPosition', cameraPosition);\n        defineProperty('cameraQuaternion', cameraQuaternion);\n        defineProperty('pointStart', pointStart);\n        defineProperty('pointEnd', pointEnd);\n        defineProperty('rotationAxis', rotationAxis);\n        defineProperty('rotationAngle', rotationAngle);\n        defineProperty('eye', eye);\n        this._offset = new (0, $jw0R5.Vector3)();\n        this._startNorm = new (0, $jw0R5.Vector3)();\n        this._endNorm = new (0, $jw0R5.Vector3)();\n        this._cameraScale = new (0, $jw0R5.Vector3)();\n        this._parentPosition = new (0, $jw0R5.Vector3)();\n        this._parentQuaternion = new (0, $jw0R5.Quaternion)();\n        this._parentQuaternionInv = new (0, $jw0R5.Quaternion)();\n        this._parentScale = new (0, $jw0R5.Vector3)();\n        this._worldScaleStart = new (0, $jw0R5.Vector3)();\n        this._worldQuaternionInv = new (0, $jw0R5.Quaternion)();\n        this._worldScale = new (0, $jw0R5.Vector3)();\n        this._positionStart = new (0, $jw0R5.Vector3)();\n        this._quaternionStart = new (0, $jw0R5.Quaternion)();\n        this._scaleStart = new (0, $jw0R5.Vector3)();\n        this._getPointer = $fa0b52e175c5eff4$var$getPointer.bind(this);\n        this._onPointerDown = $fa0b52e175c5eff4$var$onPointerDown.bind(this);\n        this._onPointerHover = $fa0b52e175c5eff4$var$onPointerHover.bind(this);\n        this._onPointerMove = $fa0b52e175c5eff4$var$onPointerMove.bind(this);\n        this._onPointerUp = $fa0b52e175c5eff4$var$onPointerUp.bind(this);\n        this.domElement.addEventListener('pointerdown', this._onPointerDown);\n        this.domElement.addEventListener('pointermove', this._onPointerHover);\n        this.domElement.addEventListener('pointerup', this._onPointerUp);\n    }\n    // updateMatrixWorld  updates key transformation variables\n    updateMatrixWorld() {\n        if (this.object !== undefined) {\n            this.object.updateMatrixWorld();\n            if (this.object.parent === null) console.error('TransformControls: The attached 3D object must be a part of the scene graph.');\n            else this.object.parent.matrixWorld.decompose(this._parentPosition, this._parentQuaternion, this._parentScale);\n            this.object.matrixWorld.decompose(this.worldPosition, this.worldQuaternion, this._worldScale);\n            this._parentQuaternionInv.copy(this._parentQuaternion).invert();\n            this._worldQuaternionInv.copy(this.worldQuaternion).invert();\n        }\n        this.camera.updateMatrixWorld();\n        this.camera.matrixWorld.decompose(this.cameraPosition, this.cameraQuaternion, this._cameraScale);\n        if (this.camera.isOrthographicCamera) this.camera.getWorldDirection(this.eye).negate();\n        else this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize();\n        super.updateMatrixWorld(this);\n    }\n    pointerHover(pointer) {\n        if (this.object === undefined || this.dragging === true) return;\n        $fa0b52e175c5eff4$var$_raycaster.setFromCamera(pointer, this.camera);\n        const intersect = $fa0b52e175c5eff4$var$intersectObjectWithRay(this._gizmo.picker[this.mode], $fa0b52e175c5eff4$var$_raycaster);\n        if (intersect) this.axis = intersect.object.name;\n        else this.axis = null;\n    }\n    pointerDown(pointer) {\n        if (this.object === undefined || this.dragging === true || pointer.button !== 0) return;\n        if (this.axis !== null) {\n            $fa0b52e175c5eff4$var$_raycaster.setFromCamera(pointer, this.camera);\n            const planeIntersect = $fa0b52e175c5eff4$var$intersectObjectWithRay(this._plane, $fa0b52e175c5eff4$var$_raycaster, true);\n            if (planeIntersect) {\n                this.object.updateMatrixWorld();\n                this.object.parent.updateMatrixWorld();\n                this._positionStart.copy(this.object.position);\n                this._quaternionStart.copy(this.object.quaternion);\n                this._scaleStart.copy(this.object.scale);\n                this.object.matrixWorld.decompose(this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart);\n                this.pointStart.copy(planeIntersect.point).sub(this.worldPositionStart);\n            }\n            this.dragging = true;\n            $fa0b52e175c5eff4$var$_mouseDownEvent.mode = this.mode;\n            this.dispatchEvent($fa0b52e175c5eff4$var$_mouseDownEvent);\n        }\n    }\n    pointerMove(pointer) {\n        const axis = this.axis;\n        const mode = this.mode;\n        const object = this.object;\n        let space = this.space;\n        if (mode === 'scale') space = 'local';\n        else if (axis === 'E' || axis === 'XYZE' || axis === 'XYZ') space = 'world';\n        if (object === undefined || axis === null || this.dragging === false || pointer.button !== -1) return;\n        $fa0b52e175c5eff4$var$_raycaster.setFromCamera(pointer, this.camera);\n        const planeIntersect = $fa0b52e175c5eff4$var$intersectObjectWithRay(this._plane, $fa0b52e175c5eff4$var$_raycaster, true);\n        if (!planeIntersect) return;\n        this.pointEnd.copy(planeIntersect.point).sub(this.worldPositionStart);\n        if (mode === 'translate') {\n            // Apply translate\n            this._offset.copy(this.pointEnd).sub(this.pointStart);\n            if (space === 'local' && axis !== 'XYZ') this._offset.applyQuaternion(this._worldQuaternionInv);\n            if (axis.indexOf('X') === -1) this._offset.x = 0;\n            if (axis.indexOf('Y') === -1) this._offset.y = 0;\n            if (axis.indexOf('Z') === -1) this._offset.z = 0;\n            if (space === 'local' && axis !== 'XYZ') this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale);\n            else this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale);\n            object.position.copy(this._offset).add(this._positionStart);\n            // Apply translation snap\n            if (this.translationSnap) {\n                if (space === 'local') {\n                    object.position.applyQuaternion($fa0b52e175c5eff4$var$_tempQuaternion.copy(this._quaternionStart).invert());\n                    if (axis.search('X') !== -1) object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n                    if (axis.search('Y') !== -1) object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n                    if (axis.search('Z') !== -1) object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n                    object.position.applyQuaternion(this._quaternionStart);\n                }\n                if (space === 'world') {\n                    if (object.parent) object.position.add($fa0b52e175c5eff4$var$_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n                    if (axis.search('X') !== -1) object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n                    if (axis.search('Y') !== -1) object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n                    if (axis.search('Z') !== -1) object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n                    if (object.parent) object.position.sub($fa0b52e175c5eff4$var$_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n                }\n            }\n        } else if (mode === 'scale') {\n            if (axis.search('XYZ') !== -1) {\n                let d = this.pointEnd.length() / this.pointStart.length();\n                if (this.pointEnd.dot(this.pointStart) < 0) d *= -1;\n                $fa0b52e175c5eff4$var$_tempVector2.set(d, d, d);\n            } else {\n                $fa0b52e175c5eff4$var$_tempVector.copy(this.pointStart);\n                $fa0b52e175c5eff4$var$_tempVector2.copy(this.pointEnd);\n                $fa0b52e175c5eff4$var$_tempVector.applyQuaternion(this._worldQuaternionInv);\n                $fa0b52e175c5eff4$var$_tempVector2.applyQuaternion(this._worldQuaternionInv);\n                $fa0b52e175c5eff4$var$_tempVector2.divide($fa0b52e175c5eff4$var$_tempVector);\n                if (axis.search('X') === -1) $fa0b52e175c5eff4$var$_tempVector2.x = 1;\n                if (axis.search('Y') === -1) $fa0b52e175c5eff4$var$_tempVector2.y = 1;\n                if (axis.search('Z') === -1) $fa0b52e175c5eff4$var$_tempVector2.z = 1;\n            }\n            // Apply scale\n            object.scale.copy(this._scaleStart).multiply($fa0b52e175c5eff4$var$_tempVector2);\n            if (this.scaleSnap) {\n                if (axis.search('X') !== -1) object.scale.x = Math.round(object.scale.x / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n                if (axis.search('Y') !== -1) object.scale.y = Math.round(object.scale.y / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n                if (axis.search('Z') !== -1) object.scale.z = Math.round(object.scale.z / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n            }\n        } else if (mode === 'rotate') {\n            this._offset.copy(this.pointEnd).sub(this.pointStart);\n            const ROTATION_SPEED = 20 / this.worldPosition.distanceTo($fa0b52e175c5eff4$var$_tempVector.setFromMatrixPosition(this.camera.matrixWorld));\n            let _inPlaneRotation = false;\n            if (axis === 'XYZE') {\n                this.rotationAxis.copy(this._offset).cross(this.eye).normalize();\n                this.rotationAngle = this._offset.dot($fa0b52e175c5eff4$var$_tempVector.copy(this.rotationAxis).cross(this.eye)) * ROTATION_SPEED;\n            } else if (axis === 'X' || axis === 'Y' || axis === 'Z') {\n                this.rotationAxis.copy($fa0b52e175c5eff4$var$_unit[axis]);\n                $fa0b52e175c5eff4$var$_tempVector.copy($fa0b52e175c5eff4$var$_unit[axis]);\n                if (space === 'local') $fa0b52e175c5eff4$var$_tempVector.applyQuaternion(this.worldQuaternion);\n                $fa0b52e175c5eff4$var$_tempVector.cross(this.eye);\n                // When _tempVector is 0 after cross with this.eye the vectors are parallel and should use in-plane rotation logic.\n                if ($fa0b52e175c5eff4$var$_tempVector.length() === 0) _inPlaneRotation = true;\n                else this.rotationAngle = this._offset.dot($fa0b52e175c5eff4$var$_tempVector.normalize()) * ROTATION_SPEED;\n            }\n            if (axis === 'E' || _inPlaneRotation) {\n                this.rotationAxis.copy(this.eye);\n                this.rotationAngle = this.pointEnd.angleTo(this.pointStart);\n                this._startNorm.copy(this.pointStart).normalize();\n                this._endNorm.copy(this.pointEnd).normalize();\n                this.rotationAngle *= this._endNorm.cross(this._startNorm).dot(this.eye) < 0 ? 1 : -1;\n            }\n            // Apply rotation snap\n            if (this.rotationSnap) this.rotationAngle = Math.round(this.rotationAngle / this.rotationSnap) * this.rotationSnap;\n            // Apply rotate\n            if (space === 'local' && axis !== 'E' && axis !== 'XYZE') {\n                object.quaternion.copy(this._quaternionStart);\n                object.quaternion.multiply($fa0b52e175c5eff4$var$_tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle)).normalize();\n            } else {\n                this.rotationAxis.applyQuaternion(this._parentQuaternionInv);\n                object.quaternion.copy($fa0b52e175c5eff4$var$_tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle));\n                object.quaternion.multiply(this._quaternionStart).normalize();\n            }\n        }\n        this.dispatchEvent($fa0b52e175c5eff4$var$_changeEvent);\n        this.dispatchEvent($fa0b52e175c5eff4$var$_objectChangeEvent);\n    }\n    pointerUp(pointer) {\n        if (pointer.button !== 0) return;\n        if (this.dragging && this.axis !== null) {\n            $fa0b52e175c5eff4$var$_mouseUpEvent.mode = this.mode;\n            this.dispatchEvent($fa0b52e175c5eff4$var$_mouseUpEvent);\n        }\n        this.dragging = false;\n        this.axis = null;\n    }\n    dispose() {\n        this.domElement.removeEventListener('pointerdown', this._onPointerDown);\n        this.domElement.removeEventListener('pointermove', this._onPointerHover);\n        this.domElement.removeEventListener('pointermove', this._onPointerMove);\n        this.domElement.removeEventListener('pointerup', this._onPointerUp);\n        this.traverse(function(child) {\n            if (child.geometry) child.geometry.dispose();\n            if (child.material) child.material.dispose();\n        });\n    }\n    // Set current object\n    attach(object) {\n        this.object = object;\n        this.visible = true;\n        return this;\n    }\n    // Detach from object\n    detach() {\n        this.object = undefined;\n        this.visible = false;\n        this.axis = null;\n        return this;\n    }\n    reset() {\n        if (!this.enabled) return;\n        if (this.dragging) {\n            this.object.position.copy(this._positionStart);\n            this.object.quaternion.copy(this._quaternionStart);\n            this.object.scale.copy(this._scaleStart);\n            this.dispatchEvent($fa0b52e175c5eff4$var$_changeEvent);\n            this.dispatchEvent($fa0b52e175c5eff4$var$_objectChangeEvent);\n            this.pointStart.copy(this.pointEnd);\n        }\n    }\n    getRaycaster() {\n        return $fa0b52e175c5eff4$var$_raycaster;\n    }\n    // TODO: deprecate\n    getMode() {\n        return this.mode;\n    }\n    setMode(mode) {\n        this.mode = mode;\n    }\n    setTranslationSnap(translationSnap) {\n        this.translationSnap = translationSnap;\n    }\n    setRotationSnap(rotationSnap) {\n        this.rotationSnap = rotationSnap;\n    }\n    setScaleSnap(scaleSnap) {\n        this.scaleSnap = scaleSnap;\n    }\n    setSize(size) {\n        this.size = size;\n    }\n    setSpace(space) {\n        this.space = space;\n    }\n}\n// mouse / touch event handlers\nfunction $fa0b52e175c5eff4$var$getPointer(event) {\n    if (this.domElement.ownerDocument.pointerLockElement) return {\n        x: 0,\n        y: 0,\n        button: event.button\n    };\n    else {\n        const rect = this.domElement.getBoundingClientRect();\n        return {\n            x: (event.clientX - rect.left) / rect.width * 2 - 1,\n            y: -(event.clientY - rect.top) / rect.height * 2 + 1,\n            button: event.button\n        };\n    }\n}\nfunction $fa0b52e175c5eff4$var$onPointerHover(event) {\n    if (!this.enabled) return;\n    switch(event.pointerType){\n        case 'mouse':\n        case 'pen':\n            this.pointerHover(this._getPointer(event));\n            break;\n    }\n}\nfunction $fa0b52e175c5eff4$var$onPointerDown(event) {\n    if (!this.enabled) return;\n    if (!document.pointerLockElement) this.domElement.setPointerCapture(event.pointerId);\n    this.domElement.addEventListener('pointermove', this._onPointerMove);\n    this.pointerHover(this._getPointer(event));\n    this.pointerDown(this._getPointer(event));\n}\nfunction $fa0b52e175c5eff4$var$onPointerMove(event) {\n    if (!this.enabled) return;\n    this.pointerMove(this._getPointer(event));\n}\nfunction $fa0b52e175c5eff4$var$onPointerUp(event) {\n    if (!this.enabled) return;\n    this.domElement.releasePointerCapture(event.pointerId);\n    this.domElement.removeEventListener('pointermove', this._onPointerMove);\n    this.pointerUp(this._getPointer(event));\n}\nfunction $fa0b52e175c5eff4$var$intersectObjectWithRay(object, raycaster, includeInvisible) {\n    const allIntersections = raycaster.intersectObject(object, true);\n    for(let i = 0; i < allIntersections.length; i++){\n        if (allIntersections[i].object.visible || includeInvisible) return allIntersections[i];\n    }\n    return false;\n}\n//\n// Reusable utility variables\nconst $fa0b52e175c5eff4$var$_tempEuler = new (0, $jw0R5.Euler)();\nconst $fa0b52e175c5eff4$var$_alignVector = new (0, $jw0R5.Vector3)(0, 1, 0);\nconst $fa0b52e175c5eff4$var$_zeroVector = new (0, $jw0R5.Vector3)(0, 0, 0);\nconst $fa0b52e175c5eff4$var$_lookAtMatrix = new (0, $jw0R5.Matrix4)();\nconst $fa0b52e175c5eff4$var$_tempQuaternion2 = new (0, $jw0R5.Quaternion)();\nconst $fa0b52e175c5eff4$var$_identityQuaternion = new (0, $jw0R5.Quaternion)();\nconst $fa0b52e175c5eff4$var$_dirVector = new (0, $jw0R5.Vector3)();\nconst $fa0b52e175c5eff4$var$_tempMatrix = new (0, $jw0R5.Matrix4)();\nconst $fa0b52e175c5eff4$var$_unitX = new (0, $jw0R5.Vector3)(1, 0, 0);\nconst $fa0b52e175c5eff4$var$_unitY = new (0, $jw0R5.Vector3)(0, 1, 0);\nconst $fa0b52e175c5eff4$var$_unitZ = new (0, $jw0R5.Vector3)(0, 0, 1);\nconst $fa0b52e175c5eff4$var$_v1 = new (0, $jw0R5.Vector3)();\nconst $fa0b52e175c5eff4$var$_v2 = new (0, $jw0R5.Vector3)();\nconst $fa0b52e175c5eff4$var$_v3 = new (0, $jw0R5.Vector3)();\nclass $fa0b52e175c5eff4$export$c2ae06a69fb9d31f extends (0, $jw0R5.Object3D) {\n    constructor(){\n        super();\n        this.isTransformControlsGizmo = true;\n        this.type = 'TransformControlsGizmo';\n        // shared materials\n        const gizmoMaterial = new (0, $jw0R5.MeshBasicMaterial)({\n            depthTest: false,\n            depthWrite: false,\n            fog: false,\n            toneMapped: false,\n            transparent: true\n        });\n        const gizmoLineMaterial = new (0, $jw0R5.LineBasicMaterial)({\n            depthTest: false,\n            depthWrite: false,\n            fog: false,\n            toneMapped: false,\n            transparent: true\n        });\n        // Make unique material for each axis/color\n        const matInvisible = gizmoMaterial.clone();\n        matInvisible.opacity = 0.15;\n        const matHelper = gizmoLineMaterial.clone();\n        matHelper.opacity = 0.5;\n        const matRed = gizmoMaterial.clone();\n        matRed.color.setHex(0xff0000);\n        const matGreen = gizmoMaterial.clone();\n        matGreen.color.setHex(0x00ff00);\n        const matBlue = gizmoMaterial.clone();\n        matBlue.color.setHex(0x0000ff);\n        const matRedTransparent = gizmoMaterial.clone();\n        matRedTransparent.color.setHex(0xff0000);\n        matRedTransparent.opacity = 0.5;\n        const matGreenTransparent = gizmoMaterial.clone();\n        matGreenTransparent.color.setHex(0x00ff00);\n        matGreenTransparent.opacity = 0.5;\n        const matBlueTransparent = gizmoMaterial.clone();\n        matBlueTransparent.color.setHex(0x0000ff);\n        matBlueTransparent.opacity = 0.5;\n        const matWhiteTransparent = gizmoMaterial.clone();\n        matWhiteTransparent.opacity = 0.25;\n        const matYellowTransparent = gizmoMaterial.clone();\n        matYellowTransparent.color.setHex(0xffff00);\n        matYellowTransparent.opacity = 0.25;\n        const matYellow = gizmoMaterial.clone();\n        matYellow.color.setHex(0xffff00);\n        const matGray = gizmoMaterial.clone();\n        matGray.color.setHex(0x787878);\n        // reusable geometry\n        const arrowGeometry = new (0, $jw0R5.CylinderGeometry)(0, 0.04, 0.1, 12);\n        arrowGeometry.translate(0, 0.05, 0);\n        const scaleHandleGeometry = new (0, $jw0R5.BoxGeometry)(0.08, 0.08, 0.08);\n        scaleHandleGeometry.translate(0, 0.04, 0);\n        const lineGeometry = new (0, $jw0R5.BufferGeometry)();\n        lineGeometry.setAttribute('position', new (0, $jw0R5.Float32BufferAttribute)([\n            0,\n            0,\n            0,\n            1,\n            0,\n            0\n        ], 3));\n        const lineGeometry2 = new (0, $jw0R5.CylinderGeometry)(0.0075, 0.0075, 0.5, 3);\n        lineGeometry2.translate(0, 0.25, 0);\n        function CircleGeometry(radius, arc) {\n            const geometry = new (0, $jw0R5.TorusGeometry)(radius, 0.0075, 3, 64, arc * Math.PI * 2);\n            geometry.rotateY(Math.PI / 2);\n            geometry.rotateX(Math.PI / 2);\n            return geometry;\n        }\n        // Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n        function TranslateHelperGeometry() {\n            const geometry = new (0, $jw0R5.BufferGeometry)();\n            geometry.setAttribute('position', new (0, $jw0R5.Float32BufferAttribute)([\n                0,\n                0,\n                0,\n                1,\n                1,\n                1\n            ], 3));\n            return geometry;\n        }\n        // Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n        const gizmoTranslate = {\n            X: [\n                [\n                    new (0, $jw0R5.Mesh)(arrowGeometry, matRed),\n                    [\n                        0.5,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        -Math.PI / 2\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(arrowGeometry, matRed),\n                    [\n                        -0.5,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI / 2\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(lineGeometry2, matRed),\n                    [\n                        0,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        -Math.PI / 2\n                    ]\n                ]\n            ],\n            Y: [\n                [\n                    new (0, $jw0R5.Mesh)(arrowGeometry, matGreen),\n                    [\n                        0,\n                        0.5,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(arrowGeometry, matGreen),\n                    [\n                        0,\n                        -0.5,\n                        0\n                    ],\n                    [\n                        Math.PI,\n                        0,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(lineGeometry2, matGreen)\n                ]\n            ],\n            Z: [\n                [\n                    new (0, $jw0R5.Mesh)(arrowGeometry, matBlue),\n                    [\n                        0,\n                        0,\n                        0.5\n                    ],\n                    [\n                        Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(arrowGeometry, matBlue),\n                    [\n                        0,\n                        0,\n                        -0.5\n                    ],\n                    [\n                        -Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(lineGeometry2, matBlue),\n                    null,\n                    [\n                        Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ],\n            XYZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.OctahedronGeometry)(0.1, 0), matWhiteTransparent.clone()),\n                    [\n                        0,\n                        0,\n                        0\n                    ]\n                ]\n            ],\n            XY: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.15, 0.15, 0.01), matBlueTransparent.clone()),\n                    [\n                        0.15,\n                        0.15,\n                        0\n                    ]\n                ]\n            ],\n            YZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.15, 0.15, 0.01), matRedTransparent.clone()),\n                    [\n                        0,\n                        0.15,\n                        0.15\n                    ],\n                    [\n                        0,\n                        Math.PI / 2,\n                        0\n                    ]\n                ]\n            ],\n            XZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.15, 0.15, 0.01), matGreenTransparent.clone()),\n                    [\n                        0.15,\n                        0,\n                        0.15\n                    ],\n                    [\n                        -Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ]\n        };\n        const pickerTranslate = {\n            X: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0.3,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        -Math.PI / 2\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        -0.3,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI / 2\n                    ]\n                ]\n            ],\n            Y: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0,\n                        0.3,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0,\n                        -0.3,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI\n                    ]\n                ]\n            ],\n            Z: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0,\n                        0,\n                        0.3\n                    ],\n                    [\n                        Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0,\n                        0,\n                        -0.3\n                    ],\n                    [\n                        -Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ],\n            XYZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.OctahedronGeometry)(0.2, 0), matInvisible)\n                ]\n            ],\n            XY: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.2, 0.2, 0.01), matInvisible),\n                    [\n                        0.15,\n                        0.15,\n                        0\n                    ]\n                ]\n            ],\n            YZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.2, 0.2, 0.01), matInvisible),\n                    [\n                        0,\n                        0.15,\n                        0.15\n                    ],\n                    [\n                        0,\n                        Math.PI / 2,\n                        0\n                    ]\n                ]\n            ],\n            XZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.2, 0.2, 0.01), matInvisible),\n                    [\n                        0.15,\n                        0,\n                        0.15\n                    ],\n                    [\n                        -Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ]\n        };\n        const helperTranslate = {\n            START: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.OctahedronGeometry)(0.01, 2), matHelper),\n                    null,\n                    null,\n                    null,\n                    'helper'\n                ]\n            ],\n            END: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.OctahedronGeometry)(0.01, 2), matHelper),\n                    null,\n                    null,\n                    null,\n                    'helper'\n                ]\n            ],\n            DELTA: [\n                [\n                    new (0, $jw0R5.Line)(TranslateHelperGeometry(), matHelper),\n                    null,\n                    null,\n                    null,\n                    'helper'\n                ]\n            ],\n            X: [\n                [\n                    new (0, $jw0R5.Line)(lineGeometry, matHelper.clone()),\n                    [\n                        -1000,\n                        0,\n                        0\n                    ],\n                    null,\n                    [\n                        1e6,\n                        1,\n                        1\n                    ],\n                    'helper'\n                ]\n            ],\n            Y: [\n                [\n                    new (0, $jw0R5.Line)(lineGeometry, matHelper.clone()),\n                    [\n                        0,\n                        -1000,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI / 2\n                    ],\n                    [\n                        1e6,\n                        1,\n                        1\n                    ],\n                    'helper'\n                ]\n            ],\n            Z: [\n                [\n                    new (0, $jw0R5.Line)(lineGeometry, matHelper.clone()),\n                    [\n                        0,\n                        0,\n                        -1000\n                    ],\n                    [\n                        0,\n                        -Math.PI / 2,\n                        0\n                    ],\n                    [\n                        1e6,\n                        1,\n                        1\n                    ],\n                    'helper'\n                ]\n            ]\n        };\n        const gizmoRotate = {\n            XYZE: [\n                [\n                    new (0, $jw0R5.Mesh)(CircleGeometry(0.5, 1), matGray),\n                    null,\n                    [\n                        0,\n                        Math.PI / 2,\n                        0\n                    ]\n                ]\n            ],\n            X: [\n                [\n                    new (0, $jw0R5.Mesh)(CircleGeometry(0.5, 0.5), matRed)\n                ]\n            ],\n            Y: [\n                [\n                    new (0, $jw0R5.Mesh)(CircleGeometry(0.5, 0.5), matGreen),\n                    null,\n                    [\n                        0,\n                        0,\n                        -Math.PI / 2\n                    ]\n                ]\n            ],\n            Z: [\n                [\n                    new (0, $jw0R5.Mesh)(CircleGeometry(0.5, 0.5), matBlue),\n                    null,\n                    [\n                        0,\n                        Math.PI / 2,\n                        0\n                    ]\n                ]\n            ],\n            E: [\n                [\n                    new (0, $jw0R5.Mesh)(CircleGeometry(0.75, 1), matYellowTransparent),\n                    null,\n                    [\n                        0,\n                        Math.PI / 2,\n                        0\n                    ]\n                ]\n            ]\n        };\n        const helperRotate = {\n            AXIS: [\n                [\n                    new (0, $jw0R5.Line)(lineGeometry, matHelper.clone()),\n                    [\n                        -1000,\n                        0,\n                        0\n                    ],\n                    null,\n                    [\n                        1e6,\n                        1,\n                        1\n                    ],\n                    'helper'\n                ]\n            ]\n        };\n        const pickerRotate = {\n            XYZE: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.SphereGeometry)(0.25, 10, 8), matInvisible)\n                ]\n            ],\n            X: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.TorusGeometry)(0.5, 0.1, 4, 24), matInvisible),\n                    [\n                        0,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        -Math.PI / 2,\n                        -Math.PI / 2\n                    ]\n                ]\n            ],\n            Y: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.TorusGeometry)(0.5, 0.1, 4, 24), matInvisible),\n                    [\n                        0,\n                        0,\n                        0\n                    ],\n                    [\n                        Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ],\n            Z: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.TorusGeometry)(0.5, 0.1, 4, 24), matInvisible),\n                    [\n                        0,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        -Math.PI / 2\n                    ]\n                ]\n            ],\n            E: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.TorusGeometry)(0.75, 0.1, 2, 24), matInvisible)\n                ]\n            ]\n        };\n        const gizmoScale = {\n            X: [\n                [\n                    new (0, $jw0R5.Mesh)(scaleHandleGeometry, matRed),\n                    [\n                        0.5,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        -Math.PI / 2\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(lineGeometry2, matRed),\n                    [\n                        0,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        -Math.PI / 2\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(scaleHandleGeometry, matRed),\n                    [\n                        -0.5,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI / 2\n                    ]\n                ]\n            ],\n            Y: [\n                [\n                    new (0, $jw0R5.Mesh)(scaleHandleGeometry, matGreen),\n                    [\n                        0,\n                        0.5,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(lineGeometry2, matGreen)\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(scaleHandleGeometry, matGreen),\n                    [\n                        0,\n                        -0.5,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI\n                    ]\n                ]\n            ],\n            Z: [\n                [\n                    new (0, $jw0R5.Mesh)(scaleHandleGeometry, matBlue),\n                    [\n                        0,\n                        0,\n                        0.5\n                    ],\n                    [\n                        Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(lineGeometry2, matBlue),\n                    [\n                        0,\n                        0,\n                        0\n                    ],\n                    [\n                        Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(scaleHandleGeometry, matBlue),\n                    [\n                        0,\n                        0,\n                        -0.5\n                    ],\n                    [\n                        -Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ],\n            XY: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.15, 0.15, 0.01), matBlueTransparent),\n                    [\n                        0.15,\n                        0.15,\n                        0\n                    ]\n                ]\n            ],\n            YZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.15, 0.15, 0.01), matRedTransparent),\n                    [\n                        0,\n                        0.15,\n                        0.15\n                    ],\n                    [\n                        0,\n                        Math.PI / 2,\n                        0\n                    ]\n                ]\n            ],\n            XZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.15, 0.15, 0.01), matGreenTransparent),\n                    [\n                        0.15,\n                        0,\n                        0.15\n                    ],\n                    [\n                        -Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ],\n            XYZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.1, 0.1, 0.1), matWhiteTransparent.clone())\n                ]\n            ]\n        };\n        const pickerScale = {\n            X: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0.3,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        -Math.PI / 2\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        -0.3,\n                        0,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI / 2\n                    ]\n                ]\n            ],\n            Y: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0,\n                        0.3,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0,\n                        -0.3,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI\n                    ]\n                ]\n            ],\n            Z: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0,\n                        0,\n                        0.3\n                    ],\n                    [\n                        Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ],\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.CylinderGeometry)(0.2, 0, 0.6, 4), matInvisible),\n                    [\n                        0,\n                        0,\n                        -0.3\n                    ],\n                    [\n                        -Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ],\n            XY: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.2, 0.2, 0.01), matInvisible),\n                    [\n                        0.15,\n                        0.15,\n                        0\n                    ]\n                ]\n            ],\n            YZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.2, 0.2, 0.01), matInvisible),\n                    [\n                        0,\n                        0.15,\n                        0.15\n                    ],\n                    [\n                        0,\n                        Math.PI / 2,\n                        0\n                    ]\n                ]\n            ],\n            XZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.2, 0.2, 0.01), matInvisible),\n                    [\n                        0.15,\n                        0,\n                        0.15\n                    ],\n                    [\n                        -Math.PI / 2,\n                        0,\n                        0\n                    ]\n                ]\n            ],\n            XYZ: [\n                [\n                    new (0, $jw0R5.Mesh)(new (0, $jw0R5.BoxGeometry)(0.2, 0.2, 0.2), matInvisible),\n                    [\n                        0,\n                        0,\n                        0\n                    ]\n                ]\n            ]\n        };\n        const helperScale = {\n            X: [\n                [\n                    new (0, $jw0R5.Line)(lineGeometry, matHelper.clone()),\n                    [\n                        -1000,\n                        0,\n                        0\n                    ],\n                    null,\n                    [\n                        1e6,\n                        1,\n                        1\n                    ],\n                    'helper'\n                ]\n            ],\n            Y: [\n                [\n                    new (0, $jw0R5.Line)(lineGeometry, matHelper.clone()),\n                    [\n                        0,\n                        -1000,\n                        0\n                    ],\n                    [\n                        0,\n                        0,\n                        Math.PI / 2\n                    ],\n                    [\n                        1e6,\n                        1,\n                        1\n                    ],\n                    'helper'\n                ]\n            ],\n            Z: [\n                [\n                    new (0, $jw0R5.Line)(lineGeometry, matHelper.clone()),\n                    [\n                        0,\n                        0,\n                        -1000\n                    ],\n                    [\n                        0,\n                        -Math.PI / 2,\n                        0\n                    ],\n                    [\n                        1e6,\n                        1,\n                        1\n                    ],\n                    'helper'\n                ]\n            ]\n        };\n        // Creates an Object3D with gizmos described in custom hierarchy definition.\n        function setupGizmo(gizmoMap) {\n            const gizmo = new (0, $jw0R5.Object3D)();\n            for(const name in gizmoMap)for(let i = gizmoMap[name].length; i--;){\n                const object = gizmoMap[name][i][0].clone();\n                const position = gizmoMap[name][i][1];\n                const rotation = gizmoMap[name][i][2];\n                const scale = gizmoMap[name][i][3];\n                const tag = gizmoMap[name][i][4];\n                // name and tag properties are essential for picking and updating logic.\n                object.name = name;\n                object.tag = tag;\n                if (position) object.position.set(position[0], position[1], position[2]);\n                if (rotation) object.rotation.set(rotation[0], rotation[1], rotation[2]);\n                if (scale) object.scale.set(scale[0], scale[1], scale[2]);\n                object.updateMatrix();\n                const tempGeometry = object.geometry.clone();\n                tempGeometry.applyMatrix4(object.matrix);\n                object.geometry = tempGeometry;\n                object.renderOrder = Infinity;\n                object.position.set(0, 0, 0);\n                object.rotation.set(0, 0, 0);\n                object.scale.set(1, 1, 1);\n                gizmo.add(object);\n            }\n            return gizmo;\n        }\n        // Gizmo creation\n        this.gizmo = {};\n        this.picker = {};\n        this.helper = {};\n        this.add(this.gizmo['translate'] = setupGizmo(gizmoTranslate));\n        this.add(this.gizmo['rotate'] = setupGizmo(gizmoRotate));\n        this.add(this.gizmo['scale'] = setupGizmo(gizmoScale));\n        this.add(this.picker['translate'] = setupGizmo(pickerTranslate));\n        this.add(this.picker['rotate'] = setupGizmo(pickerRotate));\n        this.add(this.picker['scale'] = setupGizmo(pickerScale));\n        this.add(this.helper['translate'] = setupGizmo(helperTranslate));\n        this.add(this.helper['rotate'] = setupGizmo(helperRotate));\n        this.add(this.helper['scale'] = setupGizmo(helperScale));\n        // Pickers should be hidden always\n        this.picker['translate'].visible = false;\n        this.picker['rotate'].visible = false;\n        this.picker['scale'].visible = false;\n    }\n    // updateMatrixWorld will update transformations and appearance of individual handles\n    updateMatrixWorld(force) {\n        const space = this.mode === 'scale' ? 'local' : this.space; // scale always oriented to local rotation\n        const quaternion = space === 'local' ? this.worldQuaternion : $fa0b52e175c5eff4$var$_identityQuaternion;\n        // Show only gizmos for current transform mode\n        this.gizmo['translate'].visible = this.mode === 'translate';\n        this.gizmo['rotate'].visible = this.mode === 'rotate';\n        this.gizmo['scale'].visible = this.mode === 'scale';\n        this.helper['translate'].visible = this.mode === 'translate';\n        this.helper['rotate'].visible = this.mode === 'rotate';\n        this.helper['scale'].visible = this.mode === 'scale';\n        let handles = [];\n        handles = handles.concat(this.picker[this.mode].children);\n        handles = handles.concat(this.gizmo[this.mode].children);\n        handles = handles.concat(this.helper[this.mode].children);\n        for(let i = 0; i < handles.length; i++){\n            const handle = handles[i];\n            // hide aligned to camera\n            handle.visible = true;\n            handle.rotation.set(0, 0, 0);\n            handle.position.copy(this.worldPosition);\n            let factor;\n            if (this.camera.isOrthographicCamera) factor = (this.camera.top - this.camera.bottom) / this.camera.zoom;\n            else factor = this.worldPosition.distanceTo(this.cameraPosition) * Math.min(1.9 * Math.tan(Math.PI * this.camera.fov / 360) / this.camera.zoom, 7);\n            handle.scale.set(1, 1, 1).multiplyScalar(factor * this.size / 4);\n            // TODO: simplify helpers and consider decoupling from gizmo\n            if (handle.tag === 'helper') {\n                handle.visible = false;\n                if (handle.name === 'AXIS') {\n                    handle.visible = !!this.axis;\n                    if (this.axis === 'X') {\n                        $fa0b52e175c5eff4$var$_tempQuaternion.setFromEuler($fa0b52e175c5eff4$var$_tempEuler.set(0, 0, 0));\n                        handle.quaternion.copy(quaternion).multiply($fa0b52e175c5eff4$var$_tempQuaternion);\n                        if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitX).applyQuaternion(quaternion).dot(this.eye)) > 0.9) handle.visible = false;\n                    }\n                    if (this.axis === 'Y') {\n                        $fa0b52e175c5eff4$var$_tempQuaternion.setFromEuler($fa0b52e175c5eff4$var$_tempEuler.set(0, 0, Math.PI / 2));\n                        handle.quaternion.copy(quaternion).multiply($fa0b52e175c5eff4$var$_tempQuaternion);\n                        if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitY).applyQuaternion(quaternion).dot(this.eye)) > 0.9) handle.visible = false;\n                    }\n                    if (this.axis === 'Z') {\n                        $fa0b52e175c5eff4$var$_tempQuaternion.setFromEuler($fa0b52e175c5eff4$var$_tempEuler.set(0, Math.PI / 2, 0));\n                        handle.quaternion.copy(quaternion).multiply($fa0b52e175c5eff4$var$_tempQuaternion);\n                        if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitZ).applyQuaternion(quaternion).dot(this.eye)) > 0.9) handle.visible = false;\n                    }\n                    if (this.axis === 'XYZE') {\n                        $fa0b52e175c5eff4$var$_tempQuaternion.setFromEuler($fa0b52e175c5eff4$var$_tempEuler.set(0, Math.PI / 2, 0));\n                        $fa0b52e175c5eff4$var$_alignVector.copy(this.rotationAxis);\n                        handle.quaternion.setFromRotationMatrix($fa0b52e175c5eff4$var$_lookAtMatrix.lookAt($fa0b52e175c5eff4$var$_zeroVector, $fa0b52e175c5eff4$var$_alignVector, $fa0b52e175c5eff4$var$_unitY));\n                        handle.quaternion.multiply($fa0b52e175c5eff4$var$_tempQuaternion);\n                        handle.visible = this.dragging;\n                    }\n                    if (this.axis === 'E') handle.visible = false;\n                } else if (handle.name === 'START') {\n                    handle.position.copy(this.worldPositionStart);\n                    handle.visible = this.dragging;\n                } else if (handle.name === 'END') {\n                    handle.position.copy(this.worldPosition);\n                    handle.visible = this.dragging;\n                } else if (handle.name === 'DELTA') {\n                    handle.position.copy(this.worldPositionStart);\n                    handle.quaternion.copy(this.worldQuaternionStart);\n                    $fa0b52e175c5eff4$var$_tempVector.set(1e-10, 1e-10, 1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1);\n                    $fa0b52e175c5eff4$var$_tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert());\n                    handle.scale.copy($fa0b52e175c5eff4$var$_tempVector);\n                    handle.visible = this.dragging;\n                } else {\n                    handle.quaternion.copy(quaternion);\n                    if (this.dragging) handle.position.copy(this.worldPositionStart);\n                    else handle.position.copy(this.worldPosition);\n                    if (this.axis) handle.visible = this.axis.search(handle.name) !== -1;\n                }\n                continue;\n            }\n            // Align handles to current local or world rotation\n            handle.quaternion.copy(quaternion);\n            if (this.mode === 'translate' || this.mode === 'scale') {\n                // Hide translate and scale axis facing the camera\n                const AXIS_HIDE_THRESHOLD = 0.99;\n                const PLANE_HIDE_THRESHOLD = 0.2;\n                if (handle.name === 'X') {\n                    if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitX).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_THRESHOLD) {\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n                    }\n                }\n                if (handle.name === 'Y') {\n                    if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitY).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_THRESHOLD) {\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n                    }\n                }\n                if (handle.name === 'Z') {\n                    if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitZ).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_THRESHOLD) {\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n                    }\n                }\n                if (handle.name === 'XY') {\n                    if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitZ).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_THRESHOLD) {\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n                    }\n                }\n                if (handle.name === 'YZ') {\n                    if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitX).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_THRESHOLD) {\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n                    }\n                }\n                if (handle.name === 'XZ') {\n                    if (Math.abs($fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_unitY).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_THRESHOLD) {\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n                    }\n                }\n            } else if (this.mode === 'rotate') {\n                // Align handles to current local or world rotation\n                $fa0b52e175c5eff4$var$_tempQuaternion2.copy(quaternion);\n                $fa0b52e175c5eff4$var$_alignVector.copy(this.eye).applyQuaternion($fa0b52e175c5eff4$var$_tempQuaternion.copy(quaternion).invert());\n                if (handle.name.search('E') !== -1) handle.quaternion.setFromRotationMatrix($fa0b52e175c5eff4$var$_lookAtMatrix.lookAt(this.eye, $fa0b52e175c5eff4$var$_zeroVector, $fa0b52e175c5eff4$var$_unitY));\n                if (handle.name === 'X') {\n                    $fa0b52e175c5eff4$var$_tempQuaternion.setFromAxisAngle($fa0b52e175c5eff4$var$_unitX, Math.atan2(-$fa0b52e175c5eff4$var$_alignVector.y, $fa0b52e175c5eff4$var$_alignVector.z));\n                    $fa0b52e175c5eff4$var$_tempQuaternion.multiplyQuaternions($fa0b52e175c5eff4$var$_tempQuaternion2, $fa0b52e175c5eff4$var$_tempQuaternion);\n                    handle.quaternion.copy($fa0b52e175c5eff4$var$_tempQuaternion);\n                }\n                if (handle.name === 'Y') {\n                    $fa0b52e175c5eff4$var$_tempQuaternion.setFromAxisAngle($fa0b52e175c5eff4$var$_unitY, Math.atan2($fa0b52e175c5eff4$var$_alignVector.x, $fa0b52e175c5eff4$var$_alignVector.z));\n                    $fa0b52e175c5eff4$var$_tempQuaternion.multiplyQuaternions($fa0b52e175c5eff4$var$_tempQuaternion2, $fa0b52e175c5eff4$var$_tempQuaternion);\n                    handle.quaternion.copy($fa0b52e175c5eff4$var$_tempQuaternion);\n                }\n                if (handle.name === 'Z') {\n                    $fa0b52e175c5eff4$var$_tempQuaternion.setFromAxisAngle($fa0b52e175c5eff4$var$_unitZ, Math.atan2($fa0b52e175c5eff4$var$_alignVector.y, $fa0b52e175c5eff4$var$_alignVector.x));\n                    $fa0b52e175c5eff4$var$_tempQuaternion.multiplyQuaternions($fa0b52e175c5eff4$var$_tempQuaternion2, $fa0b52e175c5eff4$var$_tempQuaternion);\n                    handle.quaternion.copy($fa0b52e175c5eff4$var$_tempQuaternion);\n                }\n            }\n            // Hide disabled axes\n            handle.visible = handle.visible && (handle.name.indexOf('X') === -1 || this.showX);\n            handle.visible = handle.visible && (handle.name.indexOf('Y') === -1 || this.showY);\n            handle.visible = handle.visible && (handle.name.indexOf('Z') === -1 || this.showZ);\n            handle.visible = handle.visible && (handle.name.indexOf('E') === -1 || this.showX && this.showY && this.showZ);\n            // highlight selected axis\n            handle.material._color = handle.material._color || handle.material.color.clone();\n            handle.material._opacity = handle.material._opacity || handle.material.opacity;\n            handle.material.color.copy(handle.material._color);\n            handle.material.opacity = handle.material._opacity;\n            if (this.enabled && this.axis) {\n                if (handle.name === this.axis) {\n                    handle.material.color.setHex(0xffff00);\n                    handle.material.opacity = 1.0;\n                } else if (this.axis.split('').some(function(a) {\n                    return handle.name === a;\n                })) {\n                    handle.material.color.setHex(0xffff00);\n                    handle.material.opacity = 1.0;\n                }\n            }\n        }\n        super.updateMatrixWorld(force);\n    }\n}\n//\nclass $fa0b52e175c5eff4$export$c0ab73045548e2ca extends (0, $jw0R5.Mesh) {\n    constructor(){\n        super(new (0, $jw0R5.PlaneGeometry)(100000, 100000, 2, 2), new (0, $jw0R5.MeshBasicMaterial)({\n            visible: false,\n            wireframe: true,\n            side: (0, $jw0R5.DoubleSide),\n            transparent: true,\n            opacity: 0.1,\n            toneMapped: false\n        }));\n        this.isTransformControlsPlane = true;\n        this.type = 'TransformControlsPlane';\n    }\n    updateMatrixWorld(force) {\n        let space = this.space;\n        this.position.copy(this.worldPosition);\n        if (this.mode === 'scale') space = 'local'; // scale always oriented to local rotation\n        $fa0b52e175c5eff4$var$_v1.copy($fa0b52e175c5eff4$var$_unitX).applyQuaternion(space === 'local' ? this.worldQuaternion : $fa0b52e175c5eff4$var$_identityQuaternion);\n        $fa0b52e175c5eff4$var$_v2.copy($fa0b52e175c5eff4$var$_unitY).applyQuaternion(space === 'local' ? this.worldQuaternion : $fa0b52e175c5eff4$var$_identityQuaternion);\n        $fa0b52e175c5eff4$var$_v3.copy($fa0b52e175c5eff4$var$_unitZ).applyQuaternion(space === 'local' ? this.worldQuaternion : $fa0b52e175c5eff4$var$_identityQuaternion);\n        // Align the plane for current transform mode, axis and space.\n        $fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_v2);\n        switch(this.mode){\n            case 'translate':\n            case 'scale':\n                switch(this.axis){\n                    case 'X':\n                        $fa0b52e175c5eff4$var$_alignVector.copy(this.eye).cross($fa0b52e175c5eff4$var$_v1);\n                        $fa0b52e175c5eff4$var$_dirVector.copy($fa0b52e175c5eff4$var$_v1).cross($fa0b52e175c5eff4$var$_alignVector);\n                        break;\n                    case 'Y':\n                        $fa0b52e175c5eff4$var$_alignVector.copy(this.eye).cross($fa0b52e175c5eff4$var$_v2);\n                        $fa0b52e175c5eff4$var$_dirVector.copy($fa0b52e175c5eff4$var$_v2).cross($fa0b52e175c5eff4$var$_alignVector);\n                        break;\n                    case 'Z':\n                        $fa0b52e175c5eff4$var$_alignVector.copy(this.eye).cross($fa0b52e175c5eff4$var$_v3);\n                        $fa0b52e175c5eff4$var$_dirVector.copy($fa0b52e175c5eff4$var$_v3).cross($fa0b52e175c5eff4$var$_alignVector);\n                        break;\n                    case 'XY':\n                        $fa0b52e175c5eff4$var$_dirVector.copy($fa0b52e175c5eff4$var$_v3);\n                        break;\n                    case 'YZ':\n                        $fa0b52e175c5eff4$var$_dirVector.copy($fa0b52e175c5eff4$var$_v1);\n                        break;\n                    case 'XZ':\n                        $fa0b52e175c5eff4$var$_alignVector.copy($fa0b52e175c5eff4$var$_v3);\n                        $fa0b52e175c5eff4$var$_dirVector.copy($fa0b52e175c5eff4$var$_v2);\n                        break;\n                    case 'XYZ':\n                    case 'E':\n                        $fa0b52e175c5eff4$var$_dirVector.set(0, 0, 0);\n                        break;\n                }\n                break;\n            case 'rotate':\n            default:\n                // special case for rotate\n                $fa0b52e175c5eff4$var$_dirVector.set(0, 0, 0);\n        }\n        if ($fa0b52e175c5eff4$var$_dirVector.length() === 0) // If in rotate mode, make the plane parallel to camera\n        this.quaternion.copy(this.cameraQuaternion);\n        else {\n            $fa0b52e175c5eff4$var$_tempMatrix.lookAt($fa0b52e175c5eff4$var$_tempVector.set(0, 0, 0), $fa0b52e175c5eff4$var$_dirVector, $fa0b52e175c5eff4$var$_alignVector);\n            this.quaternion.setFromRotationMatrix($fa0b52e175c5eff4$var$_tempMatrix);\n        }\n        super.updateMatrixWorld(force);\n    }\n}\n\n\n\nvar $7DqNw = parcelRequire(\"7DqNw\");\n\nvar $2Tb7o = parcelRequire(\"2Tb7o\");\nconst $274d75840cd7f1fc$var$assetUrl = (0, $2Tb7o.getAssetURL)();\nconst $274d75840cd7f1fc$var$modelUrl = $274d75840cd7f1fc$var$assetUrl + \"models/collision-world.glb\";\nlet $274d75840cd7f1fc$var$camera, $274d75840cd7f1fc$var$scene, $274d75840cd7f1fc$var$renderer, $274d75840cd7f1fc$var$controls, $274d75840cd7f1fc$var$raycaster, $274d75840cd7f1fc$var$transformControl;\nlet $274d75840cd7f1fc$var$previewCamera;\nlet $274d75840cd7f1fc$var$previewCameraHelper;\n/* defines */ const $274d75840cd7f1fc$var$BG_COLOR = 0x333333;\n/* global variables */ // for collision world\nlet $274d75840cd7f1fc$var$points = [\n    new $jw0R5.Vector3(13.656463381771713, 14.283809732883363, -7.668193169056049),\n    new $jw0R5.Vector3(0.9998577232602041, 5.256311262739087, 3.9526593933678797),\n    new $jw0R5.Vector3(5.003802510959054, -0.6844364277972178, 11.729153299298071),\n    new $jw0R5.Vector3(-2.0803289556393207, -0.36919658334801253, 10.97966816333047)\n];\nlet $274d75840cd7f1fc$var$splinePoints = [];\nlet $274d75840cd7f1fc$var$clipSplinePoints = [];\nlet $274d75840cd7f1fc$var$splines = {};\nlet $274d75840cd7f1fc$var$arcSegments = 200;\nlet $274d75840cd7f1fc$var$tension = 0.5;\nlet $274d75840cd7f1fc$var$pointer = new $jw0R5.Vector2();\nlet $274d75840cd7f1fc$var$windwoWidth = window.innerWidth;\nlet $274d75840cd7f1fc$var$windowHeight = window.innerHeight;\nlet $274d75840cd7f1fc$var$animationId;\nlet $274d75840cd7f1fc$var$animationTask;\nlet $274d75840cd7f1fc$var$isAnimating = false;\nconst $274d75840cd7f1fc$var$dimension = {\n    center: new $jw0R5.Vector3(),\n    min: new $jw0R5.Vector3(),\n    max: new $jw0R5.Vector3()\n};\nconst $274d75840cd7f1fc$var$controlGroup = new $jw0R5.Group();\nconst $274d75840cd7f1fc$var$cubeScale = .5;\nconst $274d75840cd7f1fc$var$controlGeometry = new $jw0R5.BoxGeometry($274d75840cd7f1fc$var$cubeScale, $274d75840cd7f1fc$var$cubeScale, $274d75840cd7f1fc$var$cubeScale);\nconst $274d75840cd7f1fc$var$controlMaterial = new $jw0R5.MeshLambertMaterial({\n    color: Math.random() * 0xffffff\n});\nlet $274d75840cd7f1fc$var$progressController;\nconst $274d75840cd7f1fc$var$folders = {};\nconst $274d75840cd7f1fc$var$params = {\n    // spline options \n    showCurve: true,\n    tension: $274d75840cd7f1fc$var$tension,\n    arcSegments: $274d75840cd7f1fc$var$arcSegments,\n    curveType: 'uniform',\n    // preview camera\n    showHelper: true,\n    aspect: $274d75840cd7f1fc$var$windwoWidth / $274d75840cd7f1fc$var$windowHeight,\n    near: 1,\n    far: 50,\n    fov: 20,\n    // edit options\n    addPoint: $274d75840cd7f1fc$var$addPoint,\n    removePoint: $274d75840cd7f1fc$var$removePoint,\n    exportSpline: $274d75840cd7f1fc$var$exportSpline,\n    // animation options\n    easing: 'Linear',\n    easingType: 'In',\n    stride: 0.001,\n    play: $274d75840cd7f1fc$var$play,\n    pause: false,\n    reset: $274d75840cd7f1fc$var$reset,\n    progress: 0,\n    // preview viewport\n    scale: 0.33,\n    top: 0,\n    left: 0,\n    clearColor: 0x666666\n};\n$274d75840cd7f1fc$var$init();\nfunction $274d75840cd7f1fc$var$init() {\n    $274d75840cd7f1fc$var$renderer = new $jw0R5.WebGLRenderer({\n        antialias: false\n    });\n    $274d75840cd7f1fc$var$renderer.setPixelRatio(window.devicePixelRatio);\n    $274d75840cd7f1fc$var$renderer.setSize($274d75840cd7f1fc$var$windwoWidth, $274d75840cd7f1fc$var$windowHeight);\n    $274d75840cd7f1fc$var$renderer.setClearColor($274d75840cd7f1fc$var$BG_COLOR, 1);\n    document.body.appendChild($274d75840cd7f1fc$var$renderer.domElement);\n    $274d75840cd7f1fc$var$scene = new $jw0R5.Scene();\n    $274d75840cd7f1fc$var$scene.add(new $jw0R5.AmbientLight(0xf0f0f0, 3));\n    $274d75840cd7f1fc$var$scene.add($274d75840cd7f1fc$var$controlGroup);\n    $274d75840cd7f1fc$var$camera = new $jw0R5.PerspectiveCamera(70, $274d75840cd7f1fc$var$windwoWidth / $274d75840cd7f1fc$var$windowHeight, 1, 1000);\n    const { aspect: aspect, near: near, far: far, fov: fov, showHelper: showHelper } = $274d75840cd7f1fc$var$params;\n    $274d75840cd7f1fc$var$previewCamera = new $jw0R5.PerspectiveCamera(fov, aspect, near, far);\n    $274d75840cd7f1fc$var$previewCameraHelper = new $jw0R5.CameraHelper($274d75840cd7f1fc$var$previewCamera);\n    $274d75840cd7f1fc$var$previewCameraHelper.visible = showHelper;\n    $274d75840cd7f1fc$var$scene.add($274d75840cd7f1fc$var$camera);\n    $274d75840cd7f1fc$var$scene.add($274d75840cd7f1fc$var$previewCamera);\n    $274d75840cd7f1fc$var$scene.add($274d75840cd7f1fc$var$previewCameraHelper);\n    $274d75840cd7f1fc$var$controls = new (0, $2sw9m.OrbitControls)($274d75840cd7f1fc$var$camera, $274d75840cd7f1fc$var$renderer.domElement);\n    $274d75840cd7f1fc$var$raycaster = new $jw0R5.Raycaster();\n    $274d75840cd7f1fc$var$transformControl = new (0, $fa0b52e175c5eff4$export$198e80c116632110)($274d75840cd7f1fc$var$camera, $274d75840cd7f1fc$var$renderer.domElement);\n    $274d75840cd7f1fc$var$scene.add($274d75840cd7f1fc$var$transformControl);\n    new (0, $ihXk0.GLTFLoader)().load($274d75840cd7f1fc$var$modelUrl, function(gltf) {\n        let model = gltf.scene;\n        $274d75840cd7f1fc$var$scene.add(model);\n        const box = new $jw0R5.Box3();\n        box.setFromObject(model);\n        const size = box.getSize(new $jw0R5.Vector3());\n        const center = box.getCenter($274d75840cd7f1fc$var$controls.target);\n        $274d75840cd7f1fc$var$dimension.min = box.min;\n        $274d75840cd7f1fc$var$dimension.max = box.max;\n        $274d75840cd7f1fc$var$dimension.center = center;\n        $274d75840cd7f1fc$var$dimension.size = size;\n        $274d75840cd7f1fc$var$camera.position.x = center.x - size.x / 2;\n        $274d75840cd7f1fc$var$camera.position.y = 2 * size.y;\n        $274d75840cd7f1fc$var$camera.position.z = center.z - size.z / 2;\n        $274d75840cd7f1fc$var$camera.updateProjectionMatrix();\n        $274d75840cd7f1fc$var$controls.update();\n        // illuminate the scene for better view\n        const light = new $jw0R5.SpotLight(0xffffff, 4.5);\n        light.position.set(center.x, 50 * center.y, center.z);\n        light.lookAt(center.x, center.y, center.z);\n        light.angle = Math.PI * 0.2;\n        light.decay = 0;\n        light.castShadow = true;\n        light.shadow.camera.near = 200;\n        light.shadow.camera.far = 2000;\n        light.shadow.bias = -0.000222;\n        light.shadow.mapSize.width = 1024;\n        light.shadow.mapSize.height = 1024;\n        $274d75840cd7f1fc$var$scene.add(light);\n        /* generate control objects */ {\n            // randomly generate points\n            if ($274d75840cd7f1fc$var$points.length == 0) {\n                $274d75840cd7f1fc$var$points.length = 0;\n                const { center: center, min: min, max: max, size: size } = $274d75840cd7f1fc$var$dimension;\n                for(let i = 0; i < 3; ++i){\n                    const point = new $jw0R5.Vector3(Math.random() * size.x + min.x, Math.random() * size.y + center.y, Math.random() * size.z + min.z);\n                    $274d75840cd7f1fc$var$points.push(point);\n                }\n            }\n            // make sure cubes being added first\n            for (let point of $274d75840cd7f1fc$var$points)$274d75840cd7f1fc$var$addControlMesh(point);\n            // reset preview camera\n            $274d75840cd7f1fc$var$setPreviewCamera();\n            // set positions reference so that points don't need to manually overwrite\n            const meshes = $274d75840cd7f1fc$var$controlGroup.children;\n            const length = meshes.length;\n            $274d75840cd7f1fc$var$points.length = 0;\n            for(let i = 0; i < length; ++i)$274d75840cd7f1fc$var$points[i] = meshes[i].position;\n            // then adding curves\n            const geometry = new $jw0R5.BufferGeometry();\n            geometry.setAttribute('position', new $jw0R5.BufferAttribute(new Float32Array($274d75840cd7f1fc$var$arcSegments * 3), 3));\n            let curve = new $jw0R5.CatmullRomCurve3($274d75840cd7f1fc$var$points);\n            curve.curveType = 'catmullrom';\n            curve.mesh = new $jw0R5.Line(geometry.clone(), new $jw0R5.LineBasicMaterial({\n                color: 0xff0000,\n                opacity: 0.35\n            }));\n            curve.mesh.castShadow = true;\n            $274d75840cd7f1fc$var$splines.uniform = curve;\n            curve = new $jw0R5.CatmullRomCurve3($274d75840cd7f1fc$var$points);\n            curve.curveType = 'centripetal';\n            curve.mesh = new $jw0R5.Line(geometry.clone(), new $jw0R5.LineBasicMaterial({\n                color: 0x00ff00,\n                opacity: 0.35\n            }));\n            curve.mesh.castShadow = true;\n            $274d75840cd7f1fc$var$splines.centripetal = curve;\n            curve = new $jw0R5.CatmullRomCurve3($274d75840cd7f1fc$var$points);\n            curve.curveType = 'chordal';\n            curve.mesh = new $jw0R5.Line(geometry.clone(), new $jw0R5.LineBasicMaterial({\n                color: 0x0000ff,\n                opacity: 0.35\n            }));\n            curve.mesh.castShadow = true;\n            $274d75840cd7f1fc$var$splines.chordal = curve;\n            for(const k in $274d75840cd7f1fc$var$splines){\n                const spline = $274d75840cd7f1fc$var$splines[k];\n                $274d75840cd7f1fc$var$scene.add(spline.mesh);\n            }\n            $274d75840cd7f1fc$var$clipSplinePoints = $274d75840cd7f1fc$var$clipProgress();\n            // use splines to update positions of curve meshes\n            $274d75840cd7f1fc$var$updateSplineMesh();\n            $274d75840cd7f1fc$var$render();\n        }\n    }, function(xhr) {\n    // console.log( (xhr.loaded / xhr.total * 100) + '% loaded');\n    }, function(error) {\n        console.log(error);\n    });\n    /* handle gui*/ {\n        const gui = new (0, $7DqNw.GUI)();\n        const splineFolder = gui.addFolder('Spline');\n        splineFolder.add($274d75840cd7f1fc$var$params, 'showCurve').onChange((v)=>{\n            for(const k in $274d75840cd7f1fc$var$splines){\n                const spline = $274d75840cd7f1fc$var$splines[k];\n                spline.mesh.visible = v;\n            }\n            $274d75840cd7f1fc$var$render();\n        });\n        splineFolder.add($274d75840cd7f1fc$var$params, 'curveType', [\n            'centripetal',\n            'uniform',\n            'chordal'\n        ]).onChange($274d75840cd7f1fc$var$render);\n        splineFolder.add($274d75840cd7f1fc$var$params, 'tension', 0, 1).step(0.01).onChange((value)=>{\n            for(const k in $274d75840cd7f1fc$var$splines){\n                const spline = $274d75840cd7f1fc$var$splines[k];\n                spline.tension = value;\n            }\n            $274d75840cd7f1fc$var$updateSplineMesh();\n            $274d75840cd7f1fc$var$render();\n        });\n        splineFolder.add($274d75840cd7f1fc$var$params, 'arcSegments', 100, 5000).step(100).onChange((value)=>{\n            for(const k in $274d75840cd7f1fc$var$splines){\n                const spline = $274d75840cd7f1fc$var$splines[k];\n                spline.arcLengthDivisions = value;\n            }\n            $274d75840cd7f1fc$var$updateSplineMesh();\n            $274d75840cd7f1fc$var$render();\n            $274d75840cd7f1fc$var$arcSegments = value;\n        });\n        $274d75840cd7f1fc$var$folders.splineFolder = splineFolder;\n        const helperFolder = gui.addFolder('Camera Helper');\n        helperFolder.add($274d75840cd7f1fc$var$params, 'showHelper').onChange((v)=>{\n            $274d75840cd7f1fc$var$controlGroup.traverse((cube)=>{\n                cube.visible = v;\n            });\n            $274d75840cd7f1fc$var$setPreviewCamera();\n            $274d75840cd7f1fc$var$render();\n        });\n        helperFolder.add($274d75840cd7f1fc$var$params, 'aspect', 1, 10).step(0.1).onChange((v)=>{\n            $274d75840cd7f1fc$var$setPreviewCamera();\n            $274d75840cd7f1fc$var$render();\n        });\n        helperFolder.add($274d75840cd7f1fc$var$params, 'fov', 0, 180).step(1).onChange((v)=>{\n            $274d75840cd7f1fc$var$setPreviewCamera();\n            $274d75840cd7f1fc$var$render();\n        });\n        helperFolder.add($274d75840cd7f1fc$var$params, 'near', 1, 200).step(1).onChange((v)=>{\n            $274d75840cd7f1fc$var$setPreviewCamera();\n            $274d75840cd7f1fc$var$render();\n        });\n        helperFolder.add($274d75840cd7f1fc$var$params, 'far', 500, 2000).step(1).onChange((v)=>{\n            $274d75840cd7f1fc$var$setPreviewCamera();\n            $274d75840cd7f1fc$var$render();\n        });\n        $274d75840cd7f1fc$var$folders.helperFolder = helperFolder;\n        const editFolder = gui.addFolder('Edit');\n        editFolder.add($274d75840cd7f1fc$var$params, 'addPoint');\n        editFolder.add($274d75840cd7f1fc$var$params, 'removePoint');\n        editFolder.add($274d75840cd7f1fc$var$params, 'exportSpline');\n        $274d75840cd7f1fc$var$folders.editFolder = editFolder;\n        const animationFolder = gui.addFolder('Animation');\n        const easings = [];\n        for(let e in $cPutt.Easing)easings.push(e);\n        animationFolder.add($274d75840cd7f1fc$var$params, 'easing', easings);\n        animationFolder.add($274d75840cd7f1fc$var$params, 'easingType', [\n            'In',\n            'InOut',\n            'Out'\n        ]);\n        animationFolder.add($274d75840cd7f1fc$var$params, 'stride', 0.001, 0.1).step(0.0001);\n        animationFolder.add($274d75840cd7f1fc$var$params, 'play');\n        animationFolder.add($274d75840cd7f1fc$var$params, 'pause');\n        animationFolder.add($274d75840cd7f1fc$var$params, 'reset');\n        // clip animation\n        animationFolder.add($274d75840cd7f1fc$var$params, 'progress', 0, 1).step(0.01).onChange((v)=>{\n            $274d75840cd7f1fc$var$clipSplinePoints = $274d75840cd7f1fc$var$clipProgress();\n            $274d75840cd7f1fc$var$setPreviewCamera(3);\n            $274d75840cd7f1fc$var$render();\n        });\n        $274d75840cd7f1fc$var$folders.animationFolder = animationFolder;\n        const viewportFolder = gui.addFolder('Viewport');\n        viewportFolder.add($274d75840cd7f1fc$var$params, 'scale', 0.1, 0.5).step(0.01).onChange((v)=>{\n            $274d75840cd7f1fc$var$render();\n        });\n        viewportFolder.add($274d75840cd7f1fc$var$params, 'top', 0, $274d75840cd7f1fc$var$windowHeight).step(10).onChange((v)=>{\n            $274d75840cd7f1fc$var$render();\n        });\n        viewportFolder.add($274d75840cd7f1fc$var$params, 'left', 0, $274d75840cd7f1fc$var$windwoWidth).step(10).onChange((v)=>{\n            $274d75840cd7f1fc$var$render();\n        });\n        viewportFolder.addColor($274d75840cd7f1fc$var$params, 'clearColor').onChange((v)=>{\n            $274d75840cd7f1fc$var$render();\n        });\n        $274d75840cd7f1fc$var$folders.viewportFolder = viewportFolder;\n        $274d75840cd7f1fc$var$progressController = $274d75840cd7f1fc$var$folders.animationFolder.children[6];\n        gui.open();\n    }\n    $274d75840cd7f1fc$var$transformControl.addEventListener('dragging-changed', (event)=>{\n        $274d75840cd7f1fc$var$controls.enabled = !event.value;\n    });\n    $274d75840cd7f1fc$var$transformControl.addEventListener('objectChange', (event)=>{\n        $274d75840cd7f1fc$var$clipSplinePoints = $274d75840cd7f1fc$var$clipProgress();\n        $274d75840cd7f1fc$var$updateSplineMesh();\n        if (!$274d75840cd7f1fc$var$isAnimating) $274d75840cd7f1fc$var$setPreviewCamera(3);\n    });\n    window.addEventListener('resize', ()=>{\n        $274d75840cd7f1fc$var$windwoWidth = window.innerWidth;\n        $274d75840cd7f1fc$var$windowHeight = window.innerHeight;\n        $274d75840cd7f1fc$var$renderer.setPixelRatio(window.devicePixelRatio);\n        $274d75840cd7f1fc$var$renderer.setSize($274d75840cd7f1fc$var$windwoWidth, $274d75840cd7f1fc$var$windowHeight);\n        const aspect = $274d75840cd7f1fc$var$windwoWidth / $274d75840cd7f1fc$var$windowHeight;\n        $274d75840cd7f1fc$var$camera.aspect = aspect;\n        $274d75840cd7f1fc$var$previewCamera.aspect = aspect;\n        $274d75840cd7f1fc$var$camera.updateProjectionMatrix();\n        $274d75840cd7f1fc$var$previewCamera.updateProjectionMatrix();\n        $274d75840cd7f1fc$var$previewCameraHelper.update();\n        $274d75840cd7f1fc$var$render();\n    });\n    // right click\n    window.addEventListener('contextmenu', (event)=>{\n        $274d75840cd7f1fc$var$raycaster.setFromCamera($274d75840cd7f1fc$var$pointer, $274d75840cd7f1fc$var$camera);\n        const gizmo = $274d75840cd7f1fc$var$transformControl.children[0];\n        const intersects = $274d75840cd7f1fc$var$raycaster.intersectObjects([\n            ...$274d75840cd7f1fc$var$controlGroup.children,\n            gizmo\n        ], false);\n        if (intersects.length == 0) $274d75840cd7f1fc$var$transformControl.detach();\n        $274d75840cd7f1fc$var$render();\n    });\n    window.addEventListener('mousewheel', ()=>{\n        $274d75840cd7f1fc$var$render();\n    });\n    window.addEventListener('mousemove', (event)=>{\n        $274d75840cd7f1fc$var$pointer.x = event.clientX / $274d75840cd7f1fc$var$windwoWidth * 2 - 1;\n        $274d75840cd7f1fc$var$pointer.y = -(event.clientY / $274d75840cd7f1fc$var$windowHeight) * 2 + 1;\n        $274d75840cd7f1fc$var$raycaster.setFromCamera($274d75840cd7f1fc$var$pointer, $274d75840cd7f1fc$var$camera);\n        const intersects = $274d75840cd7f1fc$var$raycaster.intersectObjects($274d75840cd7f1fc$var$controlGroup.children, false);\n        if (intersects.length > 0) {\n            const object = intersects[0].object;\n            if ($274d75840cd7f1fc$var$transformControl.dragging) return;\n            if (object !== $274d75840cd7f1fc$var$transformControl.object) $274d75840cd7f1fc$var$transformControl.attach(object);\n        }\n        $274d75840cd7f1fc$var$render();\n    });\n}\n/* utils */ // generate new point and add to points\nfunction $274d75840cd7f1fc$var$addPoint() {\n    const { size: size, center: center, min: min, max: max } = $274d75840cd7f1fc$var$dimension;\n    const randomPoint = new $jw0R5.Vector3(Math.random() * size.x + min.x, Math.random() * size.y + center.y, Math.random() * size.z + min.z);\n    $274d75840cd7f1fc$var$addControlMesh(randomPoint, (cube, nextPointIndex)=>{\n        // set positions reference so that points don't need to manually overwrite\n        $274d75840cd7f1fc$var$points.push(cube.position);\n    });\n    $274d75840cd7f1fc$var$clipSplinePoints = $274d75840cd7f1fc$var$clipProgress();\n    $274d75840cd7f1fc$var$updateSplineMesh();\n    $274d75840cd7f1fc$var$render();\n}\n// remove point from points\nfunction $274d75840cd7f1fc$var$removePoint() {\n    if ($274d75840cd7f1fc$var$points.length <= 3) {\n        alert(\"Can't not remove from points less than 3.\");\n        return;\n    }\n    const cubes = $274d75840cd7f1fc$var$controlGroup.children;\n    $274d75840cd7f1fc$var$points.pop();\n    const cube = cubes.pop();\n    // a proper way to determine if is the same object\n    if ($274d75840cd7f1fc$var$transformControl.object && cube.uuid === $274d75840cd7f1fc$var$transformControl.object.uuid) $274d75840cd7f1fc$var$transformControl.detach();\n    cube.dispose && cube.dispose();\n    // set helper to last - 1\n    $274d75840cd7f1fc$var$setPreviewCamera(2, $274d75840cd7f1fc$var$points.length - 2);\n    $274d75840cd7f1fc$var$clipSplinePoints = $274d75840cd7f1fc$var$clipProgress();\n    $274d75840cd7f1fc$var$updateSplineMesh();\n    $274d75840cd7f1fc$var$render();\n}\n// update splines meshes already exist\nfunction $274d75840cd7f1fc$var$updateSplineMesh() {\n    const point = new $jw0R5.Vector3();\n    const newSegments = $274d75840cd7f1fc$var$params.arcSegments;\n    const updateBuffer = $274d75840cd7f1fc$var$arcSegments != newSegments;\n    for(const k in $274d75840cd7f1fc$var$splines){\n        const spline = $274d75840cd7f1fc$var$splines[k];\n        const splineMesh = spline.mesh;\n        const geometry = splineMesh.geometry;\n        let position = geometry.attributes.position;\n        if (updateBuffer) {\n            geometry.setAttribute('position', new $jw0R5.BufferAttribute(new Float32Array(newSegments * 3), 3));\n            // a must do step: new buffer is replaced, change BufferAttribute reference\n            position = geometry.attributes.position;\n        }\n        for(let i = 0; i < newSegments; i++){\n            const t = i / (newSegments - 1);\n            spline.getPoint(t, point);\n            position.setXYZ(i, point.x, point.y, point.z);\n        }\n        // update buffer in next frame\n        position.needsUpdate = true;\n    }\n}\n// add control cube by a new position\nfunction $274d75840cd7f1fc$var$addControlMesh(point, callback) {\n    const nextPointIndex = $274d75840cd7f1fc$var$points.length;\n    const cube = new $jw0R5.Mesh($274d75840cd7f1fc$var$controlGeometry, $274d75840cd7f1fc$var$controlMaterial);\n    cube.position.setX(point.x);\n    cube.position.setY(point.y);\n    cube.position.setZ(point.z);\n    cube.castShadow = true;\n    cube.receiveShadow = true;\n    $274d75840cd7f1fc$var$controlGroup.add(cube);\n    callback && callback(cube, nextPointIndex);\n}\nfunction $274d75840cd7f1fc$var$exportSpline() {\n    const strplace = [];\n    const objects = $274d75840cd7f1fc$var$controlGroup.children;\n    const length = objects.length;\n    for(let i = 0; i < length; i++){\n        const p = objects[i].position;\n        strplace.push(`new THREE.Vector3(${p.x}, ${p.y}, ${p.z})`);\n    }\n    console.log(strplace.join(',\\n'));\n    const code = '[' + strplace.join(',\\n\\t') + ']';\n    prompt('copy and paste code', code);\n}\n// viewports\nfunction $274d75840cd7f1fc$var$getViewports() {\n    const { clearColor: clearColor, scale: scale, top: top, left: left } = $274d75840cd7f1fc$var$params;\n    // left and top is relative to the leftTop corner while webgl is from leftBottom\n    return [\n        {\n            name: \"main\",\n            camera: $274d75840cd7f1fc$var$camera,\n            width: $274d75840cd7f1fc$var$windwoWidth,\n            // height: windowHeight * (1 - scale),\n            height: $274d75840cd7f1fc$var$windowHeight,\n            left: 0,\n            top: 0,\n            clearColor: $274d75840cd7f1fc$var$BG_COLOR\n        },\n        {\n            name: \"preview\",\n            camera: $274d75840cd7f1fc$var$previewCamera,\n            width: scale * $274d75840cd7f1fc$var$windwoWidth,\n            height: scale * $274d75840cd7f1fc$var$windowHeight,\n            left: left,\n            top: $274d75840cd7f1fc$var$windowHeight * (1 - scale) - top,\n            clearColor: clearColor\n        }\n    ];\n}\nfunction* $274d75840cd7f1fc$var$animation() {\n    let { arcSegments: arcSegments, curveType: curveType, stride: stride, easing: easing, easingType: easingType, progress: progress } = $274d75840cd7f1fc$var$params;\n    // let dt = 0;\n    let easingFun = $cPutt.Easing[easing];\n    if (easing == 'generatePow') easingFun = easingFun();\n    while(progress <= 1){\n        const length = $274d75840cd7f1fc$var$splinePoints.length;\n        let easingProgress = easingFun[easingType](progress);\n        let startIndex = easingProgress * arcSegments & 0x7FFFFFFF;\n        // boundary, animation will stop before last point\n        if (startIndex >= length - 1) startIndex = length - 2;\n        let targetIndex = startIndex + 1;\n        const startPoint = $274d75840cd7f1fc$var$splinePoints[startIndex];\n        const targetPoint = $274d75840cd7f1fc$var$splinePoints[targetIndex];\n        $274d75840cd7f1fc$var$previewCamera.position.copy(startPoint);\n        $274d75840cd7f1fc$var$previewCamera.lookAt(targetPoint);\n        $274d75840cd7f1fc$var$previewCamera.updateProjectionMatrix();\n        $274d75840cd7f1fc$var$previewCameraHelper.update();\n        progress += stride;\n        yield progress;\n    }\n}\n// play animation\nfunction $274d75840cd7f1fc$var$play() {\n    // maybe make \"play\", \"pause\", \"resume\" in one button will be better\n    // const playController = folders.animationFolder.children[3];\n    if (!$274d75840cd7f1fc$var$animationTask) $274d75840cd7f1fc$var$animationTask = $274d75840cd7f1fc$var$animation();\n    if (!$274d75840cd7f1fc$var$isAnimating) startAnimation();\n    $274d75840cd7f1fc$var$isAnimating = true;\n    function startAnimation() {\n        $274d75840cd7f1fc$var$animationId = requestAnimationFrame(startAnimation);\n        if ($274d75840cd7f1fc$var$params.pause) return;\n        let value = $274d75840cd7f1fc$var$animationTask && $274d75840cd7f1fc$var$animationTask.next();\n        // animation end reset to the origin\n        if (value) {\n            if (value.done) {\n                $274d75840cd7f1fc$var$reset(0);\n                // reset progress to 1 because we use easing function to clip splines \n                // the progress will never reach 1 (the bigger arcSegments is more closer to 1)\n                $274d75840cd7f1fc$var$params.progress = 1;\n                $274d75840cd7f1fc$var$progressController.updateDisplay();\n            } else {\n                const progress = value.value;\n                // reset gui\n                $274d75840cd7f1fc$var$params.progress = progress;\n                $274d75840cd7f1fc$var$progressController.updateDisplay();\n            }\n            $274d75840cd7f1fc$var$render();\n        }\n    }\n}\n// terminate animation\nfunction $274d75840cd7f1fc$var$reset(resetCamera = true) {\n    $274d75840cd7f1fc$var$params.progress = 0;\n    $274d75840cd7f1fc$var$progressController.updateDisplay();\n    if ($274d75840cd7f1fc$var$animationId) cancelAnimationFrame($274d75840cd7f1fc$var$animationId);\n    $274d75840cd7f1fc$var$animationTask = null;\n    $274d75840cd7f1fc$var$isAnimating = false;\n    if (resetCamera) $274d75840cd7f1fc$var$setPreviewCamera();\n    $274d75840cd7f1fc$var$render();\n}\n// render webgl\nfunction $274d75840cd7f1fc$var$render() {\n    const views = $274d75840cd7f1fc$var$getViewports();\n    for (let view of views){\n        const { clearColor: clearColor, left: left, top: top, width: width, height: height, camera: camera } = view;\n        $274d75840cd7f1fc$var$renderer.setClearColor(clearColor, 1);\n        $274d75840cd7f1fc$var$renderer.setScissor(left, top, width, height);\n        $274d75840cd7f1fc$var$renderer.setViewport(left, top, width, height);\n        $274d75840cd7f1fc$var$renderer.setScissorTest(true);\n        $274d75840cd7f1fc$var$renderer.render($274d75840cd7f1fc$var$scene, camera);\n    }\n}\n/**\n* state: 0 means reset, 1 means use index to update, 2 means use points to update, 3 means progress \n* index: current index in spline\n*/ function $274d75840cd7f1fc$var$setPreviewCamera(state = 0, index = 0) {\n    let positionIndex = index;\n    let targetIndex = index + 1;\n    switch(state){\n        case 0:\n            // use in init and transform objectChange\n            setMatrix(0, 1, $274d75840cd7f1fc$var$points);\n            break;\n        case 1:\n            if (index == $274d75840cd7f1fc$var$arcSegments) {\n                positionIndex -= 1;\n                targetIndex -= 1;\n            }\n            setMatrix(positionIndex, targetIndex, $274d75840cd7f1fc$var$clipSplinePoints);\n            break;\n        case 2:\n            // use in removePoint\n            const pointsNum = $274d75840cd7f1fc$var$points.length;\n            if (index == pointsNum) {\n                positionIndex -= 1;\n                targetIndex -= 1;\n            }\n            setMatrix(positionIndex, targetIndex, $274d75840cd7f1fc$var$points);\n            break;\n        case 3:\n            if ($274d75840cd7f1fc$var$clipSplinePoints.length < 2) return;\n            // progress change\n            setMatrix(0, 1, $274d75840cd7f1fc$var$clipSplinePoints);\n            break;\n    }\n    const { showHelper: showHelper, fov: fov, near: near, far: far, aspect: aspect } = $274d75840cd7f1fc$var$params;\n    $274d75840cd7f1fc$var$previewCamera.aspect = aspect;\n    $274d75840cd7f1fc$var$previewCamera.fov = fov;\n    $274d75840cd7f1fc$var$previewCamera.near = near;\n    $274d75840cd7f1fc$var$previewCamera.far = far;\n    $274d75840cd7f1fc$var$previewCamera.updateProjectionMatrix();\n    $274d75840cd7f1fc$var$previewCameraHelper.visible = showHelper;\n    $274d75840cd7f1fc$var$previewCameraHelper.update();\n    function setMatrix(index, index2, array) {\n        $274d75840cd7f1fc$var$previewCamera.position.copy(array[index]);\n        $274d75840cd7f1fc$var$previewCamera.lookAt(array[index2]);\n        $274d75840cd7f1fc$var$previewCamera.updateProjectionMatrix();\n        $274d75840cd7f1fc$var$previewCameraHelper.update();\n    }\n}\n// clip spline points by clipProgress \nfunction $274d75840cd7f1fc$var$clipProgress() {\n    const { arcSegments: arcSegments, curveType: curveType, progress: progress } = $274d75840cd7f1fc$var$params;\n    $274d75840cd7f1fc$var$splinePoints = $274d75840cd7f1fc$var$splines[curveType].getPoints(arcSegments);\n    if (progress === 0) return $274d75840cd7f1fc$var$splinePoints;\n    // maximum progress is less than 1 to prevent clipping empty spline\n    const _progress = progress === 1 ? 0.99 : progress;\n    let spline = $274d75840cd7f1fc$var$splines[curveType].getPoints(arcSegments, _progress, 1);\n    const clipOffset = progress * arcSegments & 0x0FFFFFFF;\n    spline = spline.splice(clipOffset, arcSegments - 1);\n    return spline;\n}\n\n\n//# sourceMappingURL=cameraEditor.133965dc.js.map\n","import * as THREE from 'three';\nimport * as TWEEN from '@tweenjs/tween.js/dist/tween.esm.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { TransformControls } from 'three/examples/jsm/controls/TransformControls.js';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { getAssetURL } from '/extend/tools/index.js'\n\nconst assetUrl = getAssetURL();\nconst modelUrl = assetUrl + \"models/collision-world.glb\"\n\nlet camera, scene, renderer, controls, raycaster, transformControl;\n\nlet previewCamera;\nlet previewCameraHelper;\n\n/* defines */\nconst BG_COLOR = 0x333333;\n\n/* global variables */\n\n// for collision world\nlet points = [\n    new THREE.Vector3(13.656463381771713, 14.283809732883363, -7.668193169056049),\n    new THREE.Vector3(0.9998577232602041, 5.256311262739087, 3.9526593933678797),\n    new THREE.Vector3(5.003802510959054, -0.6844364277972178, 11.729153299298071),\n    new THREE.Vector3(-2.0803289556393207, -0.36919658334801253, 10.97966816333047)\n];\n\nlet splinePoints = [];\nlet clipSplinePoints = [];\nlet splines = {};\nlet arcSegments = 200;\nlet tension = 0.5;\nlet pointer = new THREE.Vector2();\nlet windwoWidth = window.innerWidth;\nlet windowHeight = window.innerHeight;\nlet animationId;\nlet animationTask;\nlet isAnimating = false;\nconst dimension = {\n    center: new THREE.Vector3(),\n    min: new THREE.Vector3(),\n    max: new THREE.Vector3()\n};\nconst controlGroup = new THREE.Group();\nconst cubeScale = .5;\nconst controlGeometry = new THREE.BoxGeometry(cubeScale, cubeScale, cubeScale);\nconst controlMaterial = new THREE.MeshLambertMaterial({ color: Math.random() * 0xffffff });\n\nlet progressController;\nconst folders = {};\nconst params = {\n    // spline options \n    showCurve: true,\n    tension: tension,\n    arcSegments: arcSegments,\n    curveType: 'uniform',\n    // preview camera\n    showHelper: true,\n    aspect: windwoWidth / windowHeight,\n    near: 1,\n    far: 50,\n    fov: 20,\n    // edit options\n    addPoint: addPoint,\n    removePoint: removePoint,\n    exportSpline: exportSpline,\n    // animation options\n    easing: 'Linear',\n    easingType: 'In',\n    stride: 0.001,\n    play: play,\n    pause: false,\n    reset: reset,\n    progress: 0,\n    // preview viewport\n    scale: 0.33,\n    top: 0,\n    left: 0,\n    clearColor: 0x666666\n};\n\ninit();\n\nfunction init() {\n\n    renderer = new THREE.WebGLRenderer({ antialias: false });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(windwoWidth, windowHeight);\n    renderer.setClearColor(BG_COLOR, 1);\n    document.body.appendChild(renderer.domElement);\n\n    scene = new THREE.Scene();\n    scene.add(new THREE.AmbientLight(0xf0f0f0, 3));\n\n    scene.add(controlGroup);\n\n    camera = new THREE.PerspectiveCamera(70, windwoWidth / windowHeight, 1, 1000);\n\n    const { aspect, near, far, fov, showHelper } = params;\n    previewCamera = new THREE.PerspectiveCamera(fov, aspect, near, far);\n    previewCameraHelper = new THREE.CameraHelper(previewCamera);\n    previewCameraHelper.visible = showHelper;\n    scene.add(camera);\n    scene.add(previewCamera);\n    scene.add(previewCameraHelper);\n\n\n    controls = new OrbitControls(camera, renderer.domElement);\n\n    raycaster = new THREE.Raycaster();\n    transformControl = new TransformControls(camera, renderer.domElement);\n    scene.add(transformControl);\n\n    new GLTFLoader().load(modelUrl,\n        function (gltf) {\n            let model = gltf.scene;\n            scene.add(model);\n\n            const box = new THREE.Box3();\n            box.setFromObject(model);\n            const size = box.getSize(new THREE.Vector3());\n            const center = box.getCenter(controls.target);\n\n            dimension.min = box.min;\n            dimension.max = box.max;\n            dimension.center = center;\n            dimension.size = size;\n\n            camera.position.x = center.x - size.x / 2;\n            camera.position.y = 2 * size.y;\n            camera.position.z = center.z - size.z / 2;\n            camera.updateProjectionMatrix();\n            controls.update();\n\n            // illuminate the scene for better view\n            const light = new THREE.SpotLight(0xffffff, 4.5);\n            light.position.set(center.x, 50 * center.y, center.z);\n            light.lookAt(center.x, center.y, center.z);\n            light.angle = Math.PI * 0.2;\n            light.decay = 0;\n            light.castShadow = true;\n            light.shadow.camera.near = 200;\n            light.shadow.camera.far = 2000;\n            light.shadow.bias = - 0.000222;\n            light.shadow.mapSize.width = 1024;\n            light.shadow.mapSize.height = 1024;\n            scene.add(light);\n\n            /* generate control objects */\n            {\n                // randomly generate points\n                if (points.length == 0) {\n\n                    points.length = 0;\n                    const { center, min, max, size } = dimension;\n                    for (let i = 0; i < 3; ++i) {\n\n                        const point = new THREE.Vector3(\n                            Math.random() * size.x + min.x,\n                            Math.random() * size.y + center.y,\n                            Math.random() * size.z + min.z\n                        );\n                        points.push(point);\n\n                    }\n                }\n\n\n                // make sure cubes being added first\n                for (let point of points) {\n\n                    addControlMesh(point);\n\n                }\n\n                // reset preview camera\n                setPreviewCamera();\n\n                // set positions reference so that points don't need to manually overwrite\n                const meshes = controlGroup.children;\n                const length = meshes.length;\n\n                points.length = 0;\n\n                for (let i = 0; i < length; ++i) {\n\n                    points[i] = meshes[i].position;\n\n                }\n\n                // then adding curves\n                const geometry = new THREE.BufferGeometry();\n                geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(arcSegments * 3), 3));\n\n                let curve = new THREE.CatmullRomCurve3(points);\n                curve.curveType = 'catmullrom';\n                curve.mesh = new THREE.Line(geometry.clone(), new THREE.LineBasicMaterial({\n                    color: 0xff0000,\n                    opacity: 0.35\n                }));\n                curve.mesh.castShadow = true;\n                splines.uniform = curve;\n\n                curve = new THREE.CatmullRomCurve3(points);\n                curve.curveType = 'centripetal';\n                curve.mesh = new THREE.Line(geometry.clone(), new THREE.LineBasicMaterial({\n                    color: 0x00ff00,\n                    opacity: 0.35\n                }));\n                curve.mesh.castShadow = true;\n                splines.centripetal = curve;\n\n                curve = new THREE.CatmullRomCurve3(points);\n                curve.curveType = 'chordal';\n                curve.mesh = new THREE.Line(geometry.clone(), new THREE.LineBasicMaterial({\n                    color: 0x0000ff,\n                    opacity: 0.35\n                }));\n                curve.mesh.castShadow = true;\n                splines.chordal = curve;\n\n                for (const k in splines) {\n                    const spline = splines[k];\n\n                    scene.add(spline.mesh);\n                }\n\n                clipSplinePoints = clipProgress();\n                // use splines to update positions of curve meshes\n                updateSplineMesh();\n                render();\n\n            }\n        },\n        function (xhr) {\n            // console.log( (xhr.loaded / xhr.total * 100) + '% loaded');\n        },\n        function (error) {\n            console.log(error);\n        });\n\n    /* handle gui*/\n    {\n        const gui = new GUI();\n\n        const splineFolder = gui.addFolder('Spline');\n        splineFolder.add(params, 'showCurve').onChange(v => {\n\n            for (const k in splines) {\n                const spline = splines[k];\n                spline.mesh.visible = v;\n            }\n            render();\n\n        });\n        splineFolder.add(params, 'curveType', ['centripetal', 'uniform', 'chordal']).onChange(render);\n        splineFolder.add(params, 'tension', 0, 1).step(0.01).onChange(value => {\n\n            for (const k in splines) {\n                const spline = splines[k];\n                spline.tension = value;\n            }\n            updateSplineMesh();\n            render();\n\n        });\n        splineFolder.add(params, 'arcSegments', 100, 5000).step(100).onChange(value => {\n\n            for (const k in splines) {\n                const spline = splines[k];\n                spline.arcLengthDivisions = value;\n            }\n\n            updateSplineMesh();\n            render();\n            arcSegments = value;\n\n        });\n        folders.splineFolder = splineFolder;\n\n        const helperFolder = gui.addFolder('Camera Helper');\n        helperFolder.add(params, 'showHelper').onChange(v => {\n            controlGroup.traverse(cube => {\n                cube.visible = v;\n            });\n            setPreviewCamera();\n            render();\n        });;\n        helperFolder.add(params, 'aspect', 1, 10).step(0.1).onChange(v => {\n            setPreviewCamera();\n            render();\n        });\n        helperFolder.add(params, 'fov', 0, 180).step(1).onChange(v => {\n            setPreviewCamera();\n            render();\n        });\n        helperFolder.add(params, 'near', 1, 200).step(1).onChange(v => {\n            setPreviewCamera();\n            render();\n        });\n        helperFolder.add(params, 'far', 500, 2000).step(1).onChange(v => {\n            setPreviewCamera();\n            render();\n        });\n        folders.helperFolder = helperFolder;\n\n\n        const editFolder = gui.addFolder('Edit');\n        editFolder.add(params, 'addPoint');\n        editFolder.add(params, 'removePoint');\n        editFolder.add(params, 'exportSpline');\n        folders.editFolder = editFolder;\n\n        const animationFolder = gui.addFolder('Animation');\n        const easings = [];\n        for (let e in TWEEN.Easing) {\n            easings.push(e);\n        }\n        animationFolder.add(params, 'easing', easings);\n        animationFolder.add(params, 'easingType', ['In', 'InOut', 'Out']);\n        animationFolder.add(params, 'stride', 0.001, 0.1).step(0.0001);\n        animationFolder.add(params, 'play');\n        animationFolder.add(params, 'pause');\n        animationFolder.add(params, 'reset');\n        // clip animation\n        animationFolder.add(params, 'progress', 0, 1).step(0.01).onChange(v => {\n\n            clipSplinePoints = clipProgress();\n            setPreviewCamera(3);\n            render();\n\n        });\n\n        folders.animationFolder = animationFolder;\n\n        const viewportFolder = gui.addFolder('Viewport');\n        viewportFolder.add(params, 'scale', 0.1, 0.5).step(0.01).onChange(v => {\n            render();\n        });\n        viewportFolder.add(params, 'top', 0, windowHeight).step(10).onChange(v => {\n            render();\n        });\n        viewportFolder.add(params, 'left', 0, windwoWidth).step(10).onChange(v => {\n            render();\n        });\n        viewportFolder.addColor(params, 'clearColor').onChange(v => {\n            render();\n        });\n        folders.viewportFolder = viewportFolder;\n\n        progressController = folders.animationFolder.children[6];\n        gui.open();\n\n    }\n\n    /* handle events */\n    {\n        transformControl.addEventListener('dragging-changed', event => {\n\n            controls.enabled = !event.value;\n\n        });\n\n        transformControl.addEventListener('objectChange', event => {\n\n            clipSplinePoints = clipProgress();\n\n            updateSplineMesh();\n            if (!isAnimating) {\n\n                setPreviewCamera(3);\n\n            }\n\n        });\n\n        window.addEventListener('resize', () => {\n\n            windwoWidth = window.innerWidth;\n            windowHeight = window.innerHeight;\n\n            renderer.setPixelRatio(window.devicePixelRatio);\n            renderer.setSize(windwoWidth, windowHeight);\n\n            const aspect = windwoWidth / windowHeight;\n\n            camera.aspect = aspect;\n            previewCamera.aspect = aspect;\n            camera.updateProjectionMatrix();\n            previewCamera.updateProjectionMatrix();\n            previewCameraHelper.update();\n\n            render();\n        });\n\n        // right click\n        window.addEventListener('contextmenu', event => {\n\n            raycaster.setFromCamera(pointer, camera);\n\n            const gizmo = transformControl.children[0];\n            const intersects = raycaster.intersectObjects([...controlGroup.children, gizmo], false);\n\n            if (intersects.length == 0) {\n\n                transformControl.detach();\n\n            }\n\n            render();\n\n        });\n\n        window.addEventListener('mousewheel', () => {\n\n            render();\n\n        });\n\n\n        window.addEventListener('mousemove', event => {\n\n            pointer.x = (event.clientX / windwoWidth) * 2 - 1;\n            pointer.y = - (event.clientY / windowHeight) * 2 + 1;\n            raycaster.setFromCamera(pointer, camera);\n\n            const intersects = raycaster.intersectObjects(controlGroup.children, false);\n            if (intersects.length > 0) {\n                const object = intersects[0].object;\n\n                if (transformControl.dragging) return;\n\n                if (object !== transformControl.object) {\n\n                    transformControl.attach(object);\n\n                }\n            }\n\n            render();\n        });\n\n    }\n}\n\n\n/* utils */\n\n// generate new point and add to points\nfunction addPoint() {\n\n    const { size, center, min, max } = dimension;\n    const randomPoint = new THREE.Vector3(\n        Math.random() * size.x + min.x,\n        Math.random() * size.y + center.y,\n        Math.random() * size.z + min.z\n    );\n\n    addControlMesh(randomPoint, (cube, nextPointIndex) => {\n        // set positions reference so that points don't need to manually overwrite\n        points.push(cube.position);\n    });\n\n    clipSplinePoints = clipProgress();\n\n    updateSplineMesh();\n\n    render();\n\n}\n\n// remove point from points\nfunction removePoint() {\n\n    if (points.length <= 3) {\n\n        alert(\"Can't not remove from points less than 3.\");\n        return;\n\n    }\n\n    const cubes = controlGroup.children;\n\n    points.pop();\n    const cube = cubes.pop();\n\n    // a proper way to determine if is the same object\n    if (transformControl.object && cube.uuid === transformControl.object.uuid) {\n\n        transformControl.detach();\n\n    }\n    cube.dispose && cube.dispose();\n    // set helper to last - 1\n    setPreviewCamera(2, points.length - 2);\n\n    clipSplinePoints = clipProgress();\n\n    updateSplineMesh();\n\n    render();\n}\n\n// update splines meshes already exist\nfunction updateSplineMesh() {\n\n    const point = new THREE.Vector3();\n    const newSegments = params.arcSegments;\n    const updateBuffer = (arcSegments != newSegments);\n\n    for (const k in splines) {\n        const spline = splines[k];\n        const splineMesh = spline.mesh;\n        const geometry = splineMesh.geometry;\n        let position = geometry.attributes.position;\n\n        if (updateBuffer) {\n\n            geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(newSegments * 3), 3));\n            // a must do step: new buffer is replaced, change BufferAttribute reference\n            position = geometry.attributes.position;\n        }\n        for (let i = 0; i < newSegments; i++) {\n            const t = i / (newSegments - 1);\n            spline.getPoint(t, point);\n            position.setXYZ(i, point.x, point.y, point.z);\n\n        }\n\n        // update buffer in next frame\n        position.needsUpdate = true;\n    }\n\n}\n\n// add control cube by a new position\nfunction addControlMesh(point, callback) {\n\n    const nextPointIndex = points.length;\n\n    const cube = new THREE.Mesh(controlGeometry, controlMaterial);\n    cube.position.setX(point.x);\n    cube.position.setY(point.y);\n    cube.position.setZ(point.z);\n    cube.castShadow = true;\n    cube.receiveShadow = true;\n    controlGroup.add(cube);\n\n    callback && callback(cube, nextPointIndex);\n}\n\n\nfunction exportSpline() {\n    const strplace = [];\n    const objects = controlGroup.children;\n    const length = objects.length;\n    for (let i = 0; i < length; i++) {\n        const p = objects[i].position;\n        strplace.push(`new THREE.Vector3(${p.x}, ${p.y}, ${p.z})`);\n    }\n    console.log(strplace.join(',\\n'));\n    const code = '[' + (strplace.join(',\\n\\t')) + ']';\n    prompt('copy and paste code', code);\n\n}\n\n// viewports\nfunction getViewports() {\n    const { clearColor, scale, top, left } = params;\n    // left and top is relative to the leftTop corner while webgl is from leftBottom\n    return [\n\n        {\n            name: \"main\",\n            camera: camera,\n            width: windwoWidth,\n            // height: windowHeight * (1 - scale),\n            height: windowHeight,\n            left: 0,\n            top: 0,\n            clearColor: BG_COLOR\n        },\n\n        {\n            name: \"preview\",\n            camera: previewCamera,\n            width: scale * windwoWidth,\n            height: scale * windowHeight,\n            left: left,\n            top: windowHeight * (1 - scale) - top,\n            clearColor: clearColor\n        },\n    ];\n}\n\n\nfunction* animation() {\n\n    let { arcSegments, curveType, stride, easing, easingType, progress } = params;\n\n    // let dt = 0;\n\n    let easingFun = TWEEN.Easing[easing];\n    if (easing == 'generatePow') {\n        easingFun = easingFun();\n    }\n\n    while (progress <= 1) {\n\n        const length = splinePoints.length;\n\n        let easingProgress = easingFun[easingType](progress);\n\n        let startIndex = easingProgress * arcSegments & 0x7FFFFFFF;\n        // boundary, animation will stop before last point\n        if (startIndex >= length - 1) {\n            startIndex = length - 2;\n        }\n\n        let targetIndex = startIndex + 1;\n\n        const startPoint = splinePoints[startIndex];\n        const targetPoint = splinePoints[targetIndex];\n\n        previewCamera.position.copy(startPoint);\n        previewCamera.lookAt(targetPoint);\n        previewCamera.updateProjectionMatrix();\n        previewCameraHelper.update();\n\n        progress += stride;\n\n        yield progress;\n    }\n\n}\n\n// play animation\nfunction play() {\n    // maybe make \"play\", \"pause\", \"resume\" in one button will be better\n    // const playController = folders.animationFolder.children[3];\n\n    if (!animationTask) {\n\n        animationTask = animation();\n\n    }\n\n    if (!isAnimating) {\n\n        startAnimation();\n\n    }\n\n    isAnimating = true;\n\n    function startAnimation() {\n\n        animationId = requestAnimationFrame(startAnimation);\n\n        if (params.pause) return;\n        let value = animationTask && animationTask.next();\n        // animation end reset to the origin\n        if (value) {\n\n            if (value.done) {\n\n                reset(0);\n\n                // reset progress to 1 because we use easing function to clip splines \n                // the progress will never reach 1 (the bigger arcSegments is more closer to 1)\n                params.progress = 1;\n                progressController.updateDisplay();\n\n            }\n            else {\n\n                const progress = value.value;\n                // reset gui\n                params.progress = progress;\n                progressController.updateDisplay();\n\n            }\n\n            render();\n\n        }\n    }\n}\n\n// terminate animation\nfunction reset(resetCamera = true) {\n\n    params.progress = 0;\n    progressController.updateDisplay();\n\n    if (animationId) cancelAnimationFrame(animationId);\n    animationTask = null;\n    isAnimating = false;\n\n    if (resetCamera) setPreviewCamera();\n\n    render();\n\n}\n\n// render webgl\nfunction render() {\n\n    const views = getViewports();\n    for (let view of views) {\n\n        const { clearColor, left, top, width, height, camera } = view;\n\n        renderer.setClearColor(clearColor, 1);\n        renderer.setScissor(left, top, width, height);\n        renderer.setViewport(left, top, width, height);\n        renderer.setScissorTest(true);\n        renderer.render(scene, camera);\n    }\n\n}\n\n/**\n* state: 0 means reset, 1 means use index to update, 2 means use points to update, 3 means progress \n* index: current index in spline\n*/\nfunction setPreviewCamera(state = 0, index = 0) {\n\n    let positionIndex = index;\n    let targetIndex = index + 1;\n\n    switch (state) {\n        case 0:\n            // use in init and transform objectChange\n            setMatrix(0, 1, points);\n            break;\n        case 1:\n\n            if (index == arcSegments) {\n\n                positionIndex -= 1;\n                targetIndex -= 1;\n\n            }\n\n            setMatrix(positionIndex, targetIndex, clipSplinePoints);\n            break;\n\n        case 2:\n            // use in removePoint\n            const pointsNum = points.length;\n\n            if (index == pointsNum) {\n\n                positionIndex -= 1;\n                targetIndex -= 1;\n\n            }\n\n            setMatrix(positionIndex, targetIndex, points);\n            break;\n        case 3:\n            if (clipSplinePoints.length < 2) return;\n            // progress change\n            setMatrix(0, 1, clipSplinePoints);\n            break;\n\n    }\n\n    const { showHelper, fov, near, far, aspect } = params;\n    previewCamera.aspect = aspect;\n    previewCamera.fov = fov;\n    previewCamera.near = near;\n    previewCamera.far = far;\n    previewCamera.updateProjectionMatrix();\n    previewCameraHelper.visible = showHelper;\n    previewCameraHelper.update();\n\n    function setMatrix(index, index2, array) {\n\n        previewCamera.position.copy(array[index]);\n        previewCamera.lookAt(array[index2]);\n        previewCamera.updateProjectionMatrix();\n        previewCameraHelper.update();\n\n    }\n\n\n}\n\n// clip spline points by clipProgress \nfunction clipProgress() {\n\n    const { arcSegments, curveType, progress } = params;\n\n    splinePoints = splines[curveType].getPoints(arcSegments);\n    if (progress === 0) {\n\n        return splinePoints;\n\n    }\n\n    // maximum progress is less than 1 to prevent clipping empty spline\n    const _progress = progress === 1 ? 0.99 : progress;\n    let spline = splines[curveType].getPoints(arcSegments, _progress, 1);\n\n    const clipOffset = progress * arcSegments & 0x0FFFFFFF;\n    spline = spline.splice(clipOffset, arcSegments - 1);\n\n    return spline;\n}\n","import {\n\tBoxGeometry,\n\tBufferGeometry,\n\tCylinderGeometry,\n\tDoubleSide,\n\tEuler,\n\tFloat32BufferAttribute,\n\tLine,\n\tLineBasicMaterial,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tOctahedronGeometry,\n\tPlaneGeometry,\n\tQuaternion,\n\tRaycaster,\n\tSphereGeometry,\n\tTorusGeometry,\n\tVector3\n} from 'three';\n\nconst _raycaster = new Raycaster();\n\nconst _tempVector = new Vector3();\nconst _tempVector2 = new Vector3();\nconst _tempQuaternion = new Quaternion();\nconst _unit = {\n\tX: new Vector3( 1, 0, 0 ),\n\tY: new Vector3( 0, 1, 0 ),\n\tZ: new Vector3( 0, 0, 1 )\n};\n\nconst _changeEvent = { type: 'change' };\nconst _mouseDownEvent = { type: 'mouseDown' };\nconst _mouseUpEvent = { type: 'mouseUp', mode: null };\nconst _objectChangeEvent = { type: 'objectChange' };\n\nclass TransformControls extends Object3D {\n\n\tconstructor( camera, domElement ) {\n\n\t\tsuper();\n\n\t\tif ( domElement === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.TransformControls: The second parameter \"domElement\" is now mandatory.' );\n\t\t\tdomElement = document;\n\n\t\t}\n\n\t\tthis.isTransformControls = true;\n\n\t\tthis.visible = false;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\tconst _gizmo = new TransformControlsGizmo();\n\t\tthis._gizmo = _gizmo;\n\t\tthis.add( _gizmo );\n\n\t\tconst _plane = new TransformControlsPlane();\n\t\tthis._plane = _plane;\n\t\tthis.add( _plane );\n\n\t\tconst scope = this;\n\n\t\t// Defined getter, setter and store for a property\n\t\tfunction defineProperty( propName, defaultValue ) {\n\n\t\t\tlet propValue = defaultValue;\n\n\t\t\tObject.defineProperty( scope, propName, {\n\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn propValue !== undefined ? propValue : defaultValue;\n\n\t\t\t\t},\n\n\t\t\t\tset: function ( value ) {\n\n\t\t\t\t\tif ( propValue !== value ) {\n\n\t\t\t\t\t\tpropValue = value;\n\t\t\t\t\t\t_plane[ propName ] = value;\n\t\t\t\t\t\t_gizmo[ propName ] = value;\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: propName + '-changed', value: value } );\n\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tscope[ propName ] = defaultValue;\n\t\t\t_plane[ propName ] = defaultValue;\n\t\t\t_gizmo[ propName ] = defaultValue;\n\n\t\t}\n\n\t\t// Define properties with getters/setter\n\t\t// Setting the defined property will automatically trigger change event\n\t\t// Defined properties are passed down to gizmo and plane\n\n\t\tdefineProperty( 'camera', camera );\n\t\tdefineProperty( 'object', undefined );\n\t\tdefineProperty( 'enabled', true );\n\t\tdefineProperty( 'axis', null );\n\t\tdefineProperty( 'mode', 'translate' );\n\t\tdefineProperty( 'translationSnap', null );\n\t\tdefineProperty( 'rotationSnap', null );\n\t\tdefineProperty( 'scaleSnap', null );\n\t\tdefineProperty( 'space', 'world' );\n\t\tdefineProperty( 'size', 1 );\n\t\tdefineProperty( 'dragging', false );\n\t\tdefineProperty( 'showX', true );\n\t\tdefineProperty( 'showY', true );\n\t\tdefineProperty( 'showZ', true );\n\n\t\t// Reusable utility variables\n\n\t\tconst worldPosition = new Vector3();\n\t\tconst worldPositionStart = new Vector3();\n\t\tconst worldQuaternion = new Quaternion();\n\t\tconst worldQuaternionStart = new Quaternion();\n\t\tconst cameraPosition = new Vector3();\n\t\tconst cameraQuaternion = new Quaternion();\n\t\tconst pointStart = new Vector3();\n\t\tconst pointEnd = new Vector3();\n\t\tconst rotationAxis = new Vector3();\n\t\tconst rotationAngle = 0;\n\t\tconst eye = new Vector3();\n\n\t\t// TODO: remove properties unused in plane and gizmo\n\n\t\tdefineProperty( 'worldPosition', worldPosition );\n\t\tdefineProperty( 'worldPositionStart', worldPositionStart );\n\t\tdefineProperty( 'worldQuaternion', worldQuaternion );\n\t\tdefineProperty( 'worldQuaternionStart', worldQuaternionStart );\n\t\tdefineProperty( 'cameraPosition', cameraPosition );\n\t\tdefineProperty( 'cameraQuaternion', cameraQuaternion );\n\t\tdefineProperty( 'pointStart', pointStart );\n\t\tdefineProperty( 'pointEnd', pointEnd );\n\t\tdefineProperty( 'rotationAxis', rotationAxis );\n\t\tdefineProperty( 'rotationAngle', rotationAngle );\n\t\tdefineProperty( 'eye', eye );\n\n\t\tthis._offset = new Vector3();\n\t\tthis._startNorm = new Vector3();\n\t\tthis._endNorm = new Vector3();\n\t\tthis._cameraScale = new Vector3();\n\n\t\tthis._parentPosition = new Vector3();\n\t\tthis._parentQuaternion = new Quaternion();\n\t\tthis._parentQuaternionInv = new Quaternion();\n\t\tthis._parentScale = new Vector3();\n\n\t\tthis._worldScaleStart = new Vector3();\n\t\tthis._worldQuaternionInv = new Quaternion();\n\t\tthis._worldScale = new Vector3();\n\n\t\tthis._positionStart = new Vector3();\n\t\tthis._quaternionStart = new Quaternion();\n\t\tthis._scaleStart = new Vector3();\n\n\t\tthis._getPointer = getPointer.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerHover = onPointerHover.bind( this );\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerHover );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t// updateMatrixWorld  updates key transformation variables\n\tupdateMatrixWorld() {\n\n\t\tif ( this.object !== undefined ) {\n\n\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\tif ( this.object.parent === null ) {\n\n\t\t\t\tconsole.error( 'TransformControls: The attached 3D object must be a part of the scene graph.' );\n\n\t\t\t} else {\n\n\t\t\t\tthis.object.parent.matrixWorld.decompose( this._parentPosition, this._parentQuaternion, this._parentScale );\n\n\t\t\t}\n\n\t\t\tthis.object.matrixWorld.decompose( this.worldPosition, this.worldQuaternion, this._worldScale );\n\n\t\t\tthis._parentQuaternionInv.copy( this._parentQuaternion ).invert();\n\t\t\tthis._worldQuaternionInv.copy( this.worldQuaternion ).invert();\n\n\t\t}\n\n\t\tthis.camera.updateMatrixWorld();\n\t\tthis.camera.matrixWorld.decompose( this.cameraPosition, this.cameraQuaternion, this._cameraScale );\n\n\t\tif ( this.camera.isOrthographicCamera ) {\n\n\t\t\tthis.camera.getWorldDirection( this.eye ).negate();\n\n\t\t} else {\n\n\t\t\tthis.eye.copy( this.cameraPosition ).sub( this.worldPosition ).normalize();\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( this );\n\n\t}\n\n\tpointerHover( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true ) return;\n\n\t\t_raycaster.setFromCamera( pointer, this.camera );\n\n\t\tconst intersect = intersectObjectWithRay( this._gizmo.picker[ this.mode ], _raycaster );\n\n\t\tif ( intersect ) {\n\n\t\t\tthis.axis = intersect.object.name;\n\n\t\t} else {\n\n\t\t\tthis.axis = null;\n\n\t\t}\n\n\t}\n\n\tpointerDown( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true || pointer.button !== 0 ) return;\n\n\t\tif ( this.axis !== null ) {\n\n\t\t\t_raycaster.setFromCamera( pointer, this.camera );\n\n\t\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\n\n\t\t\tif ( planeIntersect ) {\n\n\t\t\t\tthis.object.updateMatrixWorld();\n\t\t\t\tthis.object.parent.updateMatrixWorld();\n\n\t\t\t\tthis._positionStart.copy( this.object.position );\n\t\t\t\tthis._quaternionStart.copy( this.object.quaternion );\n\t\t\t\tthis._scaleStart.copy( this.object.scale );\n\n\t\t\t\tthis.object.matrixWorld.decompose( this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart );\n\n\t\t\t\tthis.pointStart.copy( planeIntersect.point ).sub( this.worldPositionStart );\n\n\t\t\t}\n\n\t\t\tthis.dragging = true;\n\t\t\t_mouseDownEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( _mouseDownEvent );\n\n\t\t}\n\n\t}\n\n\tpointerMove( pointer ) {\n\n\t\tconst axis = this.axis;\n\t\tconst mode = this.mode;\n\t\tconst object = this.object;\n\t\tlet space = this.space;\n\n\t\tif ( mode === 'scale' ) {\n\n\t\t\tspace = 'local';\n\n\t\t} else if ( axis === 'E' || axis === 'XYZE' || axis === 'XYZ' ) {\n\n\t\t\tspace = 'world';\n\n\t\t}\n\n\t\tif ( object === undefined || axis === null || this.dragging === false || pointer.button !== - 1 ) return;\n\n\t\t_raycaster.setFromCamera( pointer, this.camera );\n\n\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\n\n\t\tif ( ! planeIntersect ) return;\n\n\t\tthis.pointEnd.copy( planeIntersect.point ).sub( this.worldPositionStart );\n\n\t\tif ( mode === 'translate' ) {\n\n\t\t\t// Apply translate\n\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\tthis._offset.applyQuaternion( this._worldQuaternionInv );\n\n\t\t\t}\n\n\t\t\tif ( axis.indexOf( 'X' ) === - 1 ) this._offset.x = 0;\n\t\t\tif ( axis.indexOf( 'Y' ) === - 1 ) this._offset.y = 0;\n\t\t\tif ( axis.indexOf( 'Z' ) === - 1 ) this._offset.z = 0;\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\tthis._offset.applyQuaternion( this._quaternionStart ).divide( this._parentScale );\n\n\t\t\t} else {\n\n\t\t\t\tthis._offset.applyQuaternion( this._parentQuaternionInv ).divide( this._parentScale );\n\n\t\t\t}\n\n\t\t\tobject.position.copy( this._offset ).add( this._positionStart );\n\n\t\t\t// Apply translation snap\n\n\t\t\tif ( this.translationSnap ) {\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\tobject.position.applyQuaternion( _tempQuaternion.copy( this._quaternionStart ).invert() );\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.position.applyQuaternion( this._quaternionStart );\n\n\t\t\t\t}\n\n\t\t\t\tif ( space === 'world' ) {\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.add( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.sub( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( mode === 'scale' ) {\n\n\t\t\tif ( axis.search( 'XYZ' ) !== - 1 ) {\n\n\t\t\t\tlet d = this.pointEnd.length() / this.pointStart.length();\n\n\t\t\t\tif ( this.pointEnd.dot( this.pointStart ) < 0 ) d *= - 1;\n\n\t\t\t\t_tempVector2.set( d, d, d );\n\n\t\t\t} else {\n\n\t\t\t\t_tempVector.copy( this.pointStart );\n\t\t\t\t_tempVector2.copy( this.pointEnd );\n\n\t\t\t\t_tempVector.applyQuaternion( this._worldQuaternionInv );\n\t\t\t\t_tempVector2.applyQuaternion( this._worldQuaternionInv );\n\n\t\t\t\t_tempVector2.divide( _tempVector );\n\n\t\t\t\tif ( axis.search( 'X' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.x = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.y = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.z = 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Apply scale\n\n\t\t\tobject.scale.copy( this._scaleStart ).multiply( _tempVector2 );\n\n\t\t\tif ( this.scaleSnap ) {\n\n\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.x = Math.round( object.scale.x / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.y = Math.round( object.scale.y / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.z = Math.round( object.scale.z / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( mode === 'rotate' ) {\n\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\n\n\t\t\tconst ROTATION_SPEED = 20 / this.worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\n\n\t\t\tlet _inPlaneRotation = false;\n\n\t\t\tif ( axis === 'XYZE' ) {\n\n\t\t\t\tthis.rotationAxis.copy( this._offset ).cross( this.eye ).normalize();\n\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.copy( this.rotationAxis ).cross( this.eye ) ) * ROTATION_SPEED;\n\n\t\t\t} else if ( axis === 'X' || axis === 'Y' || axis === 'Z' ) {\n\n\t\t\t\tthis.rotationAxis.copy( _unit[ axis ] );\n\n\t\t\t\t_tempVector.copy( _unit[ axis ] );\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\t_tempVector.cross( this.eye );\n\n\t\t\t\t// When _tempVector is 0 after cross with this.eye the vectors are parallel and should use in-plane rotation logic.\n\t\t\t\tif ( _tempVector.length() === 0 ) {\n\n\t\t\t\t\t_inPlaneRotation = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.normalize() ) * ROTATION_SPEED;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tif ( axis === 'E' || _inPlaneRotation ) {\n\n\t\t\t\tthis.rotationAxis.copy( this.eye );\n\t\t\t\tthis.rotationAngle = this.pointEnd.angleTo( this.pointStart );\n\n\t\t\t\tthis._startNorm.copy( this.pointStart ).normalize();\n\t\t\t\tthis._endNorm.copy( this.pointEnd ).normalize();\n\n\t\t\t\tthis.rotationAngle *= ( this._endNorm.cross( this._startNorm ).dot( this.eye ) < 0 ? 1 : - 1 );\n\n\t\t\t}\n\n\t\t\t// Apply rotation snap\n\n\t\t\tif ( this.rotationSnap ) this.rotationAngle = Math.round( this.rotationAngle / this.rotationSnap ) * this.rotationSnap;\n\n\t\t\t// Apply rotate\n\t\t\tif ( space === 'local' && axis !== 'E' && axis !== 'XYZE' ) {\n\n\t\t\t\tobject.quaternion.copy( this._quaternionStart );\n\t\t\t\tobject.quaternion.multiply( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) ).normalize();\n\n\t\t\t} else {\n\n\t\t\t\tthis.rotationAxis.applyQuaternion( this._parentQuaternionInv );\n\t\t\t\tobject.quaternion.copy( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) );\n\t\t\t\tobject.quaternion.multiply( this._quaternionStart ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( _changeEvent );\n\t\tthis.dispatchEvent( _objectChangeEvent );\n\n\t}\n\n\tpointerUp( pointer ) {\n\n\t\tif ( pointer.button !== 0 ) return;\n\n\t\tif ( this.dragging && ( this.axis !== null ) ) {\n\n\t\t\t_mouseUpEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( _mouseUpEvent );\n\n\t\t}\n\n\t\tthis.dragging = false;\n\t\tthis.axis = null;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerHover );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis.traverse( function ( child ) {\n\n\t\t\tif ( child.geometry ) child.geometry.dispose();\n\t\t\tif ( child.material ) child.material.dispose();\n\n\t\t} );\n\n\t}\n\n\t// Set current object\n\tattach( object ) {\n\n\t\tthis.object = object;\n\t\tthis.visible = true;\n\n\t\treturn this;\n\n\t}\n\n\t// Detach from object\n\tdetach() {\n\n\t\tthis.object = undefined;\n\t\tthis.visible = false;\n\t\tthis.axis = null;\n\n\t\treturn this;\n\n\t}\n\n\treset() {\n\n\t\tif ( ! this.enabled ) return;\n\n\t\tif ( this.dragging ) {\n\n\t\t\tthis.object.position.copy( this._positionStart );\n\t\t\tthis.object.quaternion.copy( this._quaternionStart );\n\t\t\tthis.object.scale.copy( this._scaleStart );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\tthis.dispatchEvent( _objectChangeEvent );\n\n\t\t\tthis.pointStart.copy( this.pointEnd );\n\n\t\t}\n\n\t}\n\n\tgetRaycaster() {\n\n\t\treturn _raycaster;\n\n\t}\n\n\t// TODO: deprecate\n\n\tgetMode() {\n\n\t\treturn this.mode;\n\n\t}\n\n\tsetMode( mode ) {\n\n\t\tthis.mode = mode;\n\n\t}\n\n\tsetTranslationSnap( translationSnap ) {\n\n\t\tthis.translationSnap = translationSnap;\n\n\t}\n\n\tsetRotationSnap( rotationSnap ) {\n\n\t\tthis.rotationSnap = rotationSnap;\n\n\t}\n\n\tsetScaleSnap( scaleSnap ) {\n\n\t\tthis.scaleSnap = scaleSnap;\n\n\t}\n\n\tsetSize( size ) {\n\n\t\tthis.size = size;\n\n\t}\n\n\tsetSpace( space ) {\n\n\t\tthis.space = space;\n\n\t}\n\n}\n\n// mouse / touch event handlers\n\nfunction getPointer( event ) {\n\n\tif ( this.domElement.ownerDocument.pointerLockElement ) {\n\n\t\treturn {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tbutton: event.button\n\t\t};\n\n\t} else {\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\n\t\treturn {\n\t\t\tx: ( event.clientX - rect.left ) / rect.width * 2 - 1,\n\t\t\ty: - ( event.clientY - rect.top ) / rect.height * 2 + 1,\n\t\t\tbutton: event.button\n\t\t};\n\n\t}\n\n}\n\nfunction onPointerHover( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tswitch ( event.pointerType ) {\n\n\t\tcase 'mouse':\n\t\tcase 'pen':\n\t\t\tthis.pointerHover( this._getPointer( event ) );\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tif ( ! document.pointerLockElement ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t}\n\n\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\n\tthis.pointerHover( this._getPointer( event ) );\n\tthis.pointerDown( this._getPointer( event ) );\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tthis.pointerMove( this._getPointer( event ) );\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( ! this.enabled ) return;\n\n\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\n\tthis.pointerUp( this._getPointer( event ) );\n\n}\n\nfunction intersectObjectWithRay( object, raycaster, includeInvisible ) {\n\n\tconst allIntersections = raycaster.intersectObject( object, true );\n\n\tfor ( let i = 0; i < allIntersections.length; i ++ ) {\n\n\t\tif ( allIntersections[ i ].object.visible || includeInvisible ) {\n\n\t\t\treturn allIntersections[ i ];\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n\n//\n\n// Reusable utility variables\n\nconst _tempEuler = new Euler();\nconst _alignVector = new Vector3( 0, 1, 0 );\nconst _zeroVector = new Vector3( 0, 0, 0 );\nconst _lookAtMatrix = new Matrix4();\nconst _tempQuaternion2 = new Quaternion();\nconst _identityQuaternion = new Quaternion();\nconst _dirVector = new Vector3();\nconst _tempMatrix = new Matrix4();\n\nconst _unitX = new Vector3( 1, 0, 0 );\nconst _unitY = new Vector3( 0, 1, 0 );\nconst _unitZ = new Vector3( 0, 0, 1 );\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _v3 = new Vector3();\n\nclass TransformControlsGizmo extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isTransformControlsGizmo = true;\n\n\t\tthis.type = 'TransformControlsGizmo';\n\n\t\t// shared materials\n\n\t\tconst gizmoMaterial = new MeshBasicMaterial( {\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tfog: false,\n\t\t\ttoneMapped: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tconst gizmoLineMaterial = new LineBasicMaterial( {\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tfog: false,\n\t\t\ttoneMapped: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\t// Make unique material for each axis/color\n\n\t\tconst matInvisible = gizmoMaterial.clone();\n\t\tmatInvisible.opacity = 0.15;\n\n\t\tconst matHelper = gizmoLineMaterial.clone();\n\t\tmatHelper.opacity = 0.5;\n\n\t\tconst matRed = gizmoMaterial.clone();\n\t\tmatRed.color.setHex( 0xff0000 );\n\n\t\tconst matGreen = gizmoMaterial.clone();\n\t\tmatGreen.color.setHex( 0x00ff00 );\n\n\t\tconst matBlue = gizmoMaterial.clone();\n\t\tmatBlue.color.setHex( 0x0000ff );\n\n\t\tconst matRedTransparent = gizmoMaterial.clone();\n\t\tmatRedTransparent.color.setHex( 0xff0000 );\n\t\tmatRedTransparent.opacity = 0.5;\n\n\t\tconst matGreenTransparent = gizmoMaterial.clone();\n\t\tmatGreenTransparent.color.setHex( 0x00ff00 );\n\t\tmatGreenTransparent.opacity = 0.5;\n\n\t\tconst matBlueTransparent = gizmoMaterial.clone();\n\t\tmatBlueTransparent.color.setHex( 0x0000ff );\n\t\tmatBlueTransparent.opacity = 0.5;\n\n\t\tconst matWhiteTransparent = gizmoMaterial.clone();\n\t\tmatWhiteTransparent.opacity = 0.25;\n\n\t\tconst matYellowTransparent = gizmoMaterial.clone();\n\t\tmatYellowTransparent.color.setHex( 0xffff00 );\n\t\tmatYellowTransparent.opacity = 0.25;\n\n\t\tconst matYellow = gizmoMaterial.clone();\n\t\tmatYellow.color.setHex( 0xffff00 );\n\n\t\tconst matGray = gizmoMaterial.clone();\n\t\tmatGray.color.setHex( 0x787878 );\n\n\t\t// reusable geometry\n\n\t\tconst arrowGeometry = new CylinderGeometry( 0, 0.04, 0.1, 12 );\n\t\tarrowGeometry.translate( 0, 0.05, 0 );\n\n\t\tconst scaleHandleGeometry = new BoxGeometry( 0.08, 0.08, 0.08 );\n\t\tscaleHandleGeometry.translate( 0, 0.04, 0 );\n\n\t\tconst lineGeometry = new BufferGeometry();\n\t\tlineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0,\t1, 0, 0 ], 3 ) );\n\n\t\tconst lineGeometry2 = new CylinderGeometry( 0.0075, 0.0075, 0.5, 3 );\n\t\tlineGeometry2.translate( 0, 0.25, 0 );\n\n\t\tfunction CircleGeometry( radius, arc ) {\n\n\t\t\tconst geometry = new TorusGeometry( radius, 0.0075, 3, 64, arc * Math.PI * 2 );\n\t\t\tgeometry.rotateY( Math.PI / 2 );\n\t\t\tgeometry.rotateX( Math.PI / 2 );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\t// Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n\t\tfunction TranslateHelperGeometry() {\n\n\t\t\tconst geometry = new BufferGeometry();\n\n\t\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 1, 1, 1 ], 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\t// Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n\t\tconst gizmoTranslate = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 0.5, 0 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, - 0.5, 0 ], [ Math.PI, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), null, [ Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.1, 0 ), matWhiteTransparent.clone() ), [ 0, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent.clone() ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent.clone() ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent.clone() ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst pickerTranslate = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.2, 0 ), matInvisible ) ]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst helperTranslate = {\n\t\t\tSTART: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tEND: [\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tDELTA: [\n\t\t\t\t[ new Line( TranslateHelperGeometry(), matHelper ), null, null, null, 'helper' ]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\tconst gizmoRotate = {\n\t\t\tXYZE: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 1 ), matGray ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matRed ) ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matGreen ), null, [ 0, 0, - Math.PI / 2 ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matBlue ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tE: [\n\t\t\t\t[ new Mesh( CircleGeometry( 0.75, 1 ), matYellowTransparent ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t\t]\n\t\t};\n\n\t\tconst helperRotate = {\n\t\t\tAXIS: [\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\tconst pickerRotate = {\n\t\t\tXYZE: [\n\t\t\t\t[ new Mesh( new SphereGeometry( 0.25, 10, 8 ), matInvisible ) ]\n\t\t\t],\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ]],\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t],\n\t\t\tE: [\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.75, 0.1, 2, 24 ), matInvisible ) ]\n\t\t\t]\n\t\t};\n\n\t\tconst gizmoScale = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, 0.5, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, - 0.5, 0 ], [ 0, 0, Math.PI ]],\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent ), [ 0.15, 0.15, 0 ]]\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.1, 0.1, 0.1 ), matWhiteTransparent.clone() ) ],\n\t\t\t]\n\t\t};\n\n\t\tconst pickerScale = {\n\t\t\tX: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t\t],\n\t\t\tXY: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]],\n\t\t\t],\n\t\t\tYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]],\n\t\t\t],\n\t\t\tXZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t],\n\t\t\tXYZ: [\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 0, 0 ]],\n\t\t\t]\n\t\t};\n\n\t\tconst helperScale = {\n\t\t\tX: [\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tY: [\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t],\n\t\t\tZ: [\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t\t]\n\t\t};\n\n\t\t// Creates an Object3D with gizmos described in custom hierarchy definition.\n\n\t\tfunction setupGizmo( gizmoMap ) {\n\n\t\t\tconst gizmo = new Object3D();\n\n\t\t\tfor ( const name in gizmoMap ) {\n\n\t\t\t\tfor ( let i = gizmoMap[ name ].length; i --; ) {\n\n\t\t\t\t\tconst object = gizmoMap[ name ][ i ][ 0 ].clone();\n\t\t\t\t\tconst position = gizmoMap[ name ][ i ][ 1 ];\n\t\t\t\t\tconst rotation = gizmoMap[ name ][ i ][ 2 ];\n\t\t\t\t\tconst scale = gizmoMap[ name ][ i ][ 3 ];\n\t\t\t\t\tconst tag = gizmoMap[ name ][ i ][ 4 ];\n\n\t\t\t\t\t// name and tag properties are essential for picking and updating logic.\n\t\t\t\t\tobject.name = name;\n\t\t\t\t\tobject.tag = tag;\n\n\t\t\t\t\tif ( position ) {\n\n\t\t\t\t\t\tobject.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( rotation ) {\n\n\t\t\t\t\t\tobject.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( scale ) {\n\n\t\t\t\t\t\tobject.scale.set( scale[ 0 ], scale[ 1 ], scale[ 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t\tconst tempGeometry = object.geometry.clone();\n\t\t\t\t\ttempGeometry.applyMatrix4( object.matrix );\n\t\t\t\t\tobject.geometry = tempGeometry;\n\t\t\t\t\tobject.renderOrder = Infinity;\n\n\t\t\t\t\tobject.position.set( 0, 0, 0 );\n\t\t\t\t\tobject.rotation.set( 0, 0, 0 );\n\t\t\t\t\tobject.scale.set( 1, 1, 1 );\n\n\t\t\t\t\tgizmo.add( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn gizmo;\n\n\t\t}\n\n\t\t// Gizmo creation\n\n\t\tthis.gizmo = {};\n\t\tthis.picker = {};\n\t\tthis.helper = {};\n\n\t\tthis.add( this.gizmo[ 'translate' ] = setupGizmo( gizmoTranslate ) );\n\t\tthis.add( this.gizmo[ 'rotate' ] = setupGizmo( gizmoRotate ) );\n\t\tthis.add( this.gizmo[ 'scale' ] = setupGizmo( gizmoScale ) );\n\t\tthis.add( this.picker[ 'translate' ] = setupGizmo( pickerTranslate ) );\n\t\tthis.add( this.picker[ 'rotate' ] = setupGizmo( pickerRotate ) );\n\t\tthis.add( this.picker[ 'scale' ] = setupGizmo( pickerScale ) );\n\t\tthis.add( this.helper[ 'translate' ] = setupGizmo( helperTranslate ) );\n\t\tthis.add( this.helper[ 'rotate' ] = setupGizmo( helperRotate ) );\n\t\tthis.add( this.helper[ 'scale' ] = setupGizmo( helperScale ) );\n\n\t\t// Pickers should be hidden always\n\n\t\tthis.picker[ 'translate' ].visible = false;\n\t\tthis.picker[ 'rotate' ].visible = false;\n\t\tthis.picker[ 'scale' ].visible = false;\n\n\t}\n\n\t// updateMatrixWorld will update transformations and appearance of individual handles\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst space = ( this.mode === 'scale' ) ? 'local' : this.space; // scale always oriented to local rotation\n\n\t\tconst quaternion = ( space === 'local' ) ? this.worldQuaternion : _identityQuaternion;\n\n\t\t// Show only gizmos for current transform mode\n\n\t\tthis.gizmo[ 'translate' ].visible = this.mode === 'translate';\n\t\tthis.gizmo[ 'rotate' ].visible = this.mode === 'rotate';\n\t\tthis.gizmo[ 'scale' ].visible = this.mode === 'scale';\n\n\t\tthis.helper[ 'translate' ].visible = this.mode === 'translate';\n\t\tthis.helper[ 'rotate' ].visible = this.mode === 'rotate';\n\t\tthis.helper[ 'scale' ].visible = this.mode === 'scale';\n\n\n\t\tlet handles = [];\n\t\thandles = handles.concat( this.picker[ this.mode ].children );\n\t\thandles = handles.concat( this.gizmo[ this.mode ].children );\n\t\thandles = handles.concat( this.helper[ this.mode ].children );\n\n\t\tfor ( let i = 0; i < handles.length; i ++ ) {\n\n\t\t\tconst handle = handles[ i ];\n\n\t\t\t// hide aligned to camera\n\n\t\t\thandle.visible = true;\n\t\t\thandle.rotation.set( 0, 0, 0 );\n\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\tlet factor;\n\n\t\t\tif ( this.camera.isOrthographicCamera ) {\n\n\t\t\t\tfactor = ( this.camera.top - this.camera.bottom ) / this.camera.zoom;\n\n\t\t\t} else {\n\n\t\t\t\tfactor = this.worldPosition.distanceTo( this.cameraPosition ) * Math.min( 1.9 * Math.tan( Math.PI * this.camera.fov / 360 ) / this.camera.zoom, 7 );\n\n\t\t\t}\n\n\t\t\thandle.scale.set( 1, 1, 1 ).multiplyScalar( factor * this.size / 4 );\n\n\t\t\t// TODO: simplify helpers and consider decoupling from gizmo\n\n\t\t\tif ( handle.tag === 'helper' ) {\n\n\t\t\t\thandle.visible = false;\n\n\t\t\t\tif ( handle.name === 'AXIS' ) {\n\n\t\t\t\t\thandle.visible = !! this.axis;\n\n\t\t\t\t\tif ( this.axis === 'X' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Y' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, Math.PI / 2 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Z' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'XYZE' ) {\n\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\t_alignVector.copy( this.rotationAxis );\n\t\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( _zeroVector, _alignVector, _unitY ) );\n\t\t\t\t\t\thandle.quaternion.multiply( _tempQuaternion );\n\t\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'E' ) {\n\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else if ( handle.name === 'START' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'END' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPosition );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'DELTA' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.quaternion.copy( this.worldQuaternionStart );\n\t\t\t\t\t_tempVector.set( 1e-10, 1e-10, 1e-10 ).add( this.worldPositionStart ).sub( this.worldPosition ).multiplyScalar( - 1 );\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternionStart.clone().invert() );\n\t\t\t\t\thandle.scale.copy( _tempVector );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else {\n\n\t\t\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\t\t\tif ( this.dragging ) {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis ) {\n\n\t\t\t\t\t\thandle.visible = this.axis.search( handle.name ) !== - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// If updating helper, skip rest of the loop\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// Align handles to current local or world rotation\n\n\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\tif ( this.mode === 'translate' || this.mode === 'scale' ) {\n\n\t\t\t\t// Hide translate and scale axis facing the camera\n\n\t\t\t\tconst AXIS_HIDE_THRESHOLD = 0.99;\n\t\t\t\tconst PLANE_HIDE_THRESHOLD = 0.2;\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XY' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'YZ' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XZ' ) {\n\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_THRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( this.mode === 'rotate' ) {\n\n\t\t\t\t// Align handles to current local or world rotation\n\n\t\t\t\t_tempQuaternion2.copy( quaternion );\n\t\t\t\t_alignVector.copy( this.eye ).applyQuaternion( _tempQuaternion.copy( quaternion ).invert() );\n\n\t\t\t\tif ( handle.name.search( 'E' ) !== - 1 ) {\n\n\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( this.eye, _zeroVector, _unitY ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitX, Math.atan2( - _alignVector.y, _alignVector.z ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitY, Math.atan2( _alignVector.x, _alignVector.z ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitZ, Math.atan2( _alignVector.y, _alignVector.x ) );\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Hide disabled axes\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'X' ) === - 1 || this.showX );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Y' ) === - 1 || this.showY );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Z' ) === - 1 || this.showZ );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'E' ) === - 1 || ( this.showX && this.showY && this.showZ ) );\n\n\t\t\t// highlight selected axis\n\n\t\t\thandle.material._color = handle.material._color || handle.material.color.clone();\n\t\t\thandle.material._opacity = handle.material._opacity || handle.material.opacity;\n\n\t\t\thandle.material.color.copy( handle.material._color );\n\t\t\thandle.material.opacity = handle.material._opacity;\n\n\t\t\tif ( this.enabled && this.axis ) {\n\n\t\t\t\tif ( handle.name === this.axis ) {\n\n\t\t\t\t\thandle.material.color.setHex( 0xffff00 );\n\t\t\t\t\thandle.material.opacity = 1.0;\n\n\t\t\t\t} else if ( this.axis.split( '' ).some( function ( a ) {\n\n\t\t\t\t\treturn handle.name === a;\n\n\t\t\t\t} ) ) {\n\n\t\t\t\t\thandle.material.color.setHex( 0xffff00 );\n\t\t\t\t\thandle.material.opacity = 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n//\n\nclass TransformControlsPlane extends Mesh {\n\n\tconstructor() {\n\n\t\tsuper(\n\t\t\tnew PlaneGeometry( 100000, 100000, 2, 2 ),\n\t\t\tnew MeshBasicMaterial( { visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false } )\n\t\t);\n\n\t\tthis.isTransformControlsPlane = true;\n\n\t\tthis.type = 'TransformControlsPlane';\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tlet space = this.space;\n\n\t\tthis.position.copy( this.worldPosition );\n\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\n\n\t\t_v1.copy( _unitX ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\t\t_v2.copy( _unitY ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\t\t_v3.copy( _unitZ ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\n\n\t\t// Align the plane for current transform mode, axis and space.\n\n\t\t_alignVector.copy( _v2 );\n\n\t\tswitch ( this.mode ) {\n\n\t\t\tcase 'translate':\n\t\t\tcase 'scale':\n\t\t\t\tswitch ( this.axis ) {\n\n\t\t\t\t\tcase 'X':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v1 );\n\t\t\t\t\t\t_dirVector.copy( _v1 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Y':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v2 );\n\t\t\t\t\t\t_dirVector.copy( _v2 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v3 );\n\t\t\t\t\t\t_dirVector.copy( _v3 ).cross( _alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XY':\n\t\t\t\t\t\t_dirVector.copy( _v3 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'YZ':\n\t\t\t\t\t\t_dirVector.copy( _v1 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XZ':\n\t\t\t\t\t\t_alignVector.copy( _v3 );\n\t\t\t\t\t\t_dirVector.copy( _v2 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XYZ':\n\t\t\t\t\tcase 'E':\n\t\t\t\t\t\t_dirVector.set( 0, 0, 0 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'rotate':\n\t\t\tdefault:\n\t\t\t\t// special case for rotate\n\t\t\t\t_dirVector.set( 0, 0, 0 );\n\n\t\t}\n\n\t\tif ( _dirVector.length() === 0 ) {\n\n\t\t\t// If in rotate mode, make the plane parallel to camera\n\t\t\tthis.quaternion.copy( this.cameraQuaternion );\n\n\t\t} else {\n\n\t\t\t_tempMatrix.lookAt( _tempVector.set( 0, 0, 0 ), _dirVector, _alignVector );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( _tempMatrix );\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\n"],"names":["$274d75840cd7f1fc$var$camera","$274d75840cd7f1fc$var$scene","$274d75840cd7f1fc$var$renderer","$274d75840cd7f1fc$var$controls","$274d75840cd7f1fc$var$raycaster","$274d75840cd7f1fc$var$transformControl","$274d75840cd7f1fc$var$previewCamera","$274d75840cd7f1fc$var$previewCameraHelper","$274d75840cd7f1fc$var$animationId","$274d75840cd7f1fc$var$animationTask","$274d75840cd7f1fc$var$progressController","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$jw0R5","$cPutt","$ihXk0","$2sw9m","$fa0b52e175c5eff4$var$_raycaster","Raycaster","$fa0b52e175c5eff4$var$_tempVector","Vector3","$fa0b52e175c5eff4$var$_tempVector2","$fa0b52e175c5eff4$var$_tempQuaternion","Quaternion","$fa0b52e175c5eff4$var$_unit","X","Y","Z","$fa0b52e175c5eff4$var$_changeEvent","type","$fa0b52e175c5eff4$var$_mouseDownEvent","$fa0b52e175c5eff4$var$_mouseUpEvent","mode","$fa0b52e175c5eff4$var$_objectChangeEvent","$fa0b52e175c5eff4$export$198e80c116632110","Object3D","constructor","camera","domElement","undefined","console","warn","document","isTransformControls","visible","style","touchAction","_gizmo","$fa0b52e175c5eff4$export$c2ae06a69fb9d31f","add","_plane","$fa0b52e175c5eff4$export$c0ab73045548e2ca","scope","defineProperty","propName","defaultValue","propValue","Object","get","set","value","dispatchEvent","worldPosition","worldPositionStart","worldQuaternion","worldQuaternionStart","cameraPosition","cameraQuaternion","pointStart","pointEnd","rotationAxis","eye","_offset","_startNorm","_endNorm","_cameraScale","_parentPosition","_parentQuaternion","_parentQuaternionInv","_parentScale","_worldScaleStart","_worldQuaternionInv","_worldScale","_positionStart","_quaternionStart","_scaleStart","_getPointer","$fa0b52e175c5eff4$var$getPointer","bind","_onPointerDown","$fa0b52e175c5eff4$var$onPointerDown","_onPointerHover","$fa0b52e175c5eff4$var$onPointerHover","_onPointerMove","$fa0b52e175c5eff4$var$onPointerMove","_onPointerUp","$fa0b52e175c5eff4$var$onPointerUp","addEventListener","updateMatrixWorld","object","parent","error","matrixWorld","decompose","copy","invert","isOrthographicCamera","getWorldDirection","negate","sub","normalize","pointerHover","pointer","dragging","setFromCamera","intersect","$fa0b52e175c5eff4$var$intersectObjectWithRay","picker","axis","name","pointerDown","button","planeIntersect","position","quaternion","scale","point","pointerMove","space","applyQuaternion","indexOf","x","y","z","divide","translationSnap","search","Math","round","setFromMatrixPosition","d","length","dot","multiply","scaleSnap","ROTATION_SPEED","distanceTo","_inPlaneRotation","cross","rotationAngle","angleTo","rotationSnap","setFromAxisAngle","pointerUp","dispose","removeEventListener","traverse","child","geometry","material","attach","detach","reset","enabled","getRaycaster","getMode","setMode","setTranslationSnap","setRotationSnap","setScaleSnap","setSize","size","setSpace","event","ownerDocument","pointerLockElement","rect","getBoundingClientRect","clientX","left","width","clientY","top","height","pointerType","setPointerCapture","pointerId","releasePointerCapture","raycaster","includeInvisible","allIntersections","intersectObject","i","$fa0b52e175c5eff4$var$_tempEuler","Euler","$fa0b52e175c5eff4$var$_alignVector","$fa0b52e175c5eff4$var$_zeroVector","$fa0b52e175c5eff4$var$_lookAtMatrix","Matrix4","$fa0b52e175c5eff4$var$_tempQuaternion2","$fa0b52e175c5eff4$var$_identityQuaternion","$fa0b52e175c5eff4$var$_dirVector","$fa0b52e175c5eff4$var$_tempMatrix","$fa0b52e175c5eff4$var$_unitX","$fa0b52e175c5eff4$var$_unitY","$fa0b52e175c5eff4$var$_unitZ","$fa0b52e175c5eff4$var$_v1","$fa0b52e175c5eff4$var$_v2","$fa0b52e175c5eff4$var$_v3","isTransformControlsGizmo","gizmoMaterial","MeshBasicMaterial","depthTest","depthWrite","fog","toneMapped","transparent","gizmoLineMaterial","LineBasicMaterial","matInvisible","clone","opacity","matHelper","matRed","color","setHex","matGreen","matBlue","matRedTransparent","matGreenTransparent","matBlueTransparent","matWhiteTransparent","matYellowTransparent","matYellow","matGray","arrowGeometry","CylinderGeometry","translate","scaleHandleGeometry","BoxGeometry","lineGeometry","BufferGeometry","setAttribute","Float32BufferAttribute","lineGeometry2","CircleGeometry","radius","arc","TorusGeometry","PI","rotateY","rotateX","gizmoTranslate","Mesh","XYZ","OctahedronGeometry","XY","YZ","XZ","pickerTranslate","helperTranslate","START","END","DELTA","Line","TranslateHelperGeometry","gizmoRotate","XYZE","E","helperRotate","AXIS","pickerRotate","SphereGeometry","gizmoScale","pickerScale","helperScale","setupGizmo","gizmoMap","gizmo","rotation","tag","updateMatrix","tempGeometry","applyMatrix4","matrix","renderOrder","Infinity","helper","force","handles","concat","children","factor","handle","bottom","zoom","min","tan","fov","multiplyScalar","setFromEuler","abs","setFromRotationMatrix","lookAt","atan2","multiplyQuaternions","showX","showY","showZ","_color","_opacity","split","some","a","PlaneGeometry","wireframe","side","DoubleSide","isTransformControlsPlane","$7DqNw","$274d75840cd7f1fc$var$modelUrl","$274d75840cd7f1fc$var$assetUrl","$2Tb7o","getAssetURL","$274d75840cd7f1fc$var$points","$274d75840cd7f1fc$var$splinePoints","$274d75840cd7f1fc$var$clipSplinePoints","$274d75840cd7f1fc$var$splines","$274d75840cd7f1fc$var$arcSegments","$274d75840cd7f1fc$var$pointer","Vector2","$274d75840cd7f1fc$var$windwoWidth","window","innerWidth","$274d75840cd7f1fc$var$windowHeight","innerHeight","$274d75840cd7f1fc$var$isAnimating","$274d75840cd7f1fc$var$dimension","center","max","$274d75840cd7f1fc$var$controlGroup","Group","$274d75840cd7f1fc$var$controlGeometry","$274d75840cd7f1fc$var$controlMaterial","MeshLambertMaterial","random","$274d75840cd7f1fc$var$folders","$274d75840cd7f1fc$var$params","showCurve","tension","arcSegments","curveType","showHelper","aspect","near","far","addPoint","$274d75840cd7f1fc$var$addControlMesh","cube","nextPointIndex","push","$274d75840cd7f1fc$var$clipProgress","$274d75840cd7f1fc$var$updateSplineMesh","$274d75840cd7f1fc$var$render","removePoint","alert","cubes","pop","uuid","$274d75840cd7f1fc$var$setPreviewCamera","exportSpline","strplace","objects","p","log","join","prompt","easing","easingType","stride","play","$274d75840cd7f1fc$var$animation","progress","easingFun","Easing","startIndex","easingProgress","targetIndex","startPoint","targetPoint","updateProjectionMatrix","update","startAnimation","requestAnimationFrame","pause","next","done","$274d75840cd7f1fc$var$reset","updateDisplay","clearColor","newSegments","updateBuffer","k","spline","splineMesh","mesh","attributes","BufferAttribute","Float32Array","t","getPoint","setXYZ","needsUpdate","callback","setX","setY","setZ","castShadow","receiveShadow","resetCamera","cancelAnimationFrame","view","$274d75840cd7f1fc$var$getViewports","setClearColor","setScissor","setViewport","setScissorTest","render","state","index","positionIndex","setMatrix","index2","array","getPoints","clipOffset","splice","$274d75840cd7f1fc$var$init","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","body","appendChild","Scene","AmbientLight","PerspectiveCamera","CameraHelper","OrbitControls","GLTFLoader","load","gltf","model","scene","box","Box3","setFromObject","getSize","getCenter","target","light","SpotLight","angle","decay","shadow","bias","mapSize","meshes","curve","CatmullRomCurve3","uniform","centripetal","chordal","xhr","gui","GUI","splineFolder","addFolder","onChange","v","step","arcLengthDivisions","helperFolder","editFolder","animationFolder","easings","e","viewportFolder","addColor","open","intersects","intersectObjects"],"version":3,"file":"cameraEditor.133965dc.js.map"}