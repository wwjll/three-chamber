{"mappings":"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","sources":["<anon>","examples/dhLinks.js","extend/kinematic/Chain.js","extend/kinematic/Joint.js","extend/kinematic/Frame.js","extend/kinematic/Constants.js","extend/kinematic/Helper.js","extend/kinematic/Utils.js","extend/kinematic/Link.js"],"sourcesContent":["import \"./buildingAnimation.f3f83e55.js\";\nimport \"./buildingAnimation.dc0cc84b.js\";\n\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire1149\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire1149\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\n\nvar $2sw9m = parcelRequire(\"2sw9m\");\n\nvar $7DqNw = parcelRequire(\"7DqNw\");\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\n\nconst $1c156129afb201ef$export$6b5c1ceb16d01dc3 = Math.PI;\nconst $1c156129afb201ef$export$f4644083ce95e7e3 = 2 * $1c156129afb201ef$export$6b5c1ceb16d01dc3;\nconst $1c156129afb201ef$export$f504979d7e0a75c7 = $1c156129afb201ef$export$6b5c1ceb16d01dc3 / 2;\nconst $1c156129afb201ef$export$460c4029b1a54a2e = Math.PI / 180;\nconst $1c156129afb201ef$export$914076c8150813e5 = 1 / $1c156129afb201ef$export$460c4029b1a54a2e;\n\n\nclass $0d7ae239813254c0$export$b89a827e9254211a extends (0, $jw0R5.Object3D) {\n    constructor(){\n        super();\n        this.position.set(0, 0, 0);\n        this.quaternion.set(0, 0, 0, 1);\n        this.matrixAutoUpdate = true;\n    }\n}\n\n\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\n\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\nfunction $cc9203ea1021248e$export$e6917f675dc2a15e(container, offset = {}) {\n    // Rotate robot Z-up frame to three.js Y-up: R = Rx(-90deg)\n    const A = new (0, $jw0R5.Matrix4)().set(1, 0, 0, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 0, 0, 1);\n    const tx = Number.isFinite(offset.x) ? offset.x : 0;\n    const ty = Number.isFinite(offset.y) ? offset.y : 0;\n    const tz = Number.isFinite(offset.z) ? offset.z : 0;\n    const T = new (0, $jw0R5.Matrix4)().makeTranslation(tx, ty, tz);\n    container.matrixAutoUpdate = false;\n    container.matrix.copy(A).multiply(T);\n}\nfunction $cc9203ea1021248e$export$a9fe5d8e26c90e4e(minAngleDeg, maxAngleDeg) {\n    const min = Number.isFinite(minAngleDeg) ? minAngleDeg : 0;\n    const max = Number.isFinite(maxAngleDeg) ? maxAngleDeg : 360;\n    const rawSpan = max - min;\n    if (rawSpan >= 360 || rawSpan <= -360) return 360;\n    let span = (rawSpan % 360 + 360) % 360;\n    if (span === 0 && max !== min) span = 360;\n    return span;\n}\nfunction $cc9203ea1021248e$export$5c973e8d23d27820(value, minValue) {\n    return Number.isFinite(value) ? Math.max(minValue, value) : minValue;\n}\nfunction $cc9203ea1021248e$var$normalizeDhParam(item) {\n    if (Array.isArray(item)) {\n        const [theta = 0, d = 0, a = 0, alpha = 0, thetaOffset = 0, minAngle = -185, maxAngle = 185] = item;\n        return {\n            theta: theta,\n            d: d,\n            a: a,\n            alpha: alpha,\n            thetaOffset: thetaOffset,\n            minAngle: minAngle,\n            maxAngle: maxAngle\n        };\n    }\n    if (item && typeof item === 'object') return {\n        theta: Number.isFinite(item.theta) ? item.theta : 0,\n        d: Number.isFinite(item.d) ? item.d : 0,\n        a: Number.isFinite(item.a) ? item.a : 0,\n        alpha: Number.isFinite(item.alpha) ? item.alpha : 0,\n        thetaOffset: Number.isFinite(item.thetaOffset) ? item.thetaOffset : 0,\n        minAngle: Number.isFinite(item.minAngle) ? item.minAngle : -185,\n        maxAngle: Number.isFinite(item.maxAngle) ? item.maxAngle : 185\n    };\n    return {\n        theta: 0,\n        d: 0,\n        a: 0,\n        alpha: 0,\n        thetaOffset: 0,\n        minAngle: -185,\n        maxAngle: 185\n    };\n}\nfunction $cc9203ea1021248e$export$9fa59164a0b6efa(params) {\n    const dhParams = Array.isArray(params) ? params : [];\n    const result = [];\n    const n = dhParams.length;\n    for(let i = 0; i < n; i++){\n        const cur = $cc9203ea1021248e$var$normalizeDhParam(dhParams[i]);\n        const prev = i > 0 ? $cc9203ea1021248e$var$normalizeDhParam(dhParams[i - 1]) : null;\n        const a = i === 0 ? 0 : prev.a;\n        const alpha = i === 0 ? 0 : prev.alpha;\n        result.push([\n            cur.theta,\n            cur.d,\n            a,\n            alpha,\n            cur.thetaOffset,\n            cur.minAngle,\n            cur.maxAngle\n        ]);\n    }\n    if (n > 0) {\n        const last = $cc9203ea1021248e$var$normalizeDhParam(dhParams[n - 1]);\n        result.push([\n            0,\n            0,\n            last.a,\n            last.alpha,\n            0,\n            -185,\n            185\n        ]);\n    }\n    return result;\n}\nfunction $cc9203ea1021248e$export$6d44f713e66e10f6(params) {\n    const mdhParams = Array.isArray(params) ? params : [];\n    const m = mdhParams.length;\n    const result = [];\n    const n = Math.max(0, m - 1);\n    for(let i = 0; i < n; i++){\n        const cur = $cc9203ea1021248e$var$normalizeDhParam(mdhParams[i]);\n        const next = $cc9203ea1021248e$var$normalizeDhParam(mdhParams[i + 1]);\n        result.push([\n            cur.theta,\n            cur.d,\n            next.a,\n            next.alpha,\n            cur.thetaOffset,\n            cur.minAngle,\n            cur.maxAngle\n        ]);\n    }\n    return result;\n}\n\n\nconst $557de8c9eca27cd9$var$AXIS_NAMES = {\n    X: 'x',\n    Y: 'y',\n    Z: 'z'\n};\nconst $557de8c9eca27cd9$var$COLOR = 0x0092ff;\nconst $557de8c9eca27cd9$var$LINK_SIZE = {\n    tubularSegments: 64,\n    radius: 0.001,\n    radialSegments: 8\n};\nconst $557de8c9eca27cd9$var$JOINT_SIZE = {\n    radius: 0.01,\n    height: 0.05,\n    radialSegments: 8\n};\nclass $557de8c9eca27cd9$export$9a2818be0b3f7de4 extends (0, $jw0R5.Object3D) {\n    constructor(joint, options = {}){\n        super();\n        this.isDOFHelper = true;\n        this.joint = joint;\n        this.config = {\n            color: 0xffa500,\n            opacity: 0.25,\n            radius: null,\n            radiusScale: 0.25,\n            thicknessRatio: 0.3,\n            segments: 64,\n            offsetZ: 1e-4,\n            ...options\n        };\n        this._material = new (0, $jw0R5.MeshBasicMaterial)({\n            color: this.config.color,\n            transparent: true,\n            opacity: this.config.opacity,\n            side: (0, $jw0R5.DoubleSide),\n            depthWrite: false\n        });\n        this._mesh = new (0, $jw0R5.Mesh)(new (0, $jw0R5.RingGeometry)(0, 1, 3), this._material);\n        this.add(this._mesh);\n        this.update();\n    }\n    update() {\n        const { minAngle: minAngle, maxAngle: maxAngle } = this.joint;\n        const spanDeg = (0, $cc9203ea1021248e$export$a9fe5d8e26c90e4e)(minAngle, maxAngle);\n        const thetaStart = (0, $jw0R5.MathUtils).degToRad(Number.isFinite(minAngle) ? minAngle : 0);\n        const thetaLength = (0, $jw0R5.MathUtils).degToRad(spanDeg);\n        const outerRadius = Number.isFinite(this.config.radius) && this.config.radius !== null ? (0, $cc9203ea1021248e$export$5c973e8d23d27820)(this.config.radius, 0) : (0, $cc9203ea1021248e$export$5c973e8d23d27820)(this.joint.getAutoSize() * this.config.radiusScale, 1e-4);\n        const thicknessRatio = Number.isFinite(this.config.thicknessRatio) ? (0, $jw0R5.MathUtils).clamp(this.config.thicknessRatio, 0, 1) : 0.3;\n        const innerRadius = Math.max(0, outerRadius * (1 - thicknessRatio));\n        const segments = Number.isFinite(this.config.segments) ? Math.max(3, Math.floor(this.config.segments)) : 64;\n        const geometry = new (0, $jw0R5.RingGeometry)(innerRadius, outerRadius, segments, 1, thetaStart, thetaLength);\n        this._mesh.geometry.dispose();\n        this._mesh.geometry = geometry;\n        this._mesh.position.set(0, 0, Number.isFinite(this.config.offsetZ) ? this.config.offsetZ : 0);\n        this._material.color.set(this.config.color);\n        this._material.opacity = Number.isFinite(this.config.opacity) ? this.config.opacity : 0.25;\n        this._material.transparent = this._material.opacity < 1;\n        return this;\n    }\n    dispose() {\n        this._mesh.geometry.dispose();\n        this._material.dispose();\n    }\n}\nclass $557de8c9eca27cd9$var$IKHelper {\n    constructor(ikChain, config = {}){\n        this.ikJoints = ikChain.ikJoints;\n        this.config = config;\n        this.linkMaterial = this._createLinkMaterial();\n        this.jointMaterial = this._createJointMaterial();\n    }\n    visualizeIKChain() {\n        const jointGeometry = this._createJointGeometry();\n        let parent = this.ikJoints[0].parent;\n        for(let idx = 0; idx < this.ikJoints.length; idx++){\n            const ikJoint = this.ikJoints[idx];\n            const linkGeometry = this._createLinkGeometry(ikJoint.position);\n            const link = new (0, $jw0R5.Mesh)(linkGeometry, this.linkMaterial);\n            parent.add(link);\n            parent = ikJoint;\n            if (idx === 0 || idx === this.ikJoints.length - 1) continue;\n            const joint = new (0, $jw0R5.Mesh)(jointGeometry, this.jointMaterial);\n            if (ikJoint.axisName === $557de8c9eca27cd9$var$AXIS_NAMES.Z) joint.rotateX((0, $1c156129afb201ef$export$f504979d7e0a75c7));\n            const axesHelper = new (0, $jw0R5.AxesHelper)(0.1);\n            ikJoint.add(axesHelper);\n            ikJoint.add(joint);\n        }\n    }\n    _createLinkGeometry(endPoint) {\n        const startPoint = new (0, $jw0R5.Vector3)(0, 0, 0);\n        const linkPathPoints = [\n            startPoint,\n            endPoint\n        ];\n        const linkPath = new (0, $jw0R5.CatmullRomCurve3)(linkPathPoints);\n        const radius = this.config.linkWidth / 2 || $557de8c9eca27cd9$var$LINK_SIZE.radius;\n        const radialSegments = this.config.linkRoundness || $557de8c9eca27cd9$var$LINK_SIZE.radialSegments;\n        return new (0, $jw0R5.TubeGeometry)(linkPath, $557de8c9eca27cd9$var$LINK_SIZE.tubularSegments, radius, radialSegments);\n    }\n    _createLinkMaterial() {\n        const material = new (0, $jw0R5.MeshBasicMaterial)({\n            color: this.config.linkColor || $557de8c9eca27cd9$var$COLOR\n        });\n        return material;\n    }\n    _createJointGeometry() {\n        const radiusTop = this.config.jointRadius || $557de8c9eca27cd9$var$JOINT_SIZE.radius;\n        const radiusBottom = radiusTop;\n        const height = this.config.jointHeight || $557de8c9eca27cd9$var$JOINT_SIZE.height;\n        const radialSegments = this.config.jointRoundness || $557de8c9eca27cd9$var$JOINT_SIZE.radialSegments;\n        return new (0, $jw0R5.CylinderGeometry)(radiusTop, radiusBottom, height, radialSegments);\n    }\n    _createJointMaterial() {\n        const material = new (0, $jw0R5.MeshBasicMaterial)({\n            color: this.config.JointColor || $557de8c9eca27cd9$var$COLOR\n        });\n        return material;\n    }\n}\nvar $557de8c9eca27cd9$export$2e2bcd8739ae039 = $557de8c9eca27cd9$var$IKHelper;\n\n\nclass $b21e124fb279814b$export$6a0d2ab5fd042395 extends (0, $0d7ae239813254c0$export$b89a827e9254211a) {\n    constructor(options = {}){\n        super();\n        this.isJoint = true;\n        this.matrixAutoUpdate = false;\n        const { minAngle: minAngle = 0, maxAngle: maxAngle = 360 } = options;\n        this.minAngle = minAngle;\n        this.maxAngle = maxAngle;\n        this.helpers = {};\n        this.dh = null;\n        this.mdh = null;\n        this.mode = 'DH';\n    }\n    // Rz(theta) * Tz(d) * Tx(a) * Rx(alpha), Standard DH: Joint applies only the revolute rotation about its local Z.\n    applyJointDH(theta, d, a, alpha) {\n        const m = new (0, $jw0R5.Matrix4)().makeRotationZ(theta);\n        this.matrix.copy(m);\n        this.dh = {\n            theta: theta,\n            d: d,\n            a: a,\n            alpha: alpha\n        };\n        this.mode = 'DH';\n    }\n    // Rx(alpha) * Tx(a) * Rz(theta) * Tz(d), Modified DH: Rz(theta) * Tz(d) applys to Joint in MDH\n    applyJointMDH(theta, d) {\n        const m = new (0, $jw0R5.Matrix4)().makeRotationZ(theta);\n        m.setPosition(0, 0, Number.isFinite(d) ? d : 0);\n        this.matrix.copy(m);\n        this.mdh = {\n            theta: theta,\n            d: d\n        };\n        this.mode = 'MDH';\n    }\n    getAutoSize() {\n        // Heuristic used by helpers for \"relative\" sizing.\n        // Prefer link offset (child Link) if available.\n        const child = this.children.find((c)=>c && c.isLink);\n        if (child && child.matrix && Array.isArray(child.matrix.elements)) {\n            const e = child.matrix.elements;\n            // Matrix4 elements[12..14] are the translation (tx, ty, tz) in column-major order.\n            const tx = e[12] || 0;\n            const ty = e[13] || 0;\n            const tz = e[14] || 0;\n            // Use the translation length as a proxy for link length from this joint to its child.\n            const len = Math.sqrt(tx * tx + ty * ty + tz * tz);\n            if (Number.isFinite(len) && len > 0) return len;\n        }\n        if (this.dh && (Number.isFinite(this.dh.a) || Number.isFinite(this.dh.d))) {\n            const a = Number.isFinite(this.dh.a) ? this.dh.a : 0;\n            const d = Number.isFinite(this.dh.d) ? this.dh.d : 0;\n            const len = Math.sqrt(a * a + d * d);\n            if (Number.isFinite(len) && len > 0) return len;\n        }\n        return 1;\n    }\n    toggleAxisHelper(visible, options = {}) {\n        if (!this.helpers) this.helpers = {};\n        const requestedSize = Number.isFinite(options.size) ? options.size : null;\n        const fallbackSize = this.getAutoSize() * 0.25;\n        const nextSize = requestedSize === null ? fallbackSize : requestedSize;\n        if (!this.helpers.axis) {\n            this.helpers.axis = new (0, $jw0R5.AxesHelper)(nextSize);\n            this.helpers.axis.userData.size = nextSize;\n            this.helpers.axis.visible = false;\n            this.add(this.helpers.axis);\n        } else if (Number.isFinite(nextSize) && this.helpers.axis.userData.size !== nextSize) {\n            this.helpers.axis.geometry.dispose();\n            this.helpers.axis.material.dispose();\n            this.remove(this.helpers.axis);\n            this.helpers.axis = new (0, $jw0R5.AxesHelper)(nextSize);\n            this.helpers.axis.userData.size = nextSize;\n            this.helpers.axis.visible = false;\n            this.add(this.helpers.axis);\n        }\n        if (typeof visible === 'boolean') this.helpers.axis.visible = visible;\n        else this.helpers.axis.visible = !this.helpers.axis.visible;\n        return this.helpers.axis;\n    }\n    toggleDOFHelper(visible, options = {}) {\n        if (!this.helpers) this.helpers = {};\n        if (!this.helpers.DOF) {\n            if (typeof visible === 'boolean' && visible === false) return null;\n            this.helpers.DOF = new (0, $557de8c9eca27cd9$export$9a2818be0b3f7de4)(this, options);\n            this.helpers.DOF.visible = false;\n            this.helpers.DOF.matrixAutoUpdate = false;\n            this.add(this.helpers.DOF);\n        } else if (options && typeof options === 'object') Object.assign(this.helpers.DOF.config, options);\n        const nextVisible = typeof visible === 'boolean' ? visible : !this.helpers.DOF.visible;\n        this.helpers.DOF.visible = nextVisible;\n        if (nextVisible) {\n            this.helpers.DOF.update();\n            if (this.mode === 'MDH') {\n                const rotOnly = new (0, $jw0R5.Matrix4)().extractRotation(this.matrix).invert();\n                this.helpers.DOF.matrix.copy(rotOnly);\n            } else this.helpers.DOF.matrix.copy(this.matrix).invert();\n            this.helpers.DOF.matrixWorldNeedsUpdate = true;\n        }\n        return this.helpers.DOF;\n    }\n    setChild(child) {\n        if (child.isLink && this.children.length == 0) this.add(child);\n    }\n}\n\n\n\nvar $jw0R5 = parcelRequire(\"jw0R5\");\n\nclass $0ce2f041b042c3f2$export$a6c7ac8248d6e38a extends (0, $0d7ae239813254c0$export$b89a827e9254211a) {\n    constructor(){\n        super();\n        this.isLink = true;\n        this.matrixAutoUpdate = false;\n    }\n    applyDH(d, a, alpha) {\n        const Tz = new (0, $jw0R5.Matrix4)().makeTranslation(0, 0, d);\n        const Rx = new (0, $jw0R5.Matrix4)().makeRotationX(alpha);\n        const Tx = new (0, $jw0R5.Matrix4)().makeTranslation(a, 0, 0);\n        const m = Tz.multiply(Rx).multiply(Tx);\n        this.matrix.copy(m);\n        return m;\n    }\n    applyMDH(a, alpha) {\n        const Rx = new (0, $jw0R5.Matrix4)().makeRotationX(alpha);\n        const Tx = new (0, $jw0R5.Matrix4)().makeTranslation(a, 0, 0);\n        const m = Rx.multiply(Tx);\n        this.matrix.copy(m);\n        return m;\n    }\n    setChild(child) {\n        if (this.children.length !== 0) return;\n        const canAttachJoint = child.isJoint === true;\n        const canAttachLink = this.isBase === true && child.isLink === true;\n        if (canAttachJoint || canAttachLink) this.add(child);\n    }\n}\n\n\n\nfunction $89c94bbe9b6f020e$var$createSoftRandomColor() {\n    const color = new $jw0R5.Color();\n    const hue = Math.random();\n    const saturation = 0.65 + Math.random() * 0.25;\n    const lightness = 0.45 + Math.random() * 0.2;\n    color.setHSL(hue, saturation, lightness);\n    return color;\n}\nfunction $89c94bbe9b6f020e$var$getDhEndWorld(parentJoint) {\n    const dh = parentJoint.dh || {};\n    const d = Number.isFinite(dh.d) ? dh.d : 0;\n    const a = Number.isFinite(dh.a) ? dh.a : 0;\n    const alpha = Number.isFinite(dh.alpha) ? dh.alpha : 0;\n    const tz = new $jw0R5.Matrix4().makeTranslation(0, 0, d);\n    const rx = new $jw0R5.Matrix4().makeRotationX(alpha);\n    const tx = new $jw0R5.Matrix4().makeTranslation(a, 0, 0);\n    return new $jw0R5.Vector3(0, 0, 0).applyMatrix4(parentJoint.matrixWorld.clone().multiply(tz).multiply(rx).multiply(tx));\n}\nfunction $89c94bbe9b6f020e$var$buildLinkCurve(parentJoint, childJoint) {\n    const posA = new $jw0R5.Vector3();\n    const posB = new $jw0R5.Vector3();\n    parentJoint.getWorldPosition(posA);\n    if (childJoint) childJoint.getWorldPosition(posB);\n    else posB.copy(posA);\n    const dh = parentJoint.dh || {};\n    const d = Number.isFinite(dh.d) ? dh.d : 0;\n    const a = Number.isFinite(dh.a) ? dh.a : 0;\n    const alpha = Number.isFinite(dh.alpha) ? dh.alpha : 0;\n    const tz = new $jw0R5.Matrix4().makeTranslation(0, 0, d);\n    const rx = new $jw0R5.Matrix4().makeRotationX(alpha);\n    const tx = new $jw0R5.Matrix4().makeTranslation(a, 0, 0);\n    const midWorld = new $jw0R5.Vector3(0, 0, 0).applyMatrix4(parentJoint.matrixWorld.clone().multiply(tz));\n    const endWorld = new $jw0R5.Vector3(0, 0, 0).applyMatrix4(parentJoint.matrixWorld.clone().multiply(tz).multiply(rx).multiply(tx));\n    const endPoint = childJoint && endWorld.distanceTo(posB) > 1e-6 ? posB : endWorld;\n    const p0 = posA;\n    const p1 = midWorld;\n    const p2 = endPoint;\n    return new $jw0R5.QuadraticBezierCurve3(p0, p1, p2);\n}\nfunction $89c94bbe9b6f020e$export$3f593b3a198b46c3(dhParameters, mode = 'DH') {\n    const chain = [];\n    let lastNode = null;\n    if (mode === 'MDH') {\n        const baseLink = new (0, $0ce2f041b042c3f2$export$a6c7ac8248d6e38a)();\n        baseLink.isBase = true;\n        baseLink.applyMDH(0, 0);\n        lastNode = baseLink;\n        chain.push(baseLink);\n        for(let i = 0; i < dhParameters.length; i++){\n            const [theta, d, a, alpha, thetaOffset = 0, minAngle, maxAngle] = dhParameters[i];\n            const thetaConst = theta + thetaOffset;\n            let linkNode = baseLink;\n            if (i > 0) {\n                linkNode = new (0, $0ce2f041b042c3f2$export$a6c7ac8248d6e38a)();\n                linkNode.applyMDH(a, alpha);\n                lastNode.setChild(linkNode);\n                lastNode = linkNode;\n                chain.push(linkNode);\n            } else baseLink.applyMDH(a, alpha);\n            const joint = new (0, $b21e124fb279814b$export$6a0d2ab5fd042395)({\n                minAngle: minAngle,\n                maxAngle: maxAngle\n            });\n            if (i === 0) joint.isRoot = true;\n            joint.applyJointMDH(thetaConst, d);\n            joint.dh = {\n                theta: thetaConst,\n                d: d,\n                a: a,\n                alpha: alpha,\n                thetaOffset: thetaOffset\n            };\n            lastNode.setChild(joint);\n            lastNode = joint;\n            chain.push(joint);\n        }\n        return chain;\n    }\n    for(let i = 0; i < dhParameters.length; i++){\n        const [theta, d, a, alpha, thetaOffset = 0, minAngle, maxAngle] = dhParameters[i];\n        const thetaValue = theta + thetaOffset;\n        const joint = new (0, $b21e124fb279814b$export$6a0d2ab5fd042395)({\n            minAngle: minAngle,\n            maxAngle: maxAngle\n        });\n        if (i === 0) joint.isRoot = true;\n        joint.applyJointDH(thetaValue, d, a, alpha);\n        if (lastNode) lastNode.setChild(joint);\n        lastNode = joint;\n        const link = new (0, $0ce2f041b042c3f2$export$a6c7ac8248d6e38a)();\n        link.applyDH(d, a, alpha);\n        link.d = d;\n        link.a = a;\n        joint.setChild(link);\n        lastNode = link;\n        chain.push(joint);\n        chain.push(link);\n    }\n    return chain;\n}\nclass $89c94bbe9b6f020e$export$f18d5acc27d70423 {\n    constructor(scene){\n        this.scene = scene;\n        this.robotContainer = null;\n        this.roboticArm = null;\n        this.randomJointColors = [];\n        this.randomJointColorEnabled = false;\n    }\n    generate(dhParameters, styleParams, baseParams = {}) {\n        if (this.robotContainer) {\n            this.robotContainer.traverse((child)=>{\n                if (child.geometry) child.geometry.dispose();\n                if (child.material) child.material.dispose();\n            });\n            this.scene.remove(this.robotContainer);\n        }\n        const mode = baseParams.mdhMode ? 'MDH' : 'DH';\n        const baseOffset = baseParams.baseOffset || {};\n        const useConvertedParams = baseParams.useConvertedParams === true;\n        const chainParams = mode === 'MDH' && !useConvertedParams ? (0, $cc9203ea1021248e$export$9fa59164a0b6efa)(dhParameters) : dhParameters;\n        if (styleParams.randomJointColor) {\n            if (!this.randomJointColorEnabled) {\n                this.randomJointColors = Array.from({\n                    length: dhParameters.length\n                }, ()=>$89c94bbe9b6f020e$var$createSoftRandomColor());\n                this.randomJointColorEnabled = true;\n            } else if (this.randomJointColors.length !== dhParameters.length) {\n                if (this.randomJointColors.length > dhParameters.length) this.randomJointColors.length = dhParameters.length;\n                else {\n                    const missing = dhParameters.length - this.randomJointColors.length;\n                    for(let i = 0; i < missing; i++)this.randomJointColors.push($89c94bbe9b6f020e$var$createSoftRandomColor());\n                }\n            }\n        } else this.randomJointColorEnabled = false;\n        this.robotContainer = new $jw0R5.Group();\n        this.scene.add(this.robotContainer);\n        this.roboticArm = new $jw0R5.Group();\n        this.robotContainer.add(this.roboticArm);\n        if (dhParameters.length === 0) {\n            this.syncAxis(styleParams, baseOffset);\n            return;\n        }\n        const chain = $89c94bbe9b6f020e$export$3f593b3a198b46c3(chainParams, mode);\n        const root = chain[0];\n        this.roboticArm.add(root);\n        root.updateMatrixWorld(true);\n        if (mode === 'MDH' && styleParams.showAxisHelper) {\n            const axisSize = Number.isFinite(styleParams.axisHelperSize) ? styleParams.axisHelperSize : 0.1;\n            const baseAxis = new $jw0R5.AxesHelper(axisSize);\n            baseAxis.matrixAutoUpdate = false;\n            this.robotContainer.add(baseAxis);\n        }\n        if (mode === 'MDH') {\n            const joints = chain.filter((node)=>node.isJoint);\n            for(let i = 1; i < joints.length; i++){\n                const prev = joints[i - 1];\n                const cur = joints[i];\n                const linkNode = cur.parent && cur.parent.isLink ? cur.parent : null;\n                if (!linkNode) continue;\n                const posA = new $jw0R5.Vector3();\n                const posB = new $jw0R5.Vector3();\n                const posC = new $jw0R5.Vector3();\n                prev.getWorldPosition(posA);\n                linkNode.getWorldPosition(posB);\n                cur.getWorldPosition(posC);\n                if (posA.distanceTo(posC) <= 0) continue;\n                const curve = new $jw0R5.QuadraticBezierCurve3(posA, posB, posC);\n                const tubeGeo = new $jw0R5.TubeGeometry(curve, 50, styleParams.linkRadius, 8, false);\n                const linkColor = styleParams.randomLinkColor ? $89c94bbe9b6f020e$var$createSoftRandomColor() : styleParams.linkColor;\n                const tubeMat = new $jw0R5.MeshBasicMaterial({\n                    color: linkColor\n                });\n                const tube = new $jw0R5.Mesh(tubeGeo, tubeMat);\n                this.roboticArm.add(tube);\n            }\n        }\n        let jointIndex = 0;\n        root.traverse((node)=>{\n            if (mode === 'MDH' && node.isLink) return;\n            if (node.isLink) {\n                // Make sure frame helper shows on the end of the link in CDH mode(classic)\n                if (node.parent && node.children.length > 0 && node.children[0].isJoint) {\n                    const child = node.children[0];\n                    const posA = new $jw0R5.Vector3();\n                    node.parent.getWorldPosition(posA);\n                    const posB = new $jw0R5.Vector3();\n                    child.getWorldPosition(posB);\n                    if (posA.distanceTo(posB) > 0) {\n                        const path = $89c94bbe9b6f020e$var$buildLinkCurve(node.parent, child);\n                        const tubeGeo = new $jw0R5.TubeGeometry(path, 50, styleParams.linkRadius, 8, false);\n                        const linkColor = styleParams.randomLinkColor ? $89c94bbe9b6f020e$var$createSoftRandomColor() : styleParams.linkColor;\n                        const tubeMat = new $jw0R5.MeshBasicMaterial({\n                            color: linkColor\n                        });\n                        const tube = new $jw0R5.Mesh(tubeGeo, tubeMat);\n                        this.roboticArm.add(tube);\n                    }\n                    if (styleParams.showAxisHelper) {\n                        const axisSize = Number.isFinite(styleParams.axisHelperSize) ? styleParams.axisHelperSize : 0.1;\n                        const linkAxis = new $jw0R5.AxesHelper(axisSize);\n                        linkAxis.matrixAutoUpdate = false;\n                        child.updateWorldMatrix(true, false);\n                        linkAxis.applyMatrix4(child.matrixWorld);\n                        this.roboticArm.add(linkAxis);\n                    }\n                } else if (node.parent && node.parent.isJoint) {\n                    const posA = new $jw0R5.Vector3();\n                    node.parent.getWorldPosition(posA);\n                    const endWorld = $89c94bbe9b6f020e$var$getDhEndWorld(node.parent);\n                    if (posA.distanceTo(endWorld) > 0) {\n                        const path = $89c94bbe9b6f020e$var$buildLinkCurve(node.parent, null);\n                        const tubeGeo = new $jw0R5.TubeGeometry(path, 24, styleParams.linkRadius, 8, false);\n                        const linkColor = styleParams.randomLinkColor ? $89c94bbe9b6f020e$var$createSoftRandomColor() : styleParams.linkColor;\n                        const tubeMat = new $jw0R5.MeshBasicMaterial({\n                            color: linkColor\n                        });\n                        const tube = new $jw0R5.Mesh(tubeGeo, tubeMat);\n                        this.roboticArm.add(tube);\n                    }\n                    if (styleParams.showAxisHelper) {\n                        const axisSize = Number.isFinite(styleParams.axisHelperSize) ? styleParams.axisHelperSize : 0.1;\n                        const linkAxis = new $jw0R5.AxesHelper(axisSize);\n                        linkAxis.matrixAutoUpdate = false;\n                        const dh = node.parent.dh || {};\n                        const d = Number.isFinite(dh.d) ? dh.d : 0;\n                        const a = Number.isFinite(dh.a) ? dh.a : 0;\n                        const alpha = Number.isFinite(dh.alpha) ? dh.alpha : 0;\n                        const tz = new $jw0R5.Matrix4().makeTranslation(0, 0, d);\n                        const rx = new $jw0R5.Matrix4().makeRotationX(alpha);\n                        const tx = new $jw0R5.Matrix4().makeTranslation(a, 0, 0);\n                        linkAxis.matrix.copy(node.parent.matrixWorld.clone().multiply(tz).multiply(rx).multiply(tx));\n                        this.roboticArm.add(linkAxis);\n                    }\n                }\n            } else if (node.isJoint) {\n                if (typeof styleParams.showAxisHelper === 'boolean') {\n                    const axisOptions = {};\n                    if (styleParams.axisHelperSize !== undefined) axisOptions.size = styleParams.axisHelperSize;\n                    node.toggleAxisHelper(styleParams.showAxisHelper, axisOptions);\n                }\n                let jointColor = styleParams.jointColor;\n                if (styleParams.randomJointColor) {\n                    jointColor = this.randomJointColors[jointIndex];\n                    if (!jointColor) {\n                        jointColor = $89c94bbe9b6f020e$var$createSoftRandomColor();\n                        this.randomJointColors[jointIndex] = jointColor;\n                    }\n                }\n                jointIndex += 1;\n                if (typeof styleParams.showDOFHelper === 'boolean') {\n                    const dofOptions = {};\n                    if (styleParams.dofUseJointColor) dofOptions.color = jointColor;\n                    else if (styleParams.dofColor !== undefined) dofOptions.color = styleParams.dofColor;\n                    if (styleParams.dofOpacity !== undefined) dofOptions.opacity = styleParams.dofOpacity;\n                    if (styleParams.dofUseAutoRadius !== undefined || styleParams.dofRadius !== undefined) dofOptions.radius = styleParams.dofUseAutoRadius ? null : styleParams.dofRadius;\n                    if (styleParams.dofRadiusScale !== undefined) dofOptions.radiusScale = styleParams.dofRadiusScale;\n                    if (styleParams.dofThicknessRatio !== undefined) dofOptions.thicknessRatio = styleParams.dofThicknessRatio;\n                    if (styleParams.dofSegments !== undefined) dofOptions.segments = styleParams.dofSegments;\n                    if (styleParams.dofOffsetZ !== undefined) dofOptions.offsetZ = styleParams.dofOffsetZ;\n                    node.toggleDOFHelper(styleParams.showDOFHelper, dofOptions);\n                }\n                const cylGeo = new $jw0R5.CylinderGeometry(styleParams.jointRadius, styleParams.jointRadius, styleParams.jointHeight, 16);\n                const cylMat = new $jw0R5.MeshBasicMaterial({\n                    color: jointColor\n                });\n                const cyl = new $jw0R5.Mesh(cylGeo, cylMat);\n                // Orient cylinder so its axis aligns with the joint's local z (rotation axis)\n                cyl.rotateX(Math.PI / 2);\n                node.updateWorldMatrix(true, false);\n                cyl.applyMatrix4(node.matrixWorld);\n                this.roboticArm.add(cyl);\n            }\n        });\n        this.syncAxis(styleParams, baseOffset);\n    }\n    update(dhParameters, styleParams, baseParams) {\n        this.generate(dhParameters, styleParams, baseParams);\n    }\n    syncAxis(styleParams = {}, baseOffset = {}) {\n        if (this.robotContainer) {\n            if (styleParams.syncUp) (0, $cc9203ea1021248e$export$e6917f675dc2a15e)(this.robotContainer, baseOffset);\n            else {\n                this.robotContainer.matrixAutoUpdate = false;\n                this.robotContainer.matrix.identity();\n                if (baseOffset) {\n                    const tx = Number.isFinite(baseOffset.x) ? baseOffset.x : 0;\n                    const ty = Number.isFinite(baseOffset.y) ? baseOffset.y : 0;\n                    const tz = Number.isFinite(baseOffset.z) ? baseOffset.z : 0;\n                    this.robotContainer.matrix.setPosition(tx, ty, tz);\n                }\n            }\n        }\n    }\n}\nclass $89c94bbe9b6f020e$var$ChainSolver {\n}\n\n\n\nlet $272bbf19d32de2d1$var$scene, $272bbf19d32de2d1$var$camera, $272bbf19d32de2d1$var$renderer, $272bbf19d32de2d1$var$controls, $272bbf19d32de2d1$var$gui;\nlet $272bbf19d32de2d1$var$createFolder, $272bbf19d32de2d1$var$armsFolder, $272bbf19d32de2d1$var$styleFolder;\nlet $272bbf19d32de2d1$var$chain;\nlet $272bbf19d32de2d1$var$suppressUpdate = false;\nconst $272bbf19d32de2d1$var$BG_COLOR = 0x2b2b2b;\nconst $272bbf19d32de2d1$var$styleParams = {\n    jointColor: 0x7d7d7d,\n    linkColor: 0x000000,\n    randomJointColor: true,\n    randomLinkColor: false,\n    jointRadius: 0.025,\n    jointHeight: 0.05,\n    linkRadius: 0.01,\n    showAxisHelper: false,\n    showDOFHelper: true,\n    dofColor: 0xffa500,\n    dofOpacity: 0.25,\n    dofUseJointColor: true,\n    dofUseAutoRadius: false,\n    dofRadius: 0.1,\n    dofRadiusScale: 0.25,\n    dofThicknessRatio: 0.3,\n    dofSegments: 64,\n    dofOffsetZ: 1e-4,\n    axisHelperSize: 0.1,\n    syncUp: true\n};\nconst $272bbf19d32de2d1$var$defaultStyleParams = JSON.parse(JSON.stringify($272bbf19d32de2d1$var$styleParams));\nconst $272bbf19d32de2d1$var$baseParams = {\n    mdhMode: false,\n    useConvertedParams: false,\n    baseOffset: {\n        x: 0,\n        y: 0,\n        z: 0\n    }\n};\nfunction $272bbf19d32de2d1$var$resetStyles() {\n    Object.assign($272bbf19d32de2d1$var$styleParams, $272bbf19d32de2d1$var$defaultStyleParams);\n    $272bbf19d32de2d1$var$saveStyles();\n    $272bbf19d32de2d1$var$updateArm();\n    $272bbf19d32de2d1$var$styleFolder.controllers.forEach((c)=>c.updateDisplay());\n}\nfunction $272bbf19d32de2d1$var$saveStyles() {\n    localStorage.setItem('dhArmStyles', JSON.stringify($272bbf19d32de2d1$var$styleParams));\n}\nfunction $272bbf19d32de2d1$var$loadStyles() {\n    const savedStyles = localStorage.getItem('dhArmStyles');\n    if (savedStyles) Object.assign($272bbf19d32de2d1$var$styleParams, JSON.parse(savedStyles));\n}\n$272bbf19d32de2d1$var$loadStyles();\nconst $272bbf19d32de2d1$var$createParams = {\n    armSegments: [],\n    reset: function() {\n        [\n            ...$272bbf19d32de2d1$var$armsFolder.folders\n        ].forEach((folder)=>{\n            folder.destroy();\n        });\n        $272bbf19d32de2d1$var$createParams.armSegments.length = 0;\n        $272bbf19d32de2d1$var$chain.generate([], $272bbf19d32de2d1$var$styleParams, $272bbf19d32de2d1$var$baseParams);\n    },\n    addArmSegment: function(initialParams) {\n        initialParams = initialParams || {};\n        const linkIndex = this.armSegments.length;\n        const armParams = {\n            theta: initialParams.theta ?? 0,\n            thetaOffset: initialParams.thetaOffset ?? 0,\n            d: initialParams.d ?? 0,\n            a: initialParams.a ?? 1,\n            alpha: initialParams.alpha ?? 0,\n            minAngle: initialParams.minAngle ?? 0,\n            maxAngle: initialParams.maxAngle ?? 360,\n            name: `link_${linkIndex + 1}`,\n            remove: null\n        };\n        this.armSegments.push(armParams);\n        const armFolder = $272bbf19d32de2d1$var$armsFolder.addFolder(armParams.name);\n        armParams.remove = function() {\n            const armIndex = $272bbf19d32de2d1$var$createParams.armSegments.indexOf(armParams);\n            if (armIndex > -1) $272bbf19d32de2d1$var$createParams.armSegments.splice(armIndex, 1);\n            armFolder.destroy();\n            $272bbf19d32de2d1$var$updateArm();\n        };\n        armFolder.add(armParams, 'theta', -180, 180).name('Theta').onFinishChange($272bbf19d32de2d1$var$updateArm);\n        armFolder.add(armParams, 'thetaOffset', armParams.minAngle, armParams.maxAngle).name('Theta Offset').onFinishChange($272bbf19d32de2d1$var$updateArm);\n        armFolder.add(armParams, 'd', -10, 10).name('d').onFinishChange($272bbf19d32de2d1$var$updateArm);\n        armFolder.add(armParams, 'a', -10, 10).name('a').onFinishChange($272bbf19d32de2d1$var$updateArm);\n        armFolder.add(armParams, 'alpha', -180, 180).name('Alpha').onFinishChange($272bbf19d32de2d1$var$updateArm);\n        armFolder.add(armParams, 'remove').name('Remove Arm Segment');\n        armFolder.open();\n        $272bbf19d32de2d1$var$gui.domElement.scrollTop = $272bbf19d32de2d1$var$gui.domElement.scrollHeight;\n        $272bbf19d32de2d1$var$updateArm();\n    }\n};\nfunction $272bbf19d32de2d1$var$segmentsToParamArray(segments) {\n    return segments.map((segment)=>[\n            segment.theta ?? 0,\n            segment.d ?? 0,\n            segment.a ?? 0,\n            segment.alpha ?? 0,\n            segment.thetaOffset ?? 0,\n            segment.minAngle ?? -185,\n            segment.maxAngle ?? 185\n        ]);\n}\nfunction $272bbf19d32de2d1$var$rebuildSegmentsFromArray(paramArray) {\n    $272bbf19d32de2d1$var$suppressUpdate = true;\n    [\n        ...$272bbf19d32de2d1$var$armsFolder.folders\n    ].forEach((folder)=>folder.destroy());\n    $272bbf19d32de2d1$var$createParams.armSegments.length = 0;\n    paramArray.forEach((params)=>{\n        $272bbf19d32de2d1$var$createParams.addArmSegment({\n            theta: params[0],\n            d: params[1],\n            a: params[2],\n            alpha: params[3],\n            thetaOffset: params[4],\n            minAngle: params[5],\n            maxAngle: params[6]\n        });\n    });\n    $272bbf19d32de2d1$var$suppressUpdate = false;\n    $272bbf19d32de2d1$var$updateArm();\n}\nconst $272bbf19d32de2d1$var$presets = {\n    'TEST': {\n        segments: [\n            {\n                theta: 0,\n                d: 0.5,\n                a: 1,\n                alpha: 90,\n                thetaOffset: 0,\n                minAngle: -185,\n                maxAngle: 185\n            },\n            {\n                theta: 0,\n                d: 0.5,\n                a: 1,\n                alpha: 90,\n                thetaOffset: 0,\n                minAngle: -185,\n                maxAngle: 185\n            },\n            {\n                theta: 0,\n                d: 0,\n                a: 1,\n                alpha: 90,\n                thetaOffset: 0,\n                minAngle: -185,\n                maxAngle: 185\n            }\n        ]\n    },\n    'KUKA KR5': {\n        segments: [\n            {\n                theta: 0,\n                d: 0.4,\n                a: 0.18,\n                alpha: 90,\n                minAngle: -185,\n                maxAngle: 185\n            },\n            {\n                theta: 90,\n                d: 0,\n                a: 0.6,\n                alpha: 0,\n                minAngle: -155,\n                maxAngle: 35\n            },\n            {\n                theta: 0,\n                d: 0,\n                a: 0.12,\n                alpha: 90,\n                minAngle: -130,\n                maxAngle: 154\n            },\n            {\n                theta: 0,\n                d: 0.62,\n                a: 0,\n                alpha: 90,\n                minAngle: -350,\n                maxAngle: 350\n            },\n            {\n                theta: 0,\n                d: 0,\n                a: 0,\n                alpha: 90,\n                minAngle: -130,\n                maxAngle: 130\n            },\n            {\n                theta: 0,\n                d: 0.115,\n                a: 0,\n                alpha: 0,\n                minAngle: -350,\n                maxAngle: 350\n            }\n        ]\n    },\n    'PUMA 560': {\n        segments: [\n            {\n                theta: 0,\n                d: 0.67183,\n                a: 0.0,\n                alpha: 90,\n                minAngle: -160,\n                maxAngle: 160\n            },\n            {\n                theta: 0,\n                d: 0.0,\n                a: 0.4318,\n                alpha: 0,\n                minAngle: -110,\n                maxAngle: 110\n            },\n            {\n                theta: 0,\n                d: 0.15005,\n                a: 0.0203,\n                alpha: -90,\n                minAngle: -135,\n                maxAngle: 135\n            },\n            {\n                theta: 0,\n                d: 0.4318,\n                a: 0.0,\n                alpha: 90,\n                minAngle: -266,\n                maxAngle: 266\n            },\n            {\n                theta: 0,\n                d: 0.0,\n                a: 0.0,\n                alpha: -90,\n                minAngle: -100,\n                maxAngle: 100\n            },\n            {\n                theta: 0,\n                d: 0.0,\n                a: 0.0,\n                alpha: 0,\n                minAngle: -266,\n                maxAngle: 266\n            }\n        ]\n    },\n    'Simple 6-DOF': {\n        segments: [\n            {\n                theta: 0,\n                d: 0.5,\n                a: 0,\n                alpha: 0\n            },\n            {\n                theta: 0,\n                d: 0.5,\n                a: 0,\n                alpha: 0\n            },\n            {\n                theta: 0,\n                d: 0.5,\n                a: 0,\n                alpha: 0\n            },\n            {\n                theta: 0,\n                d: 0.5,\n                a: 0,\n                alpha: 0\n            },\n            {\n                theta: 0,\n                d: 0.5,\n                a: 0,\n                alpha: 0\n            },\n            {\n                theta: 0,\n                d: 0.25,\n                a: 0,\n                alpha: 0\n            }\n        ]\n    }\n};\nfunction $272bbf19d32de2d1$var$loadPreset(name) {\n    const preset = $272bbf19d32de2d1$var$presets[name];\n    if (!preset) return;\n    const paramsArray = preset.segments.map((params)=>[\n            params.theta ?? 0,\n            params.d ?? 0,\n            params.a ?? 0,\n            params.alpha ?? 0,\n            params.thetaOffset ?? 0,\n            params.minAngle ?? -185,\n            params.maxAngle ?? 185\n        ]);\n    if ($272bbf19d32de2d1$var$baseParams.mdhMode) {\n        $272bbf19d32de2d1$var$baseParams.useConvertedParams = true;\n        $272bbf19d32de2d1$var$rebuildSegmentsFromArray((0, $cc9203ea1021248e$export$9fa59164a0b6efa)(paramsArray));\n    } else {\n        $272bbf19d32de2d1$var$baseParams.useConvertedParams = false;\n        $272bbf19d32de2d1$var$rebuildSegmentsFromArray(paramsArray);\n    }\n}\nconst $272bbf19d32de2d1$var$demoParams = {\n    'TEST': ()=>$272bbf19d32de2d1$var$loadPreset('TEST'),\n    'KUKA KR5': ()=>$272bbf19d32de2d1$var$loadPreset('KUKA KR5'),\n    'PUMA 560': ()=>$272bbf19d32de2d1$var$loadPreset('PUMA 560'),\n    'Simple 6-DOF': ()=>$272bbf19d32de2d1$var$loadPreset('Simple 6-DOF')\n};\n$272bbf19d32de2d1$var$init();\nfunction $272bbf19d32de2d1$var$init() {\n    $272bbf19d32de2d1$var$scene = new $jw0R5.Scene();\n    $272bbf19d32de2d1$var$camera = new $jw0R5.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    $272bbf19d32de2d1$var$camera.position.set(2, 2, 2);\n    $272bbf19d32de2d1$var$renderer = new $jw0R5.WebGLRenderer({\n        antialias: true\n    });\n    $272bbf19d32de2d1$var$renderer.setPixelRatio(window.devicePixelRatio);\n    $272bbf19d32de2d1$var$renderer.setSize(window.innerWidth, window.innerHeight);\n    $272bbf19d32de2d1$var$renderer.setClearColor($272bbf19d32de2d1$var$BG_COLOR, 1);\n    document.body.appendChild($272bbf19d32de2d1$var$renderer.domElement);\n    $272bbf19d32de2d1$var$controls = new (0, $2sw9m.OrbitControls)($272bbf19d32de2d1$var$camera, $272bbf19d32de2d1$var$renderer.domElement);\n    $272bbf19d32de2d1$var$controls.target.set(0, 0, 0.5);\n    $272bbf19d32de2d1$var$controls.update();\n    const gridHelper = new $jw0R5.GridHelper(20, 20);\n    $272bbf19d32de2d1$var$scene.add(gridHelper);\n    // comparing with threejs default world frame\n    // const axesHelper = new THREE.AxesHelper(2);\n    // scene.add(axesHelper);\n    $272bbf19d32de2d1$var$chain = new (0, $89c94bbe9b6f020e$export$f18d5acc27d70423)($272bbf19d32de2d1$var$scene);\n    $272bbf19d32de2d1$var$gui = new (0, $7DqNw.GUI)();\n    $272bbf19d32de2d1$var$gui.domElement.style.right = 'auto';\n    $272bbf19d32de2d1$var$gui.domElement.style.left = '0px';\n    $272bbf19d32de2d1$var$gui.domElement.style.top = '0px';\n    $272bbf19d32de2d1$var$gui.domElement.style.margin = '0px';\n    $272bbf19d32de2d1$var$gui.domElement.style.maxHeight = '100vh';\n    $272bbf19d32de2d1$var$gui.domElement.style.overflow = 'auto';\n    $272bbf19d32de2d1$var$createFolder = $272bbf19d32de2d1$var$gui.addFolder('Create');\n    $272bbf19d32de2d1$var$createFolder.add($272bbf19d32de2d1$var$createParams, 'addArmSegment').name('Add Arm Segment');\n    $272bbf19d32de2d1$var$createFolder.add($272bbf19d32de2d1$var$createParams, 'reset').name('Reset');\n    $272bbf19d32de2d1$var$createFolder.open();\n    const demoFolder = $272bbf19d32de2d1$var$gui.addFolder('Demo');\n    demoFolder.add($272bbf19d32de2d1$var$demoParams, 'TEST');\n    demoFolder.add($272bbf19d32de2d1$var$demoParams, 'KUKA KR5');\n    demoFolder.add($272bbf19d32de2d1$var$demoParams, 'PUMA 560');\n    demoFolder.add($272bbf19d32de2d1$var$demoParams, 'Simple 6-DOF');\n    demoFolder.open();\n    const baseFolder = $272bbf19d32de2d1$var$gui.addFolder('Base');\n    baseFolder.add($272bbf19d32de2d1$var$baseParams, 'mdhMode').name('MDH Mode').onFinishChange((value)=>{\n        const params = $272bbf19d32de2d1$var$segmentsToParamArray($272bbf19d32de2d1$var$createParams.armSegments);\n        const converted = value ? (0, $cc9203ea1021248e$export$9fa59164a0b6efa)(params) : (0, $cc9203ea1021248e$export$6d44f713e66e10f6)(params);\n        $272bbf19d32de2d1$var$baseParams.useConvertedParams = value;\n        $272bbf19d32de2d1$var$rebuildSegmentsFromArray(converted);\n    });\n    const baseOffsetFolder = baseFolder.addFolder('Offset');\n    baseOffsetFolder.add($272bbf19d32de2d1$var$baseParams.baseOffset, 'x', -10, 10).name('Offset X').onFinishChange($272bbf19d32de2d1$var$updateArm);\n    baseOffsetFolder.add($272bbf19d32de2d1$var$baseParams.baseOffset, 'y', -10, 10).name('Offset Y').onFinishChange($272bbf19d32de2d1$var$updateArm);\n    baseOffsetFolder.add($272bbf19d32de2d1$var$baseParams.baseOffset, 'z', -10, 10).name('Offset Z').onFinishChange($272bbf19d32de2d1$var$updateArm);\n    baseFolder.open();\n    $272bbf19d32de2d1$var$styleFolder = $272bbf19d32de2d1$var$gui.addFolder('Viz');\n    const jointsLinksFolder = $272bbf19d32de2d1$var$styleFolder.addFolder('Joints && Links');\n    jointsLinksFolder.addColor($272bbf19d32de2d1$var$styleParams, 'jointColor').name('Joint Color').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    jointsLinksFolder.addColor($272bbf19d32de2d1$var$styleParams, 'linkColor').name('Link Color').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    jointsLinksFolder.add($272bbf19d32de2d1$var$styleParams, 'randomJointColor').name('Random Joint Color').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    jointsLinksFolder.add($272bbf19d32de2d1$var$styleParams, 'randomLinkColor').name('Random Link Color').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    jointsLinksFolder.add($272bbf19d32de2d1$var$styleParams, 'jointRadius', 0.01, 0.5).name('Joint Radius').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    jointsLinksFolder.add($272bbf19d32de2d1$var$styleParams, 'jointHeight', 0.01, 0.5).name('Joint Height').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    jointsLinksFolder.add($272bbf19d32de2d1$var$styleParams, 'linkRadius', 0.01, 0.2).name('Link Radius').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    jointsLinksFolder.add($272bbf19d32de2d1$var$styleParams, 'syncUp').name('Sync Up').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    const helpersFolder = $272bbf19d32de2d1$var$styleFolder.addFolder('Helpers');\n    const axisFolder = helpersFolder.addFolder('Axis');\n    axisFolder.add($272bbf19d32de2d1$var$styleParams, 'showAxisHelper').name('Axis Helper').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    axisFolder.add($272bbf19d32de2d1$var$styleParams, 'axisHelperSize', 0.01, 2).name('Axis Size').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    const dofFolder = helpersFolder.addFolder('DOF');\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'showDOFHelper').name('DOF Helper').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.addColor($272bbf19d32de2d1$var$styleParams, 'dofColor').name('DOF Color').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'dofOpacity', 0, 1).name('DOF Opacity').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'dofUseJointColor').name('Use Random Color').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'dofUseAutoRadius').name('DOF Auto Radius').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'dofRadius', 0.001, 2).name('DOF Radius').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'dofRadiusScale', 0.01, 1).name('DOF Radius Scale').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'dofThicknessRatio', 0.01, 1).name('DOF Thickness').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'dofSegments', 3, 128, 1).name('DOF Segments').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    dofFolder.add($272bbf19d32de2d1$var$styleParams, 'dofOffsetZ', 0, 0.01).name('DOF Offset Z').onFinishChange($272bbf19d32de2d1$var$updateArm).onChange($272bbf19d32de2d1$var$saveStyles);\n    $272bbf19d32de2d1$var$styleFolder.add({\n        reset: $272bbf19d32de2d1$var$resetStyles\n    }, 'reset').name('Reset Styles');\n    $272bbf19d32de2d1$var$styleFolder.open();\n    $272bbf19d32de2d1$var$armsFolder = $272bbf19d32de2d1$var$gui.addFolder('Link');\n    $272bbf19d32de2d1$var$armsFolder.open();\n    window.addEventListener('resize', ()=>{\n        const windwoWidth = window.innerWidth;\n        const windowHeight = window.innerHeight;\n        $272bbf19d32de2d1$var$renderer.setSize(windwoWidth, windowHeight);\n        $272bbf19d32de2d1$var$camera.aspect = windwoWidth / windowHeight;\n        $272bbf19d32de2d1$var$camera.updateProjectionMatrix();\n        if ($272bbf19d32de2d1$var$chain.roboticArm) {\n            const target = $272bbf19d32de2d1$var$chain.roboticArm.children.find((child)=>child.material && child.material.resolution);\n            if (target) target.material.resolution.set(windwoWidth, windowHeight);\n        }\n    });\n    $272bbf19d32de2d1$var$animate();\n}\nfunction $272bbf19d32de2d1$var$updateArm() {\n    if ($272bbf19d32de2d1$var$suppressUpdate) return;\n    const dhParameters = $272bbf19d32de2d1$var$createParams.armSegments.map((segment)=>{\n        const theta = $jw0R5.MathUtils.degToRad(segment.theta);\n        const thetaOffset = $jw0R5.MathUtils.degToRad(segment.thetaOffset ?? 0);\n        const d = segment.d;\n        const a = segment.a;\n        const alpha = $jw0R5.MathUtils.degToRad(segment.alpha);\n        return [\n            theta,\n            d,\n            a,\n            alpha,\n            thetaOffset,\n            segment.minAngle,\n            segment.maxAngle\n        ];\n    });\n    $272bbf19d32de2d1$var$chain.update(dhParameters, $272bbf19d32de2d1$var$styleParams, $272bbf19d32de2d1$var$baseParams);\n}\nfunction $272bbf19d32de2d1$var$animate() {\n    requestAnimationFrame($272bbf19d32de2d1$var$animate);\n    $272bbf19d32de2d1$var$renderer.render($272bbf19d32de2d1$var$scene, $272bbf19d32de2d1$var$camera);\n    $272bbf19d32de2d1$var$controls.update();\n}\n\n\n//# sourceMappingURL=dhLinks.853d9ce0.js.map\n","import * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { Chain } from '../extend/kinematic/Chain.js';\nimport { ConvertDH, ConvertMDH } from '../extend/kinematic/Utils.js';\n\nlet scene, camera, renderer, controls, gui;\nlet createFolder, armsFolder, styleFolder;\nlet chain;\nlet suppressUpdate = false;\nconst BG_COLOR = 0x2b2b2b;\n\nconst styleParams = {\n    jointColor: 0x7d7d7d,\n    linkColor: 0x000000,\n    randomJointColor: true,\n    randomLinkColor: false,\n    jointRadius: 0.025,\n    jointHeight: 0.05,\n    linkRadius: 0.01,\n    showAxisHelper: false,\n    showDOFHelper: true,\n    dofColor: 0xffa500,\n    dofOpacity: 0.25,\n    dofUseJointColor: true,\n    dofUseAutoRadius: false,\n    dofRadius: 0.1,\n    dofRadiusScale: 0.25,\n    dofThicknessRatio: 0.3,\n    dofSegments: 64,\n    dofOffsetZ: 1e-4,\n    axisHelperSize: 0.1,\n    syncUp: true\n};\n\nconst defaultStyleParams = JSON.parse(JSON.stringify(styleParams));\n\nconst baseParams = {\n    mdhMode: false,\n    useConvertedParams: false,\n    baseOffset: { x: 0, y: 0, z: 0 }\n};\n\nfunction resetStyles() {\n    Object.assign(styleParams, defaultStyleParams);\n    saveStyles();\n    updateArm();\n    styleFolder.controllers.forEach(c => c.updateDisplay());\n}\n\nfunction saveStyles() {\n    localStorage.setItem('dhArmStyles', JSON.stringify(styleParams));\n}\n\nfunction loadStyles() {\n    const savedStyles = localStorage.getItem('dhArmStyles');\n    if (savedStyles) {\n        Object.assign(styleParams, JSON.parse(savedStyles));\n    }\n}\n\nloadStyles();\n\nconst createParams = {\n    armSegments: [],\n    reset: function () {\n        [...armsFolder.folders].forEach(folder => {\n            folder.destroy();\n        });\n        createParams.armSegments.length = 0;\n        chain.generate([], styleParams, baseParams);\n    },\n    addArmSegment: function (initialParams) {\n        initialParams = initialParams || {};\n        const linkIndex = this.armSegments.length;\n        const armParams = {\n            theta: initialParams.theta ?? 0,\n            thetaOffset: initialParams.thetaOffset ?? 0,\n            d: initialParams.d ?? 0,\n            a: initialParams.a ?? 1,\n            alpha: initialParams.alpha ?? 0,\n            minAngle: initialParams.minAngle ?? 0,\n            maxAngle: initialParams.maxAngle ?? 360,\n            name: `link_${linkIndex + 1}`,\n            remove: null\n        };\n        this.armSegments.push(armParams);\n\n        const armFolder = armsFolder.addFolder(armParams.name);\n\n        armParams.remove = function () {\n            const armIndex = createParams.armSegments.indexOf(armParams);\n            if (armIndex > -1) {\n                createParams.armSegments.splice(armIndex, 1);\n            }\n            armFolder.destroy();\n            updateArm();\n        };\n\n        armFolder.add(armParams, 'theta', -180, 180).name('Theta').onFinishChange(updateArm);\n        armFolder\n            .add(armParams, 'thetaOffset', armParams.minAngle, armParams.maxAngle)\n            .name('Theta Offset')\n            .onFinishChange(updateArm);\n        armFolder.add(armParams, 'd', -10, 10).name('d').onFinishChange(updateArm);\n        armFolder.add(armParams, 'a', -10, 10).name('a').onFinishChange(updateArm);\n        armFolder.add(armParams, 'alpha', -180, 180).name('Alpha').onFinishChange(updateArm);\n        armFolder.add(armParams, 'remove').name('Remove Arm Segment');\n        armFolder.open();\n\n        gui.domElement.scrollTop = gui.domElement.scrollHeight;\n        updateArm();\n    }\n};\n\nfunction segmentsToParamArray(segments) {\n    return segments.map(segment => [\n        segment.theta ?? 0,\n        segment.d ?? 0,\n        segment.a ?? 0,\n        segment.alpha ?? 0,\n        segment.thetaOffset ?? 0,\n        segment.minAngle ?? -185,\n        segment.maxAngle ?? 185\n    ]);\n}\n\nfunction rebuildSegmentsFromArray(paramArray) {\n    suppressUpdate = true;\n    [...armsFolder.folders].forEach(folder => folder.destroy());\n    createParams.armSegments.length = 0;\n    paramArray.forEach(params => {\n        createParams.addArmSegment({\n            theta: params[0],\n            d: params[1],\n            a: params[2],\n            alpha: params[3],\n            thetaOffset: params[4],\n            minAngle: params[5],\n            maxAngle: params[6]\n        });\n    });\n    suppressUpdate = false;\n    updateArm();\n}\n\nconst presets = {\n    'TEST': {\n        segments: [\n            { theta: 0, d: 0.5, a: 1, alpha: 90, thetaOffset: 0, minAngle: -185, maxAngle: 185 },\n            { theta: 0, d: 0.5, a: 1, alpha: 90, thetaOffset: 0, minAngle: -185, maxAngle: 185 },\n            { theta: 0, d: 0, a: 1, alpha: 90, thetaOffset: 0, minAngle: -185, maxAngle: 185 },\n        ]\n    },\n    'KUKA KR5': {\n        segments: [\n            { theta: 0, d: 0.4, a: 0.18, alpha: 90, minAngle: -185, maxAngle: 185 },\n            { theta: 90, d: 0, a: 0.6, alpha: 0, minAngle: -155, maxAngle: 35 },\n            { theta: 0, d: 0, a: 0.12, alpha: 90, minAngle: -130, maxAngle: 154 },\n            { theta: 0, d: 0.62, a: 0, alpha: 90, minAngle: -350, maxAngle: 350 },\n            { theta: 0, d: 0, a: 0, alpha: 90, minAngle: -130, maxAngle: 130 },\n            { theta: 0, d: 0.115, a: 0, alpha: 0, minAngle: -350, maxAngle: 350 }\n        ]\n    },\n    'PUMA 560': {\n        segments: [\n            { theta: 0, d: 0.67183, a: 0.0, alpha: 90, minAngle: -160, maxAngle: 160 },\n            { theta: 0, d: 0.0, a: 0.4318, alpha: 0, minAngle: -110, maxAngle: 110 },\n            { theta: 0, d: 0.15005, a: 0.0203, alpha: -90, minAngle: -135, maxAngle: 135 },\n            { theta: 0, d: 0.4318, a: 0.0, alpha: 90, minAngle: -266, maxAngle: 266 },\n            { theta: 0, d: 0.0, a: 0.0, alpha: -90, minAngle: -100, maxAngle: 100 },\n            { theta: 0, d: 0.0, a: 0.0, alpha: 0, minAngle: -266, maxAngle: 266 }\n        ]\n    },\n    'Simple 6-DOF': {\n        segments: [\n            { theta: 0, d: 0.5, a: 0, alpha: 0 },\n            { theta: 0, d: 0.5, a: 0, alpha: 0 },\n            { theta: 0, d: 0.5, a: 0, alpha: 0 },\n            { theta: 0, d: 0.5, a: 0, alpha: 0 },\n            { theta: 0, d: 0.5, a: 0, alpha: 0 },\n            { theta: 0, d: 0.25, a: 0, alpha: 0 }\n        ]\n    }\n};\n\nfunction loadPreset(name) {\n    const preset = presets[name];\n    if (!preset) return;\n\n    const paramsArray = preset.segments.map(params => [\n        params.theta ?? 0,\n        params.d ?? 0,\n        params.a ?? 0,\n        params.alpha ?? 0,\n        params.thetaOffset ?? 0,\n        params.minAngle ?? -185,\n        params.maxAngle ?? 185\n    ]);\n    if (baseParams.mdhMode) {\n        baseParams.useConvertedParams = true;\n        rebuildSegmentsFromArray(ConvertMDH(paramsArray));\n    } else {\n        baseParams.useConvertedParams = false;\n        rebuildSegmentsFromArray(paramsArray);\n    }\n}\n\nconst demoParams = {\n    'TEST': () => loadPreset('TEST'),\n    'KUKA KR5': () => loadPreset('KUKA KR5'),\n    'PUMA 560': () => loadPreset('PUMA 560'),\n    'Simple 6-DOF': () => loadPreset('Simple 6-DOF')\n};\n\ninit();\n\nfunction init() {\n    scene = new THREE.Scene();\n\n    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    camera.position.set(2, 2, 2);\n\n    renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setClearColor(BG_COLOR, 1);\n    document.body.appendChild(renderer.domElement);\n\n    controls = new OrbitControls(camera, renderer.domElement);\n    controls.target.set(0, 0, 0.5);\n    controls.update();\n\n    const gridHelper = new THREE.GridHelper(20, 20);\n    scene.add(gridHelper);\n\n    // comparing with threejs default world frame\n    // const axesHelper = new THREE.AxesHelper(2);\n    // scene.add(axesHelper);\n\n    chain = new Chain(scene);\n\n    gui = new GUI();\n    gui.domElement.style.right = 'auto';\n    gui.domElement.style.left = '0px';\n    gui.domElement.style.top = '0px';\n    gui.domElement.style.margin = '0px';\n    gui.domElement.style.maxHeight = '100vh';\n    gui.domElement.style.overflow = 'auto';\n\n    createFolder = gui.addFolder('Create');\n    createFolder.add(createParams, 'addArmSegment').name('Add Arm Segment');\n    createFolder.add(createParams, 'reset').name('Reset');\n    createFolder.open();\n\n    const demoFolder = gui.addFolder('Demo');\n    demoFolder.add(demoParams, 'TEST');\n    demoFolder.add(demoParams, 'KUKA KR5');\n    demoFolder.add(demoParams, 'PUMA 560');\n    demoFolder.add(demoParams, 'Simple 6-DOF');\n    demoFolder.open();\n\n    const baseFolder = gui.addFolder('Base');\n    baseFolder.add(baseParams, 'mdhMode').name('MDH Mode').onFinishChange((value) => {\n        const params = segmentsToParamArray(createParams.armSegments);\n        const converted = value ? ConvertMDH(params) : ConvertDH(params);\n        baseParams.useConvertedParams = value;\n        rebuildSegmentsFromArray(converted);\n    });\n    const baseOffsetFolder = baseFolder.addFolder('Offset');\n    baseOffsetFolder.add(baseParams.baseOffset, 'x', -10, 10).name('Offset X').onFinishChange(updateArm);\n    baseOffsetFolder.add(baseParams.baseOffset, 'y', -10, 10).name('Offset Y').onFinishChange(updateArm);\n    baseOffsetFolder.add(baseParams.baseOffset, 'z', -10, 10).name('Offset Z').onFinishChange(updateArm);\n    baseFolder.open();\n\n    styleFolder = gui.addFolder('Viz');\n    const jointsLinksFolder = styleFolder.addFolder('Joints && Links');\n    jointsLinksFolder.addColor(styleParams, 'jointColor').name('Joint Color').onFinishChange(updateArm).onChange(saveStyles);\n    jointsLinksFolder.addColor(styleParams, 'linkColor').name('Link Color').onFinishChange(updateArm).onChange(saveStyles);\n    jointsLinksFolder.add(styleParams, 'randomJointColor').name('Random Joint Color').onFinishChange(updateArm).onChange(saveStyles);\n    jointsLinksFolder.add(styleParams, 'randomLinkColor').name('Random Link Color').onFinishChange(updateArm).onChange(saveStyles);\n    jointsLinksFolder.add(styleParams, 'jointRadius', 0.01, 0.5).name('Joint Radius').onFinishChange(updateArm).onChange(saveStyles);\n    jointsLinksFolder.add(styleParams, 'jointHeight', 0.01, 0.5).name('Joint Height').onFinishChange(updateArm).onChange(saveStyles);\n    jointsLinksFolder.add(styleParams, 'linkRadius', 0.01, 0.2).name('Link Radius').onFinishChange(updateArm).onChange(saveStyles);\n    jointsLinksFolder.add(styleParams, 'syncUp').name('Sync Up').onFinishChange(updateArm).onChange(saveStyles);\n\n    const helpersFolder = styleFolder.addFolder('Helpers');\n    const axisFolder = helpersFolder.addFolder('Axis');\n    axisFolder.add(styleParams, 'showAxisHelper').name('Axis Helper').onFinishChange(updateArm).onChange(saveStyles);\n    axisFolder.add(styleParams, 'axisHelperSize', 0.01, 2).name('Axis Size').onFinishChange(updateArm).onChange(saveStyles);\n\n    const dofFolder = helpersFolder.addFolder('DOF');\n    dofFolder.add(styleParams, 'showDOFHelper').name('DOF Helper').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.addColor(styleParams, 'dofColor').name('DOF Color').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.add(styleParams, 'dofOpacity', 0, 1).name('DOF Opacity').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.add(styleParams, 'dofUseJointColor').name('Use Random Color').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.add(styleParams, 'dofUseAutoRadius').name('DOF Auto Radius').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.add(styleParams, 'dofRadius', 0.001, 2).name('DOF Radius').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.add(styleParams, 'dofRadiusScale', 0.01, 1).name('DOF Radius Scale').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.add(styleParams, 'dofThicknessRatio', 0.01, 1).name('DOF Thickness').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.add(styleParams, 'dofSegments', 3, 128, 1).name('DOF Segments').onFinishChange(updateArm).onChange(saveStyles);\n    dofFolder.add(styleParams, 'dofOffsetZ', 0, 0.01).name('DOF Offset Z').onFinishChange(updateArm).onChange(saveStyles);\n\n    styleFolder.add({ reset: resetStyles }, 'reset').name('Reset Styles');\n    styleFolder.open();\n\n    armsFolder = gui.addFolder('Link');\n    armsFolder.open();\n\n    window.addEventListener('resize', () => {\n        const windwoWidth = window.innerWidth;\n        const windowHeight = window.innerHeight;\n        renderer.setSize(windwoWidth, windowHeight);\n        camera.aspect = windwoWidth / windowHeight;\n        camera.updateProjectionMatrix();\n        if (chain.roboticArm) {\n            const target = chain.roboticArm.children.find(\n                (child) => child.material && child.material.resolution\n            );\n            if (target) {\n                target.material.resolution.set(windwoWidth, windowHeight);\n            }\n        }\n    });\n\n    animate();\n}\n\nfunction updateArm() {\n    if (suppressUpdate) return;\n    const dhParameters = createParams.armSegments.map(segment => {\n        const theta = THREE.MathUtils.degToRad(segment.theta);\n        const thetaOffset = THREE.MathUtils.degToRad(segment.thetaOffset ?? 0);\n        const d = segment.d;\n        const a = segment.a;\n        const alpha = THREE.MathUtils.degToRad(segment.alpha);\n        return [theta, d, a, alpha, thetaOffset, segment.minAngle, segment.maxAngle];\n    });\n    chain.update(dhParameters, styleParams, baseParams);\n}\n\nfunction animate() {\n    requestAnimationFrame(animate);\n    renderer.render(scene, camera);\n    controls.update();\n}\n","import * as THREE from 'three';\nimport { Joint } from './Joint.js';\nimport { Link } from './Link.js';\nimport { AlignBaseMatrix, ConvertMDH } from './Utils.js';\n\nfunction createSoftRandomColor() {\n    const color = new THREE.Color();\n    const hue = Math.random();\n    const saturation = 0.65 + Math.random() * 0.25;\n    const lightness = 0.45 + Math.random() * 0.2;\n    color.setHSL(hue, saturation, lightness);\n    return color;\n}\n\nfunction getDhEndWorld(parentJoint) {\n    const dh = parentJoint.dh || {};\n    const d = Number.isFinite(dh.d) ? dh.d : 0;\n    const a = Number.isFinite(dh.a) ? dh.a : 0;\n    const alpha = Number.isFinite(dh.alpha) ? dh.alpha : 0;\n    const tz = new THREE.Matrix4().makeTranslation(0, 0, d);\n    const rx = new THREE.Matrix4().makeRotationX(alpha);\n    const tx = new THREE.Matrix4().makeTranslation(a, 0, 0);\n    return new THREE.Vector3(0, 0, 0)\n        .applyMatrix4(parentJoint.matrixWorld.clone().multiply(tz).multiply(rx).multiply(tx));\n}\n\nfunction buildLinkCurve(parentJoint, childJoint) {\n    const posA = new THREE.Vector3();\n    const posB = new THREE.Vector3();\n    parentJoint.getWorldPosition(posA);\n    if (childJoint) {\n        childJoint.getWorldPosition(posB);\n    } else {\n        posB.copy(posA);\n    }\n\n    const dh = parentJoint.dh || {};\n    const d = Number.isFinite(dh.d) ? dh.d : 0;\n    const a = Number.isFinite(dh.a) ? dh.a : 0;\n    const alpha = Number.isFinite(dh.alpha) ? dh.alpha : 0;\n\n    const tz = new THREE.Matrix4().makeTranslation(0, 0, d);\n    const rx = new THREE.Matrix4().makeRotationX(alpha);\n    const tx = new THREE.Matrix4().makeTranslation(a, 0, 0);\n\n    const midWorld = new THREE.Vector3(0, 0, 0)\n        .applyMatrix4(parentJoint.matrixWorld.clone().multiply(tz));\n    const endWorld = new THREE.Vector3(0, 0, 0)\n        .applyMatrix4(parentJoint.matrixWorld.clone().multiply(tz).multiply(rx).multiply(tx));\n\n    const endPoint = childJoint && endWorld.distanceTo(posB) > 1e-6 ? posB : endWorld;\n\n    const p0 = posA;\n    const p1 = midWorld;\n    const p2 = endPoint;\n    return new THREE.QuadraticBezierCurve3(p0, p1, p2);\n}\n\nexport function createChainFromDHParameters(dhParameters, mode = 'DH') {\n    const chain = [];\n    let lastNode = null;\n\n    if (mode === 'MDH') {\n        const baseLink = new Link();\n        baseLink.isBase = true;\n        baseLink.applyMDH(0, 0);\n        lastNode = baseLink;\n        chain.push(baseLink);\n\n        for (let i = 0; i < dhParameters.length; i++) {\n            const [theta, d, a, alpha, thetaOffset = 0, minAngle, maxAngle] = dhParameters[i];\n            const thetaConst = theta + thetaOffset;\n\n            let linkNode = baseLink;\n            if (i > 0) {\n                linkNode = new Link();\n                linkNode.applyMDH(a, alpha);\n                lastNode.setChild(linkNode);\n                lastNode = linkNode;\n                chain.push(linkNode);\n            } else {\n                baseLink.applyMDH(a, alpha);\n            }\n\n            const joint = new Joint({ minAngle, maxAngle });\n            if (i === 0) joint.isRoot = true;\n            joint.applyJointMDH(thetaConst, d);\n            joint.dh = { theta: thetaConst, d, a, alpha, thetaOffset };\n\n            lastNode.setChild(joint);\n            lastNode = joint;\n            chain.push(joint);\n        }\n\n        return chain;\n    }\n    for (let i = 0; i < dhParameters.length; i++) {\n        const [theta, d, a, alpha, thetaOffset = 0, minAngle, maxAngle] = dhParameters[i];\n        const thetaValue = theta + thetaOffset;\n\n        const joint = new Joint({ minAngle, maxAngle });\n        if (i === 0) joint.isRoot = true;\n\n        joint.applyJointDH(thetaValue, d, a, alpha);\n\n        if (lastNode) lastNode.setChild(joint);\n        lastNode = joint;\n\n        const link = new Link();\n        link.applyDH(d, a, alpha);\n        link.d = d;\n        link.a = a;\n        joint.setChild(link);\n        lastNode = link;\n\n        chain.push(joint);\n        chain.push(link);\n    }\n\n    return chain;\n}\n\nexport class Chain {\n    constructor(scene) {\n        this.scene = scene;\n        this.robotContainer = null;\n        this.roboticArm = null;\n        this.randomJointColors = [];\n        this.randomJointColorEnabled = false;\n    }\n\n    generate(dhParameters, styleParams, baseParams = {}) {\n        if (this.robotContainer) {\n            this.robotContainer.traverse(child => {\n                if (child.geometry) child.geometry.dispose();\n                if (child.material) child.material.dispose();\n            });\n            this.scene.remove(this.robotContainer);\n        }\n\n        const mode = baseParams.mdhMode ? 'MDH' : 'DH';\n        const baseOffset = baseParams.baseOffset || {};\n        const useConvertedParams = baseParams.useConvertedParams === true;\n        const chainParams = mode === 'MDH' && !useConvertedParams\n            ? ConvertMDH(dhParameters)\n            : dhParameters;\n\n        if (styleParams.randomJointColor) {\n            if (!this.randomJointColorEnabled) {\n                this.randomJointColors = Array.from({ length: dhParameters.length }, () => createSoftRandomColor());\n                this.randomJointColorEnabled = true;\n            } else if (this.randomJointColors.length !== dhParameters.length) {\n                if (this.randomJointColors.length > dhParameters.length) {\n                    this.randomJointColors.length = dhParameters.length;\n                } else {\n                    const missing = dhParameters.length - this.randomJointColors.length;\n                    for (let i = 0; i < missing; i++) {\n                        this.randomJointColors.push(createSoftRandomColor());\n                    }\n                }\n            }\n        } else {\n            this.randomJointColorEnabled = false;\n        }\n\n        this.robotContainer = new THREE.Group();\n        this.scene.add(this.robotContainer);\n\n        this.roboticArm = new THREE.Group();\n        this.robotContainer.add(this.roboticArm);\n\n        if (dhParameters.length === 0) {\n            this.syncAxis(styleParams, baseOffset);\n            return;\n        }\n\n        const chain = createChainFromDHParameters(chainParams, mode);\n        const root = chain[0];\n        this.roboticArm.add(root);\n        root.updateMatrixWorld(true);\n\n        if (mode === 'MDH' && styleParams.showAxisHelper) {\n            const axisSize = Number.isFinite(styleParams.axisHelperSize)\n                ? styleParams.axisHelperSize\n                : 0.1;\n            const baseAxis = new THREE.AxesHelper(axisSize);\n            baseAxis.matrixAutoUpdate = false;\n            this.robotContainer.add(baseAxis);\n        }\n\n        if (mode === 'MDH') {\n            const joints = chain.filter(node => node.isJoint);\n            for (let i = 1; i < joints.length; i++) {\n                const prev = joints[i - 1];\n                const cur = joints[i];\n                const linkNode = cur.parent && cur.parent.isLink ? cur.parent : null;\n                if (!linkNode) continue;\n\n                const posA = new THREE.Vector3();\n                const posB = new THREE.Vector3();\n                const posC = new THREE.Vector3();\n                prev.getWorldPosition(posA);\n                linkNode.getWorldPosition(posB);\n                cur.getWorldPosition(posC);\n\n                if (posA.distanceTo(posC) <= 0) continue;\n                const curve = new THREE.QuadraticBezierCurve3(posA, posB, posC);\n                const tubeGeo = new THREE.TubeGeometry(curve, 50, styleParams.linkRadius, 8, false);\n                const linkColor = styleParams.randomLinkColor ? createSoftRandomColor() : styleParams.linkColor;\n                const tubeMat = new THREE.MeshBasicMaterial({ color: linkColor });\n                const tube = new THREE.Mesh(tubeGeo, tubeMat);\n                this.roboticArm.add(tube);\n            }\n        }\n\n        let jointIndex = 0;\n        root.traverse((node) => {\n            if (mode === 'MDH' && node.isLink) {\n                return;\n            }\n            if (node.isLink) {\n                // Make sure frame helper shows on the end of the link in CDH mode(classic)\n                if (node.parent && node.children.length > 0 && node.children[0].isJoint) {\n                    const child = node.children[0];\n                    const posA = new THREE.Vector3();\n                    node.parent.getWorldPosition(posA);\n                    const posB = new THREE.Vector3();\n                    child.getWorldPosition(posB);\n                    if (posA.distanceTo(posB) > 0) {\n                        const path = buildLinkCurve(node.parent, child);\n                        const tubeGeo = new THREE.TubeGeometry(path, 50, styleParams.linkRadius, 8, false);\n                        const linkColor = styleParams.randomLinkColor ? createSoftRandomColor() : styleParams.linkColor;\n                        const tubeMat = new THREE.MeshBasicMaterial({ color: linkColor });\n                        const tube = new THREE.Mesh(tubeGeo, tubeMat);\n                        this.roboticArm.add(tube);\n                    }\n\n                    if (styleParams.showAxisHelper) {\n                        const axisSize = Number.isFinite(styleParams.axisHelperSize)\n                            ? styleParams.axisHelperSize\n                            : 0.1;\n                        const linkAxis = new THREE.AxesHelper(axisSize);\n                        linkAxis.matrixAutoUpdate = false;\n                        child.updateWorldMatrix(true, false);\n                        linkAxis.applyMatrix4(child.matrixWorld);\n                        this.roboticArm.add(linkAxis);\n                    }\n                } else if (node.parent && node.parent.isJoint) {\n                    const posA = new THREE.Vector3();\n                    node.parent.getWorldPosition(posA);\n                    const endWorld = getDhEndWorld(node.parent);\n                    if (posA.distanceTo(endWorld) > 0) {\n                        const path = buildLinkCurve(node.parent, null);\n                        const tubeGeo = new THREE.TubeGeometry(path, 24, styleParams.linkRadius, 8, false);\n                        const linkColor = styleParams.randomLinkColor ? createSoftRandomColor() : styleParams.linkColor;\n                        const tubeMat = new THREE.MeshBasicMaterial({ color: linkColor });\n                        const tube = new THREE.Mesh(tubeGeo, tubeMat);\n                        this.roboticArm.add(tube);\n                    }\n\n                    if (styleParams.showAxisHelper) {\n                        const axisSize = Number.isFinite(styleParams.axisHelperSize)\n                            ? styleParams.axisHelperSize\n                            : 0.1;\n                        const linkAxis = new THREE.AxesHelper(axisSize);\n                        linkAxis.matrixAutoUpdate = false;\n                        const dh = node.parent.dh || {};\n                        const d = Number.isFinite(dh.d) ? dh.d : 0;\n                        const a = Number.isFinite(dh.a) ? dh.a : 0;\n                        const alpha = Number.isFinite(dh.alpha) ? dh.alpha : 0;\n                        const tz = new THREE.Matrix4().makeTranslation(0, 0, d);\n                        const rx = new THREE.Matrix4().makeRotationX(alpha);\n                        const tx = new THREE.Matrix4().makeTranslation(a, 0, 0);\n                        linkAxis.matrix.copy(node.parent.matrixWorld.clone().multiply(tz).multiply(rx).multiply(tx));\n                        this.roboticArm.add(linkAxis);\n                    }\n                }\n            } else if (node.isJoint) {\n                if (typeof styleParams.showAxisHelper === 'boolean') {\n                    const axisOptions = {};\n                    if (styleParams.axisHelperSize !== undefined) {\n                        axisOptions.size = styleParams.axisHelperSize;\n                    }\n                    node.toggleAxisHelper(styleParams.showAxisHelper, axisOptions);\n                }\n\n                let jointColor = styleParams.jointColor;\n                if (styleParams.randomJointColor) {\n                    jointColor = this.randomJointColors[jointIndex];\n                    if (!jointColor) {\n                        jointColor = createSoftRandomColor();\n                        this.randomJointColors[jointIndex] = jointColor;\n                    }\n                }\n                jointIndex += 1;\n\n                if (typeof styleParams.showDOFHelper === 'boolean') {\n                    const dofOptions = {};\n                    if (styleParams.dofUseJointColor) {\n                        dofOptions.color = jointColor;\n                    } else if (styleParams.dofColor !== undefined) {\n                        dofOptions.color = styleParams.dofColor;\n                    }\n                    if (styleParams.dofOpacity !== undefined) dofOptions.opacity = styleParams.dofOpacity;\n                    if (styleParams.dofUseAutoRadius !== undefined || styleParams.dofRadius !== undefined) {\n                        dofOptions.radius = styleParams.dofUseAutoRadius ? null : styleParams.dofRadius;\n                    }\n                    if (styleParams.dofRadiusScale !== undefined) dofOptions.radiusScale = styleParams.dofRadiusScale;\n                    if (styleParams.dofThicknessRatio !== undefined) dofOptions.thicknessRatio = styleParams.dofThicknessRatio;\n                    if (styleParams.dofSegments !== undefined) dofOptions.segments = styleParams.dofSegments;\n                    if (styleParams.dofOffsetZ !== undefined) dofOptions.offsetZ = styleParams.dofOffsetZ;\n\n                    node.toggleDOFHelper(styleParams.showDOFHelper, dofOptions);\n                }\n\n                const cylGeo = new THREE.CylinderGeometry(styleParams.jointRadius, styleParams.jointRadius, styleParams.jointHeight, 16);\n                const cylMat = new THREE.MeshBasicMaterial({ color: jointColor });\n                const cyl = new THREE.Mesh(cylGeo, cylMat);\n                // Orient cylinder so its axis aligns with the joint's local z (rotation axis)\n                cyl.rotateX(Math.PI / 2);\n                node.updateWorldMatrix(true, false);\n                cyl.applyMatrix4(node.matrixWorld);\n                this.roboticArm.add(cyl);\n            }\n        });\n\n        this.syncAxis(styleParams, baseOffset);\n    }\n\n    update(dhParameters, styleParams, baseParams) {\n        this.generate(dhParameters, styleParams, baseParams);\n    }\n\n    syncAxis(styleParams = {}, baseOffset = {}) {\n        if (this.robotContainer) {\n            if (styleParams.syncUp) {\n                AlignBaseMatrix(this.robotContainer, baseOffset);\n            } else {\n                this.robotContainer.matrixAutoUpdate = false;\n                this.robotContainer.matrix.identity();\n                if (baseOffset) {\n                    const tx = Number.isFinite(baseOffset.x) ? baseOffset.x : 0;\n                    const ty = Number.isFinite(baseOffset.y) ? baseOffset.y : 0;\n                    const tz = Number.isFinite(baseOffset.z) ? baseOffset.z : 0;\n                    this.robotContainer.matrix.setPosition(tx, ty, tz);\n                }\n            }\n        }\n    }\n}\n\nclass ChainSolver {\n\n}\n","import {\n    AxesHelper,\n    Matrix4,\n} from 'three';\nimport { Frame } from './Frame.js';\nimport { DOFHelper } from './Helper.js';\n\nexport class Joint extends Frame {\n\n    constructor(options = {}) {\n\n        super();\n        this.isJoint = true;\n        this.matrixAutoUpdate = false;\n\n        const { minAngle = 0, maxAngle = 360 } = options;\n        this.minAngle = minAngle;\n        this.maxAngle = maxAngle;\n\n        this.helpers = {};\n        this.dh = null;\n        this.mdh = null;\n        this.mode = 'DH';\n\n    }\n\n    // Rz(theta) * Tz(d) * Tx(a) * Rx(alpha), Standard DH: Joint applies only the revolute rotation about its local Z.\n    applyJointDH(theta, d, a, alpha) {\n\n        const m = new Matrix4().makeRotationZ(theta);\n        this.matrix.copy(m);\n\n        this.dh = { theta, d, a, alpha };\n        this.mode = 'DH';\n    }\n\n    // Rx(alpha) * Tx(a) * Rz(theta) * Tz(d), Modified DH: Rz(theta) * Tz(d) applys to Joint in MDH\n    applyJointMDH(theta, d) {\n        const m = new Matrix4().makeRotationZ(theta);\n        m.setPosition(0, 0, Number.isFinite(d) ? d : 0);\n        this.matrix.copy(m);\n\n        this.mdh = { theta, d };\n        this.mode = 'MDH';\n    }\n    getAutoSize() {\n        // Heuristic used by helpers for \"relative\" sizing.\n        // Prefer link offset (child Link) if available.\n        const child = this.children.find((c) => c && c.isLink);\n        if (child && child.matrix && Array.isArray(child.matrix.elements)) {\n            const e = child.matrix.elements;\n            // Matrix4 elements[12..14] are the translation (tx, ty, tz) in column-major order.\n            const tx = e[12] || 0;\n            const ty = e[13] || 0;\n            const tz = e[14] || 0;\n            // Use the translation length as a proxy for link length from this joint to its child.\n            const len = Math.sqrt(tx * tx + ty * ty + tz * tz);\n            if (Number.isFinite(len) && len > 0) return len;\n        }\n\n        if (this.dh && (Number.isFinite(this.dh.a) || Number.isFinite(this.dh.d))) {\n            const a = Number.isFinite(this.dh.a) ? this.dh.a : 0;\n            const d = Number.isFinite(this.dh.d) ? this.dh.d : 0;\n            const len = Math.sqrt(a * a + d * d);\n            if (Number.isFinite(len) && len > 0) return len;\n        }\n\n        return 1;\n    }\n\n    toggleAxisHelper(visible, options = {}) {\n        if (!this.helpers) this.helpers = {};\n\n        const requestedSize = Number.isFinite(options.size) ? options.size : null;\n        const fallbackSize = this.getAutoSize() * 0.25;\n        const nextSize = requestedSize === null ? fallbackSize : requestedSize;\n\n        if (!this.helpers.axis) {\n            this.helpers.axis = new AxesHelper(nextSize);\n            this.helpers.axis.userData.size = nextSize;\n            this.helpers.axis.visible = false;\n            this.add(this.helpers.axis);\n        } else if (Number.isFinite(nextSize) && this.helpers.axis.userData.size !== nextSize) {\n            this.helpers.axis.geometry.dispose();\n            this.helpers.axis.material.dispose();\n            this.remove(this.helpers.axis);\n            this.helpers.axis = new AxesHelper(nextSize);\n            this.helpers.axis.userData.size = nextSize;\n            this.helpers.axis.visible = false;\n            this.add(this.helpers.axis);\n        }\n\n        if (typeof visible === 'boolean') {\n            this.helpers.axis.visible = visible;\n        } else {\n            this.helpers.axis.visible = !this.helpers.axis.visible;\n        }\n\n        return this.helpers.axis;\n    }\n\n    toggleDOFHelper(visible, options = {}) {\n        if (!this.helpers) this.helpers = {};\n\n        if (!this.helpers.DOF) {\n            if (typeof visible === 'boolean' && visible === false) {\n                return null;\n            }\n\n            this.helpers.DOF = new DOFHelper(this, options);\n            this.helpers.DOF.visible = false;\n            this.helpers.DOF.matrixAutoUpdate = false;\n            this.add(this.helpers.DOF);\n        } else if (options && typeof options === 'object') {\n            Object.assign(this.helpers.DOF.config, options);\n        }\n\n        const nextVisible =\n            typeof visible === 'boolean' ? visible : !this.helpers.DOF.visible;\n        this.helpers.DOF.visible = nextVisible;\n\n        if (nextVisible) {\n            this.helpers.DOF.update();\n            if (this.mode === 'MDH') {\n                const rotOnly = new Matrix4().extractRotation(this.matrix).invert();\n                this.helpers.DOF.matrix.copy(rotOnly);\n            } else {\n                this.helpers.DOF.matrix.copy(this.matrix).invert();\n            }\n            this.helpers.DOF.matrixWorldNeedsUpdate = true;\n        }\n\n        return this.helpers.DOF;\n    }\n\n    setChild(child) {\n\n        if (child.isLink && this.children.length == 0) {\n\n            this.add(child);\n        }\n\n    }\n\n\n}\n","import { Object3D } from \"three\";\n\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport { RAD2DEG } from './Constants.js';\n\n\nexport class Frame extends Object3D {\n\n    constructor() {\n\n        super();\n\n        this.position.set(0, 0, 0);\n        this.quaternion.set(0, 0, 0, 1);\n        this.matrixAutoUpdate = true;\n\n    }\n\n    \n\n}","const PI = Math.PI;\nconst PI2 = 2 * PI;\nconst HALF_PI = PI / 2;\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 1 / DEG2RAD;\n\nexport { PI, PI2, HALF_PI, DEG2RAD, RAD2DEG };","import {\n    TubeGeometry,\n    CatmullRomCurve3,\n    Vector3,\n    MeshBasicMaterial,\n    Mesh,\n    CylinderGeometry,\n    AxesHelper,\n    DoubleSide,\n    MathUtils,\n    Object3D,\n    RingGeometry,\n} from 'three';\n\nimport { HALF_PI } from './Constants.js';\nimport { clampMinSize, normalizeSpanDeg } from './Utils.js';\n\nconst AXIS_NAMES = {\n    X: 'x',\n    Y: 'y',\n    Z: 'z',\n};\n\nconst COLOR = 0x0092ff;\nconst LINK_SIZE = {\n    tubularSegments: 64,\n    radius: 0.001,\n    radialSegments: 8,\n};\nconst JOINT_SIZE = {\n    radius: 0.01,\n    height: 0.05,\n    radialSegments: 8,\n};\n\nexport class DOFHelper extends Object3D {\n    constructor(joint, options = {}) {\n        super();\n\n        this.isDOFHelper = true;\n        this.joint = joint;\n\n        this.config = {\n            color: 0xffa500,\n            opacity: 0.25,\n            radius: null,\n            radiusScale: 0.25,\n            thicknessRatio: 0.3,\n            segments: 64,\n            offsetZ: 1e-4,\n            ...options,\n        };\n\n        this._material = new MeshBasicMaterial({\n            color: this.config.color,\n            transparent: true,\n            opacity: this.config.opacity,\n            side: DoubleSide,\n            depthWrite: false,\n        });\n\n        this._mesh = new Mesh(new RingGeometry(0, 1, 3), this._material);\n        this.add(this._mesh);\n\n        this.update();\n    }\n\n    update() {\n        const { minAngle, maxAngle } = this.joint;\n        const spanDeg = normalizeSpanDeg(minAngle, maxAngle);\n\n        const thetaStart = MathUtils.degToRad(Number.isFinite(minAngle) ? minAngle : 0);\n        const thetaLength = MathUtils.degToRad(spanDeg);\n\n        const outerRadius =\n            Number.isFinite(this.config.radius) && this.config.radius !== null\n                ? clampMinSize(this.config.radius, 0)\n                : clampMinSize(this.joint.getAutoSize() * this.config.radiusScale, 1e-4);\n\n        const thicknessRatio = Number.isFinite(this.config.thicknessRatio)\n            ? MathUtils.clamp(this.config.thicknessRatio, 0, 1)\n            : 0.3;\n\n        const innerRadius = Math.max(0, outerRadius * (1 - thicknessRatio));\n\n        const segments = Number.isFinite(this.config.segments)\n            ? Math.max(3, Math.floor(this.config.segments))\n            : 64;\n\n        const geometry = new RingGeometry(\n            innerRadius,\n            outerRadius,\n            segments,\n            1,\n            thetaStart,\n            thetaLength\n        );\n\n        this._mesh.geometry.dispose();\n        this._mesh.geometry = geometry;\n        this._mesh.position.set(0, 0, Number.isFinite(this.config.offsetZ) ? this.config.offsetZ : 0);\n\n        this._material.color.set(this.config.color);\n        this._material.opacity = Number.isFinite(this.config.opacity) ? this.config.opacity : 0.25;\n        this._material.transparent = this._material.opacity < 1;\n\n        return this;\n    }\n\n    dispose() {\n        this._mesh.geometry.dispose();\n        this._material.dispose();\n    }\n}\n\nclass IKHelper {\n    constructor(ikChain, config = {}) {\n        this.ikJoints = ikChain.ikJoints;\n        this.config = config;\n        this.linkMaterial = this._createLinkMaterial();\n        this.jointMaterial = this._createJointMaterial();\n    }\n\n    visualizeIKChain() {\n        const jointGeometry = this._createJointGeometry();\n\n        let parent = this.ikJoints[0].parent;\n\n        for (let idx = 0; idx < this.ikJoints.length; idx++) {\n            const ikJoint = this.ikJoints[idx];\n\n            const linkGeometry = this._createLinkGeometry(ikJoint.position);\n            const link = new Mesh(linkGeometry, this.linkMaterial);\n            parent.add(link);\n\n            parent = ikJoint;\n\n            if (idx === 0 || idx === this.ikJoints.length - 1) {\n                continue;\n            }\n\n            const joint = new Mesh(jointGeometry, this.jointMaterial);\n\n            if (ikJoint.axisName === AXIS_NAMES.Z) {\n                joint.rotateX(HALF_PI);\n            }\n\n            const axesHelper = new AxesHelper(0.1);\n            ikJoint.add(axesHelper);\n\n            ikJoint.add(joint);\n        }\n    }\n\n    _createLinkGeometry(endPoint) {\n        const startPoint = new Vector3(0, 0, 0);\n        const linkPathPoints = [startPoint, endPoint];\n        const linkPath = new CatmullRomCurve3(linkPathPoints);\n        const radius = this.config.linkWidth / 2 || LINK_SIZE.radius;\n        const radialSegments =\n            this.config.linkRoundness || LINK_SIZE.radialSegments;\n        return new TubeGeometry(\n            linkPath,\n            LINK_SIZE.tubularSegments,\n            radius,\n            radialSegments\n        );\n    }\n\n    _createLinkMaterial() {\n        const material = new MeshBasicMaterial({\n            color: this.config.linkColor || COLOR,\n        });\n        return material;\n    }\n\n    _createJointGeometry() {\n        const radiusTop = this.config.jointRadius || JOINT_SIZE.radius;\n        const radiusBottom = radiusTop;\n        const height = this.config.jointHeight || JOINT_SIZE.height;\n        const radialSegments =\n            this.config.jointRoundness || JOINT_SIZE.radialSegments;\n        return new CylinderGeometry(\n            radiusTop,\n            radiusBottom,\n            height,\n            radialSegments\n        );\n    }\n\n    _createJointMaterial() {\n        const material = new MeshBasicMaterial({\n            color: this.config.JointColor || COLOR,\n        });\n        return material;\n    }\n}\n\nexport default IKHelper;\n","import { Matrix4 } from \"three\";\n\n/*\n* \n* Align\nThree.js World:\n      Y \n        |\n        |\n        o X \n       /\n      Z (toward viewer)\n* with\nRobot World:\n    Z \n    |\n    |\n    o Y \n    /\n    X (toward viewer)\n*/\nexport function AlignBaseMatrix(container, offset = {}) {\n    // Rotate robot Z-up frame to three.js Y-up: R = Rx(-90deg)\n    const A = new Matrix4().set(\n        1, 0, 0, 0,\n        0, 0, 1, 0,\n        0, -1, 0, 0,\n        0, 0, 0, 1\n    );\n    const tx = Number.isFinite(offset.x) ? offset.x : 0;\n    const ty = Number.isFinite(offset.y) ? offset.y : 0;\n    const tz = Number.isFinite(offset.z) ? offset.z : 0;\n    const T = new Matrix4().makeTranslation(tx, ty, tz);\n    container.matrixAutoUpdate = false;\n    container.matrix.copy(A).multiply(T);\n}\n\nexport function normalizeSpanDeg(minAngleDeg, maxAngleDeg) {\n    const min = Number.isFinite(minAngleDeg) ? minAngleDeg : 0;\n    const max = Number.isFinite(maxAngleDeg) ? maxAngleDeg : 360;\n\n    const rawSpan = max - min;\n    if (rawSpan >= 360 || rawSpan <= -360) return 360;\n\n    let span = ((rawSpan % 360) + 360) % 360;\n    if (span === 0 && max !== min) span = 360;\n\n    return span;\n}\n\nexport function clampMinSize(value, minValue) {\n    return Number.isFinite(value) ? Math.max(minValue, value) : minValue;\n}\n\nfunction normalizeDhParam(item) {\n    if (Array.isArray(item)) {\n        const [\n            theta = 0,\n            d = 0,\n            a = 0,\n            alpha = 0,\n            thetaOffset = 0,\n            minAngle = -185,\n            maxAngle = 185\n        ] = item;\n        return { theta, d, a, alpha, thetaOffset, minAngle, maxAngle };\n    }\n    if (item && typeof item === 'object') {\n        return {\n            theta: Number.isFinite(item.theta) ? item.theta : 0,\n            d: Number.isFinite(item.d) ? item.d : 0,\n            a: Number.isFinite(item.a) ? item.a : 0,\n            alpha: Number.isFinite(item.alpha) ? item.alpha : 0,\n            thetaOffset: Number.isFinite(item.thetaOffset) ? item.thetaOffset : 0,\n            minAngle: Number.isFinite(item.minAngle) ? item.minAngle : -185,\n            maxAngle: Number.isFinite(item.maxAngle) ? item.maxAngle : 185\n        };\n    }\n    return { theta: 0, d: 0, a: 0, alpha: 0, thetaOffset: 0, minAngle: -185, maxAngle: 185 };\n}\n\nexport function ConvertMDH(params) {\n    const dhParams = Array.isArray(params) ? params : [];\n    const result = [];\n    const n = dhParams.length;\n\n    for (let i = 0; i < n; i++) {\n        const cur = normalizeDhParam(dhParams[i]);\n        const prev = i > 0 ? normalizeDhParam(dhParams[i - 1]) : null;\n        const a = i === 0 ? 0 : prev.a;\n        const alpha = i === 0 ? 0 : prev.alpha;\n        result.push([cur.theta, cur.d, a, alpha, cur.thetaOffset, cur.minAngle, cur.maxAngle]);\n    }\n\n    if (n > 0) {\n        const last = normalizeDhParam(dhParams[n - 1]);\n        result.push([0, 0, last.a, last.alpha, 0, -185, 185]);\n    }\n\n    return result;\n}\n\nexport function ConvertDH(params) {\n    const mdhParams = Array.isArray(params) ? params : [];\n    const m = mdhParams.length;\n    const result = [];\n    const n = Math.max(0, m - 1);\n\n    for (let i = 0; i < n; i++) {\n        const cur = normalizeDhParam(mdhParams[i]);\n        const next = normalizeDhParam(mdhParams[i + 1]);\n        result.push([cur.theta, cur.d, next.a, next.alpha, cur.thetaOffset, cur.minAngle, cur.maxAngle]);\n    }\n\n    return result;\n}\n","\nimport { Matrix4 } from 'three'\nimport { Frame } from './Frame.js'\n\nexport class Link extends Frame {\n\n    constructor() {\n        super();\n        this.isLink = true;\n        this.matrixAutoUpdate = false;\n    }\n\n    applyDH(d, a, alpha) {\n\n        const Tz = new Matrix4().makeTranslation(0, 0, d);\n        const Rx = new Matrix4().makeRotationX(alpha);\n        const Tx = new Matrix4().makeTranslation(a, 0, 0);\n\n        const m = Tz.multiply(Rx).multiply(Tx);\n        this.matrix.copy(m);\n        return m;\n    }\n\n    applyMDH(a, alpha) {\n        const Rx = new Matrix4().makeRotationX(alpha);\n        const Tx = new Matrix4().makeTranslation(a, 0, 0);\n\n        const m = Rx.multiply(Tx);\n        this.matrix.copy(m);\n        return m;\n    }\n\n    setChild(child) {\n\n        if (this.children.length !== 0) {\n            return;\n        }\n\n        const canAttachJoint = child.isJoint === true;\n        const canAttachLink = this.isBase === true && child.isLink === true;\n\n        if (canAttachJoint || canAttachLink) {\n            this.add(child);\n        }\n\n    }\n\n\n}\n"],"names":["$272bbf19d32de2d1$var$scene","$272bbf19d32de2d1$var$camera","$272bbf19d32de2d1$var$renderer","$272bbf19d32de2d1$var$controls","$272bbf19d32de2d1$var$gui","$272bbf19d32de2d1$var$createFolder","$272bbf19d32de2d1$var$armsFolder","$272bbf19d32de2d1$var$styleFolder","$272bbf19d32de2d1$var$chain","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$jw0R5","$2sw9m","$7DqNw","$0d7ae239813254c0$export$b89a827e9254211a","Object3D","constructor","position","set","quaternion","matrixAutoUpdate","$cc9203ea1021248e$export$5c973e8d23d27820","value","minValue","Number","isFinite","Math","max","$cc9203ea1021248e$var$normalizeDhParam","item","Array","isArray","theta","d","a","alpha","thetaOffset","minAngle","maxAngle","$cc9203ea1021248e$export$9fa59164a0b6efa","params","dhParams","result","n","length","i","cur","prev","push","last","$557de8c9eca27cd9$export$9a2818be0b3f7de4","joint","options","isDOFHelper","config","color","opacity","radius","radiusScale","thicknessRatio","segments","offsetZ","_material","MeshBasicMaterial","transparent","side","DoubleSide","depthWrite","_mesh","Mesh","RingGeometry","add","update","spanDeg","minAngleDeg","maxAngleDeg","min","rawSpan","span","thetaStart","MathUtils","degToRad","thetaLength","outerRadius","getAutoSize","innerRadius","clamp","floor","geometry","dispose","$b21e124fb279814b$export$6a0d2ab5fd042395","isJoint","helpers","dh","mdh","mode","applyJointDH","m","Matrix4","makeRotationZ","matrix","copy","applyJointMDH","setPosition","child","children","find","c","isLink","elements","e","tx","ty","tz","len","sqrt","toggleAxisHelper","visible","requestedSize","size","fallbackSize","nextSize","axis","userData","material","remove","AxesHelper","toggleDOFHelper","DOF","Object","assign","nextVisible","rotOnly","extractRotation","invert","matrixWorldNeedsUpdate","setChild","$0ce2f041b042c3f2$export$a6c7ac8248d6e38a","applyDH","Tz","makeTranslation","Rx","makeRotationX","Tx","multiply","applyMDH","canAttachJoint","canAttachLink","isBase","$89c94bbe9b6f020e$var$createSoftRandomColor","Color","hue","random","saturation","lightness","setHSL","$89c94bbe9b6f020e$var$buildLinkCurve","parentJoint","childJoint","posA","Vector3","posB","getWorldPosition","rx","midWorld","applyMatrix4","matrixWorld","clone","endWorld","endPoint","distanceTo","QuadraticBezierCurve3","$89c94bbe9b6f020e$export$f18d5acc27d70423","scene","robotContainer","roboticArm","randomJointColors","randomJointColorEnabled","generate","dhParameters","styleParams","baseParams","traverse","mdhMode","baseOffset","useConvertedParams","chainParams","randomJointColor","missing","from","Group","syncAxis","chain","$89c94bbe9b6f020e$export$3f593b3a198b46c3","lastNode","baseLink","thetaConst","linkNode","isRoot","thetaValue","link","root","updateMatrixWorld","showAxisHelper","axisSize","axisHelperSize","baseAxis","joints","filter","node","parent","posC","curve","tubeGeo","TubeGeometry","linkRadius","linkColor","randomLinkColor","tubeMat","tube","jointIndex","path","linkAxis","updateWorldMatrix","$89c94bbe9b6f020e$var$getDhEndWorld","axisOptions","undefined","jointColor","showDOFHelper","dofOptions","dofUseJointColor","dofColor","dofOpacity","dofUseAutoRadius","dofRadius","dofRadiusScale","dofThicknessRatio","dofSegments","dofOffsetZ","cylGeo","CylinderGeometry","jointRadius","jointHeight","cylMat","cyl","rotateX","PI","syncUp","container","offset","A","x","y","z","T","identity","$272bbf19d32de2d1$var$suppressUpdate","$272bbf19d32de2d1$var$styleParams","$272bbf19d32de2d1$var$defaultStyleParams","JSON","parse","stringify","$272bbf19d32de2d1$var$baseParams","$272bbf19d32de2d1$var$resetStyles","$272bbf19d32de2d1$var$saveStyles","$272bbf19d32de2d1$var$updateArm","controllers","forEach","updateDisplay","localStorage","setItem","$272bbf19d32de2d1$var$loadStyles","savedStyles","getItem","$272bbf19d32de2d1$var$createParams","armSegments","reset","folders","folder","destroy","addArmSegment","initialParams","linkIndex","armParams","name","armFolder","addFolder","armIndex","indexOf","splice","onFinishChange","open","domElement","scrollTop","scrollHeight","$272bbf19d32de2d1$var$rebuildSegmentsFromArray","paramArray","$272bbf19d32de2d1$var$presets","$272bbf19d32de2d1$var$loadPreset","preset","paramsArray","map","$272bbf19d32de2d1$var$demoParams","segment","$272bbf19d32de2d1$var$init","Scene","PerspectiveCamera","window","innerWidth","innerHeight","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","setClearColor","document","body","appendChild","OrbitControls","target","gridHelper","GridHelper","GUI","style","right","left","top","margin","maxHeight","overflow","demoFolder","baseFolder","converted","mdhParams","next","baseOffsetFolder","jointsLinksFolder","addColor","onChange","helpersFolder","axisFolder","dofFolder","addEventListener","windwoWidth","windowHeight","aspect","updateProjectionMatrix","resolution","$272bbf19d32de2d1$var$animate","requestAnimationFrame","render"],"version":3,"file":"dhLinks.853d9ce0.js.map"}