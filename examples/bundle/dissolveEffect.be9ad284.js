let t,e,i,r,s,a,n,o,h;import"./buildingAnimation.5423aa82.js";import"./buildingAnimation.4b8d4fc8.js";var l=globalThis,d={},u={},c=l.parcelRequire1149;null==c&&((c=function(t){if(t in d)return d[t].exports;if(t in u){var e=u[t];delete u[t];var i={id:t,exports:{}};return d[t]=i,e.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){u[t]=e},l.parcelRequire1149=c),(0,c.register)("82VHk",function(t,e){Object.defineProperty(t.exports,"default",{get:()=>r,set:void 0,enumerable:!0,configurable:!0});var i=function(){var t=0,e=document.createElement("div");function r(t){return e.appendChild(t.dom),t}function s(i){for(var r=0;r<e.children.length;r++)e.children[r].style.display=r===i?"block":"none";t=i}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(i){i.preventDefault(),s(++t%e.children.length)},!1);var a=(performance||Date).now(),n=a,o=0,h=r(new i.Panel("FPS","#0ff","#002")),l=r(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=r(new i.Panel("MB","#f08","#201"));return s(0),{REVISION:16,dom:e,addPanel:r,showPanel:s,begin:function(){a=(performance||Date).now()},end:function(){o++;var t=(performance||Date).now();if(l.update(t-a,200),t>=n+1e3&&(h.update(1e3*o/(t-n),100),n=t,o=0,d)){var e=performance.memory;d.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){a=this.end()},domElement:e,setMode:s}};i.Panel=function(t,e,i){var r=1/0,s=0,a=Math.round,n=a(window.devicePixelRatio||1),o=80*n,h=48*n,l=3*n,d=2*n,u=3*n,c=15*n,f=74*n,m=30*n,p=document.createElement("canvas");p.width=o,p.height=h,p.style.cssText="width:80px;height:48px";var g=p.getContext("2d");return g.font="bold "+9*n+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=i,g.fillRect(0,0,o,h),g.fillStyle=e,g.fillText(t,l,d),g.fillRect(u,c,f,m),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(u,c,f,m),{dom:p,update:function(h,x){r=Math.min(r,h),s=Math.max(s,h),g.fillStyle=i,g.globalAlpha=1,g.fillRect(0,0,o,c),g.fillStyle=e,g.fillText(a(h)+" "+t+" ("+a(r)+"-"+a(s)+")",l,d),g.drawImage(p,u+n,c,f-n,m,u,c,f-n,m),g.fillRect(u+f-n,c,n,m),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(u+f-n,c,n,a((1-h/x)*m))}}};var r=i});var f=c("jw0R5"),m=c("ihXk0"),p=c("2sw9m");let g={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},x=new class{constructor(t,e,i){let r,s=this,a=!1,n=0,o=0,h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===a&&void 0!==s.onStart&&s.onStart(t,n,o),a=!0},this.itemEnd=function(t){n++,void 0!==s.onProgress&&s.onProgress(t,n,o),n===o&&(a=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(t){void 0!==s.onError&&s.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){let e=h.indexOf(t);return -1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=h.length;e<i;e+=2){let i=h[e],r=h[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}};class y{constructor(t){this.manager=void 0!==t?t:x,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let i=this;return new Promise(function(r,s){i.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}function v(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}y.DEFAULT_MATERIAL_NAME="__DEFAULT",Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let w={};function M(t){t in w||(w[t]=!0,console.warn(t))}class S extends y{constructor(t){super(t)}load(t,e,i,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);let s=this,a=g.get(t);if(void 0!==a)return s.manager.itemStart(t),setTimeout(function(){e&&e(a),s.manager.itemEnd(t)},0),a;let n=v("img");function o(){l(),g.add(t,this),e&&e(this),s.manager.itemEnd(t)}function h(e){l(),r&&r(e),s.manager.itemError(t),s.manager.itemEnd(t)}function l(){n.removeEventListener("load",o,!1),n.removeEventListener("error",h,!1)}return n.addEventListener("load",o,!1),n.addEventListener("error",h,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(n.crossOrigin=this.crossOrigin),s.manager.itemStart(t),n.src=t,n}}class b{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});let i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;let i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;let i=this._listeners[t];if(void 0!==i){let t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;let e=this._listeners[t.type];if(void 0!==e){t.target=this;let i=e.slice(0);for(let e=0,r=i.length;e<r;e++)i[e].call(this,t);t.target=null}}}let T="srgb",E=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function A(){let t=0xffffffff*Math.random()|0,e=0xffffffff*Math.random()|0,i=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0;return(E[255&t]+E[t>>8&255]+E[t>>16&255]+E[t>>24&255]+"-"+E[255&e]+E[e>>8&255]+"-"+E[e>>16&15|64]+E[e>>24&255]+"-"+E[63&i|128]+E[i>>8&255]+"-"+E[i>>16&255]+E[i>>24&255]+E[255&r]+E[r>>8&255]+E[r>>16&255]+E[r>>24&255]).toLowerCase()}class C{constructor(t=0,e=0){C.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:Math.acos(Math.max(-1,Math.min(1,this.dot(t)/e)))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,a=this.y-t.y;return this.x=s*i-a*r+t.x,this.y=s*r+a*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class L{constructor(t,e,i,r,s,a,n,o,h){L.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,i,r,s,a,n,o,h)}set(t,e,i,r,s,a,n,o,h){let l=this.elements;return l[0]=t,l[1]=r,l[2]=n,l[3]=e,l[4]=s,l[5]=o,l[6]=i,l[7]=a,l[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,s=this.elements,a=i[0],n=i[3],o=i[6],h=i[1],l=i[4],d=i[7],u=i[2],c=i[5],f=i[8],m=r[0],p=r[3],g=r[6],x=r[1],y=r[4],v=r[7],w=r[2],M=r[5],S=r[8];return s[0]=a*m+n*x+o*w,s[3]=a*p+n*y+o*M,s[6]=a*g+n*v+o*S,s[1]=h*m+l*x+d*w,s[4]=h*p+l*y+d*M,s[7]=h*g+l*v+d*S,s[2]=u*m+c*x+f*w,s[5]=u*p+c*y+f*M,s[8]=u*g+c*v+f*S,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],a=t[4],n=t[5],o=t[6],h=t[7],l=t[8];return e*a*l-e*n*h-i*s*l+i*n*o+r*s*h-r*a*o}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],a=t[4],n=t[5],o=t[6],h=t[7],l=t[8],d=l*a-n*h,u=n*o-l*s,c=h*s-a*o,f=e*d+i*u+r*c;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);let m=1/f;return t[0]=d*m,t[1]=(r*h-l*i)*m,t[2]=(n*i-r*a)*m,t[3]=u*m,t[4]=(l*e-r*o)*m,t[5]=(r*s-n*e)*m,t[6]=c*m,t[7]=(i*o-h*e)*m,t[8]=(a*e-i*s)*m,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,a,n){let o=Math.cos(s),h=Math.sin(s);return this.set(i*o,i*h,-i*(o*a+h*n)+a+t,-r*h,r*o,-r*(-h*a+o*n)+n+e,0,0,1),this}scale(t,e){return this.premultiply(P.makeScale(t,e)),this}rotate(t){return this.premultiply(P.makeRotation(-t)),this}translate(t,e){return this.premultiply(P.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}let P=new L;function U(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}class F{static getDataURL(e){let i;if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)i=e;else{void 0===t&&(t=v("canvas")),t.width=e.width,t.height=e.height;let r=t.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=t}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){let e=v("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let t=0;t<s.length;t++)s[t]=255*U(s[t]/255);return i.putImageData(r,0,0),e}if(!t.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t;{let e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*U(e[t]/255)):e[t]=U(e[t]);return{data:e,width:t.width,height:t.height}}}}let R=0;class D{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:R++}),this.uuid=A(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){let e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,i=r.length;e<i;e++)r[e].isDataTexture?t.push(I(r[e].image)):t.push(I(r[e]))}else t=I(r);i.url=t}return e||(t.images[this.uuid]=i),i}}function I(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?F.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let O=0;class _ extends b{constructor(t=_.DEFAULT_IMAGE,e=_.DEFAULT_MAPPING,i=1001,r=1001,s=1006,a=1008,n=1023,o=1009,h=_.DEFAULT_ANISOTROPY,l=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:O++}),this.uuid=A(),this.name="",this.source=new D(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=n,this.internalFormat=null,this.type=o,this.offset=new C(0,0),this.repeat=new C(1,1),this.center=new C(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new L,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof l?this.colorSpace=l:(M("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===l?T:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];let i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return M("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===T?3001:3e3}set encoding(t){M("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===t?T:""}}_.DEFAULT_IMAGE=null,_.DEFAULT_MAPPING=300,_.DEFAULT_ANISOTROPY=1;class H extends y{constructor(t){super(t)}load(t,e,i,r){let s=new _,a=new S(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(t){s.image=t,s.needsUpdate=!0,void 0!==e&&e(s)},i,r),s}}var k=c("7DqNw"),V=c("82VHk");let N=(0,c("2Tb7o").getAssetURL)(),q=N+"models/soldier.glb",z=1/30,j=window.innerWidth,B=window.innerHeight,W={center:new f.Vector3,min:new f.Vector3,max:new f.Vector3},G=0,Y=[],J=!1,X={times:"repeat",edgeColor:0xfa9200,edgeWidth:.1,dissolveSpeed:.01,dissolveProgress:0,noiseTexture:new H().load(N+"textures/noise.png"),edgeColorTexture:new H().load(N+"textures/fire.jpg"),appear:function(){if(!J)for(let t of(J=!0,Z=X.dissolveSpeed,Y))t.uniforms.dissolveSpeed={value:Z},t.uniforms.dissolveProgress={value:0}},disappear:function(){if(!J)for(let t of(J=!0,Z=-X.dissolveSpeed,Y))t.uniforms.dissolveSpeed={value:Z},t.uniforms.dissolveProgress={value:1}}},Z=X.dissolveSpeed;(r=new f.WebGLRenderer({antialias:!1})).setPixelRatio(window.devicePixelRatio),r.setSize(j,B),r.setClearColor(1118481,1),r.shadowMap.enabled=!0,r.shadowMap.type=f.PCFSoftShadowMap,document.body.appendChild(r.domElement),(i=new f.Scene).add(new f.AmbientLight(0xf0f0f0,3)),e=new f.PerspectiveCamera(70,j/B,.1,1e3),i.add(e),s=new p.OrbitControls(e,r.domElement),n=new f.Clock,o=new V.default,document.body.appendChild(o.dom),new(0,m.GLTFLoader)().load(q,function(t){let n=t.scene;n.frustumCulled=!1,n.traverse(t=>{if(t.isMesh){t.castShadow=!0,t.receiveShadow=!0,t.frustumCulled=!1;let e=t.material;e.transparent=!0,e.onBeforeCompile=t=>{Y.push(t),function(t,e=1){function i(t){t.uniforms.edgeColor={value:new f.Color(X.edgeColor)},t.uniforms.edgeWidth={value:X.edgeWidth},t.uniforms.dissolveSpeed={value:X.dissolveSpeed},t.uniforms.dissolveProgress={value:X.dissolveProgress},t.uniforms.noiseTexture={value:X.noiseTexture},t.uniforms.edgeColorTexture={value:X.edgeColorTexture},t.vertexShader=t.vertexShader.replace("#include <common>","varying vec2 xUv;\n#include <common>"),t.vertexShader=t.vertexShader.replace("#include <uv_vertex>","xUv = uv;\n#include <uv_vertex>"),t.fragmentShader=t.fragmentShader.replace("#include <common>",`
        #include <common>
        uniform float dissolveProgress;
        uniform float edgeWidth;
        uniform vec3 edgeColor;
        uniform sampler2D noiseTexture;
        uniform sampler2D edgeColorTexture;
        varying vec2 xUv;
    `)}[function(t){i(t),t.fragmentShader=t.fragmentShader.replace("#include <dithering_fragment>",`
            #include <dithering_fragment>
            float noiseValue = texture2D(noiseTexture, xUv).r;
            vec4 finalColor = linearToOutputTexel( vec4(edgeColor, gl_FragColor.a) );
            if(noiseValue > dissolveProgress)
            {
                discard;
            }
            
            if(noiseValue + edgeWidth > dissolveProgress){
                gl_FragColor = vec4(finalColor.rgb, 1.0);
            }
        `)},function(t){i(t),t.fragmentShader=t.fragmentShader.replace("#include <dithering_fragment>",`
            #include <dithering_fragment>
            float noiseValue = texture2D(noiseTexture, xUv).r;
            
            vec4 finalColor = texture2D(edgeColorTexture, xUv);
            // vec4 finalColor = linearToOutputTexel( vec4(edgeColor, gl_FragColor.a) );

            float alpha = step(noiseValue - edgeWidth, dissolveProgress);
            gl_FragColor.a = alpha;

            float useOrigin = step(noiseValue, dissolveProgress);
            gl_FragColor.rgb = mix(finalColor.rgb, gl_FragColor.rgb, useOrigin);

        `)}][e](t)}(t)}}}),i.add(n),(h=new k.GUI).addColor(X,"edgeColor").onChange(t=>{for(let e of Y)e.uniforms.edgeColor={value:new f.Color(t)}}),h.add(X,"edgeWidth",.01,1).step(.01).onChange(t=>{for(let e of Y)e.uniforms.edgeWidth={value:t}}),h.add(X,"dissolveSpeed",.01,.1).step(.01),h.add(X,"appear"),h.add(X,"disappear");let o=t.animations;if(a=new f.AnimationMixer(n),o&&o.length>0){let t=a.clipAction(o[3]);t.play(),t.paused=!1}let l=new f.Mesh(new f.PlaneGeometry,new f.ShadowMaterial({color:0xffffff,opacity:.25,transparent:!0}));l.rotation.x=-Math.PI/2,l.receiveShadow=!0,l.scale.setScalar(50),i.add(l);let d=new f.Box3;d.setFromObject(n);let u=d.getSize(new f.Vector3),c=new f.Vector3,m=d.getCenter(c);c.y+=2*u.y,s.target=c,W.min=d.min,W.max=d.max,W.center=m,W.size=u,e.position.x=m.x-5*u.x,e.position.y=m.y+5*u.y,e.position.z=m.z-5*u.z,e.updateProjectionMatrix(),s.update();let p=new f.DirectionalLight(0xffffff,5);p.position.copy(e.position),p.castShadow=!0,p.lookAt(c.x,c.y,c.z),p.angle=.2*Math.PI,p.decay=0,p.shadow.mapSize.setScalar(1024);let g=p.shadow.camera;g.near=.01,g.far=2e3,g.bias=1e-5,g.left=g.bottom=-10,g.right=g.top=10,i.add(p),window.addEventListener("resize",t=>{j=window.innerWidth,B=window.innerHeight,e.aspect=j/B,e.updateProjectionMatrix(),r.setSize(j,B)})},function(t){},function(t){console.log(t)}),function t(){requestAnimationFrame(t);let s=n.getDelta(),h=Math.min(s,z);if((G+=s)>z){if(o.update(),a&&a.update(h),J)for(let t of Y){let{dissolveProgress:e,dissolveSpeed:i}=t.uniforms;e.value+=i.value,e.value<0&&(J=!1),e.value>1&&(J=!1)}r.render(i,e),G%=z}}();
//# sourceMappingURL=dissolveEffect.be9ad284.js.map
