let e,t,n,a,o,i,r;import"./buildingAnimation.f3f83e55.js";import"./buildingAnimation.bd798f01.js";import"./buildingAnimation.4b8d4fc8.js";import"./buildingAnimation.dc0cc84b.js";function s(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var l=globalThis,d={},c={},u=l.parcelRequire1149;null==u&&((u=function(e){if(e in d)return d[e].exports;if(e in c){var t=c[e];delete c[e];var n={id:e,exports:{}};return d[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){c[e]=t},l.parcelRequire1149=u);var p=u.register;p("82VHk",function(e,t){s(e.exports,"default",()=>a);var n=function(){var e=0,t=document.createElement("div");function a(e){return t.appendChild(e.dom),e}function o(n){for(var a=0;a<t.children.length;a++)t.children[a].style.display=a===n?"block":"none";e=n}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(n){n.preventDefault(),o(++e%t.children.length)},!1);var i=(performance||Date).now(),r=i,s=0,l=a(new n.Panel("FPS","#0ff","#002")),d=a(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=a(new n.Panel("MB","#f08","#201"));return o(0),{REVISION:16,dom:t,addPanel:a,showPanel:o,begin:function(){i=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(d.update(e-i,200),e>=r+1e3&&(l.update(1e3*s/(e-r),100),r=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:t,setMode:o}};n.Panel=function(e,t,n){var a=1/0,o=0,i=Math.round,r=i(window.devicePixelRatio||1),s=80*r,l=48*r,d=3*r,c=2*r,u=3*r,p=15*r,f=74*r,m=30*r,w=document.createElement("canvas");w.width=s,w.height=l,w.style.cssText="width:80px;height:48px";var g=w.getContext("2d");return g.font="bold "+9*r+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,d,c),g.fillRect(u,p,f,m),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(u,p,f,m),{dom:w,update:function(l,h){a=Math.min(a,l),o=Math.max(o,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,p),g.fillStyle=t,g.fillText(i(l)+" "+e+" ("+i(a)+"-"+i(o)+")",d,c),g.drawImage(w,u+r,p,f-r,m,u,p,f-r,m),g.fillRect(u+f-r,p,r,m),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(u+f-r,p,r,i((1-l/h)*m))}}};var a=n}),p("2Tb7o",function(e,t){s(e.exports,"getAssetURL",()=>n);function n(){let e;return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:2000/":"https://wwjll.github.io/three-chamber/assets/"}});var f=u("jw0R5"),m=u("cPutt"),w=u("ihXk0"),g=u("2sw9m"),h=u("7DqNw"),x=u("82VHk");let y=(0,u("2Tb7o").getAssetURL)()+"models/floors.glb",v=1/30,b=window.innerWidth,D=window.innerHeight,S={center:new f.Vector3,min:new f.Vector3,max:new f.Vector3},P=0,E=[],R="normal",A=[],z=!1,C=100,M=-1,T={reset:j,distance:1e3,scale:.02,easingName:"Linear",easingType:"In"},L=[];for(let e in m.Easing)"generatePow"==e?L.push("generatePow"):L.push(e);function j(e=A){z=!1,R="normal",e.map((e,t)=>{e.position.y=e.userData.originY,e.userData.status="normal",e.userData.progress=0})}(n=new f.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),n.setSize(b,D),n.setClearColor(3355443,1),n.shadowMap.enabled=!0,n.shadowMap.type=f.PCFSoftShadowMap,document.body.appendChild(n.domElement),(t=new f.Scene).add(new f.AmbientLight(0xf0f0f0,3)),e=new f.PerspectiveCamera(70,b/D,1,1e4),t.add(e),a=new g.OrbitControls(e,n.domElement),o=new f.Clock,i=new x.default,document.body.appendChild(i.dom),new(0,w.GLTFLoader)().load(y,function(o){let i=o.scene;(A=i.children).map(e=>{let t=e.userData.name.split(".")[1];E.push(Number(t)),e.userData.originY=e.position.y,e.userData.status="normal",e.userData.progress=0}),window.model=i,(r=new h.GUI).add(T,"reset"),r.add(T,"easingName",L),r.add(T,"easingType",["In","InOut","Out"]),r.add({level:E[0]},"level",E[0],E[E.length-1]).step(1).onChange(e=>{if(z){console.log("Floors is animating!");return}(function(e,t){e.every(e=>"normal"==e.userData.status)&&j(),z=!0;let n=E.indexOf(t);if(e[n],"normal"==R){let e=o(n,"up");e.length>0&&(R="expanded",a(e,"up"))}else"expanded"==R&&(t<C?a(o(n,"up"),"up"):a(o(n,"down"),"down"));function a(e,t){function n(e){e.every(e=>1==e.userData.progress)&&(z=!1)}e.forEach(e=>{e.userData.progress=0}),function a(){let o=e.length;"up"==t?e.forEach((t,a)=>{let{easingName:i,easingType:r,distance:s,scale:l}=T,{progress:d,originY:c}=t.userData;t.userData.progress+=l*(.4+2*(a+1)/o);let u=m.Easing[i];"generatePow"==i&&(u=u());let p=u[r](d);t.position.y=c+s*p,t.userData.progress>=1&&(t.userData.progress=1,t.position.y=c+s,t.userData.status="rised",n(e))}):"down"==t&&e.forEach((t,a)=>{let{easingName:i,easingType:r,scale:s,distance:l}=T,{progress:d,originY:c}=t.userData;t.userData.progress+=s*(.4+2*(o-a)/o);let u=m.Easing[i];"generatePow"==i&&(u=u());let p=u[r](d);t.position.y=c+l*(1-p),t.userData.progress>=1&&(t.userData.progress=1,t.position.y=c,t.userData.status="normal",n(e))}),z?M=requestAnimationFrame(a):cancelAnimationFrame(M)}()}function o(t,n){return"up"==n?e.filter((e,n)=>"normal"==e.userData.status&&n>t):"down"==n?e.filter((e,n)=>"rised"==e.userData.status&&n<=t):void 0}C=n})(A,e)}),i.traverse(e=>{window.floors=A,e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)}),t.add(i);let s=new f.Box3;s.setFromObject(i);let l=s.getSize(new f.Vector3),d=new f.Vector3,c=s.getCenter(d);a.target=d,S.min=s.min,S.max=s.max,S.center=c,S.size=l,e.position.x=c.x+1.2*l.x,e.position.y=c.y+ +l.y,e.position.z=c.z+1.2*l.z,e.updateProjectionMatrix(),a.update();let u=new f.SpotLight(0xf0f0f0,2);u.position.copy(e.position),u.position.y+=2*l.y,u.castShadow=!0,u.lookAt(d.x,d.y,d.z),u.fov=30,u.decay=.1,u.shadow.mapSize.setScalar(1024),u.shadow.bias=-1e-6,u.shadow.radius=5;let p=u.shadow.camera;p.near=1,p.far=1e4,p.left=p.bottom=-10,p.right=p.top=10,t.add(u),window.addEventListener("resize",t=>{b=window.innerWidth,D=window.innerHeight,e.aspect=b/D,e.updateProjectionMatrix(),n.setSize(b,D)})},function(e){},function(e){console.log(e)}),function a(){requestAnimationFrame(a);let r=o.getDelta();(P+=r)>v&&(i.update(),n.render(t,e),P%=v)}();
//# sourceMappingURL=buildingAnimation.5fa1c8bb.js.map
