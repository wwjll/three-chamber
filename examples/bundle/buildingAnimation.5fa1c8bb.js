let e,t,n,a,i,o,r;import"./buildingAnimation.5423aa82.js";import"./buildingAnimation.bd798f01.js";import"./buildingAnimation.4b8d4fc8.js";var s=globalThis,l={},d={},u=s.parcelRequire1149;null==u&&((u=function(e){if(e in l)return l[e].exports;if(e in d){var t=d[e];delete d[e];var n={id:e,exports:{}};return l[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){d[e]=t},s.parcelRequire1149=u),(0,u.register)("82VHk",function(e,t){Object.defineProperty(e.exports,"default",{get:()=>a,set:void 0,enumerable:!0,configurable:!0});var n=function(){var e=0,t=document.createElement("div");function a(e){return t.appendChild(e.dom),e}function i(n){for(var a=0;a<t.children.length;a++)t.children[a].style.display=a===n?"block":"none";e=n}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(n){n.preventDefault(),i(++e%t.children.length)},!1);var o=(performance||Date).now(),r=o,s=0,l=a(new n.Panel("FPS","#0ff","#002")),d=a(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=a(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:a,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(d.update(e-o,200),e>=r+1e3&&(l.update(1e3*s/(e-r),100),r=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:t,setMode:i}};n.Panel=function(e,t,n){var a=1/0,i=0,o=Math.round,r=o(window.devicePixelRatio||1),s=80*r,l=48*r,d=3*r,u=2*r,p=3*r,c=15*r,f=74*r,m=30*r,g=document.createElement("canvas");g.width=s,g.height=l,g.style.cssText="width:80px;height:48px";var w=g.getContext("2d");return w.font="bold "+9*r+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=n,w.fillRect(0,0,s,l),w.fillStyle=t,w.fillText(e,d,u),w.fillRect(p,c,f,m),w.fillStyle=n,w.globalAlpha=.9,w.fillRect(p,c,f,m),{dom:g,update:function(l,h){a=Math.min(a,l),i=Math.max(i,l),w.fillStyle=n,w.globalAlpha=1,w.fillRect(0,0,s,c),w.fillStyle=t,w.fillText(o(l)+" "+e+" ("+o(a)+"-"+o(i)+")",d,u),w.drawImage(g,p+r,c,f-r,m,p,c,f-r,m),w.fillRect(p+f-r,c,r,m),w.fillStyle=n,w.globalAlpha=.9,w.fillRect(p+f-r,c,r,o((1-l/h)*m))}}};var a=n});var p=u("jw0R5"),c=u("cPutt"),f=u("ihXk0"),m=u("2sw9m"),g=u("7DqNw"),w=u("82VHk");let h=(0,u("2Tb7o").getAssetURL)()+"models/floors.glb",y=1/30,x=window.innerWidth,v=window.innerHeight,D={center:new p.Vector3,min:new p.Vector3,max:new p.Vector3},b=0,S=[],P="normal",E=[],R=!1,z=100,A=-1,C={reset:T,distance:1e3,scale:.02,easingName:"Linear",easingType:"In"},M=[];for(let e in c.Easing)"generatePow"==e?M.push("generatePow"):M.push(e);function T(e=E){R=!1,P="normal",e.map((e,t)=>{e.position.y=e.userData.originY,e.userData.status="normal",e.userData.progress=0})}(n=new p.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),n.setSize(x,v),n.setClearColor(3355443,1),n.shadowMap.enabled=!0,n.shadowMap.type=p.PCFSoftShadowMap,document.body.appendChild(n.domElement),(t=new p.Scene).add(new p.AmbientLight(0xf0f0f0,3)),e=new p.PerspectiveCamera(70,x/v,1,1e4),t.add(e),a=new m.OrbitControls(e,n.domElement),i=new p.Clock,o=new w.default,document.body.appendChild(o.dom),new(0,f.GLTFLoader)().load(h,function(i){let o=i.scene;(E=o.children).map(e=>{let t=e.userData.name.split(".")[1];S.push(Number(t)),e.userData.originY=e.position.y,e.userData.status="normal",e.userData.progress=0}),window.model=o,(r=new g.GUI).add(C,"reset"),r.add(C,"easingName",M),r.add(C,"easingType",["In","InOut","Out"]),r.add({level:S[0]},"level",S[0],S[S.length-1]).step(1).onChange(e=>{if(R){console.log("Floors is animating!");return}(function(e,t){e.every(e=>"normal"==e.userData.status)&&T(),R=!0;let n=S.indexOf(t);if(e[n],"normal"==P){let e=i(n,"up");e.length>0&&(P="expanded",a(e,"up"))}else"expanded"==P&&(t<z?a(i(n,"up"),"up"):a(i(n,"down"),"down"));function a(e,t){function n(e){e.every(e=>1==e.userData.progress)&&(R=!1)}e.forEach(e=>{e.userData.progress=0}),function a(){let i=e.length;"up"==t?e.forEach((t,a)=>{let{easingName:o,easingType:r,distance:s,scale:l}=C,{progress:d,originY:u}=t.userData;t.userData.progress+=l*(.4+2*(a+1)/i);let p=c.Easing[o];"generatePow"==o&&(p=p());let f=p[r](d);t.position.y=u+s*f,t.userData.progress>=1&&(t.userData.progress=1,t.position.y=u+s,t.userData.status="rised",n(e))}):"down"==t&&e.forEach((t,a)=>{let{easingName:o,easingType:r,scale:s,distance:l}=C,{progress:d,originY:u}=t.userData;t.userData.progress+=s*(.4+2*(i-a)/i);let p=c.Easing[o];"generatePow"==o&&(p=p());let f=p[r](d);t.position.y=u+l*(1-f),t.userData.progress>=1&&(t.userData.progress=1,t.position.y=u,t.userData.status="normal",n(e))}),R?A=requestAnimationFrame(a):cancelAnimationFrame(A)}()}function i(t,n){return"up"==n?e.filter((e,n)=>"normal"==e.userData.status&&n>t):"down"==n?e.filter((e,n)=>"rised"==e.userData.status&&n<=t):void 0}z=n})(E,e)}),o.traverse(e=>{window.floors=E,e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)}),t.add(o);let s=new p.Box3;s.setFromObject(o);let l=s.getSize(new p.Vector3),d=new p.Vector3,u=s.getCenter(d);a.target=d,D.min=s.min,D.max=s.max,D.center=u,D.size=l,e.position.x=u.x+1.2*l.x,e.position.y=u.y+ +l.y,e.position.z=u.z+1.2*l.z,e.updateProjectionMatrix(),a.update();let f=new p.SpotLight(0xf0f0f0,2);f.position.copy(e.position),f.position.y+=2*l.y,f.castShadow=!0,f.lookAt(d.x,d.y,d.z),f.fov=30,f.decay=.1,f.shadow.mapSize.setScalar(1024),f.shadow.bias=-1e-6,f.shadow.radius=5;let m=f.shadow.camera;m.near=1,m.far=1e4,m.left=m.bottom=-10,m.right=m.top=10,t.add(f),window.addEventListener("resize",t=>{x=window.innerWidth,v=window.innerHeight,e.aspect=x/v,e.updateProjectionMatrix(),n.setSize(x,v)})},function(e){},function(e){console.log(e)}),function a(){requestAnimationFrame(a);let r=i.getDelta();(b+=r)>y&&(o.update(),n.render(t,e),b%=y)}();
//# sourceMappingURL=buildingAnimation.5fa1c8bb.js.map
